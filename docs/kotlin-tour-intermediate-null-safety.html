<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-17T17:49:52.894140135"><link rel="canonical" href="https://kotlinlang.org/docs/kotlin-tour-intermediate-null-safety.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Intermediate: Null safety | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"smart-casts-and-safe-casts","level":0,"title":"Smart casts and safe casts","anchor":"#smart-casts-and-safe-casts"},{"id":"is-and-is-operators","level":1,"title":"is and !is operators","anchor":"#is-and-is-operators"},{"id":"as-and-as-operators","level":1,"title":"as and as? operators","anchor":"#as-and-as-operators"},{"id":"null-values-and-collections","level":0,"title":"Null values and collections","anchor":"#null-values-and-collections"},{"id":"early-returns-and-the-elvis-operator","level":0,"title":"Early returns and the Elvis operator","anchor":"#early-returns-and-the-elvis-operator"},{"id":"practice","level":0,"title":"Practice","anchor":"#practice"},{"id":"null-safety-exercise-1","level":1,"title":"Exercise 1","anchor":"#null-safety-exercise-1"},{"id":"null-safety-exercise-2","level":1,"title":"Exercise 2","anchor":"#null-safety-exercise-2"},{"id":"null-safety-exercise-3","level":1,"title":"Exercise 3","anchor":"#null-safety-exercise-3"},{"id":"null-safety-exercise-4","level":1,"title":"Exercise 4","anchor":"#null-safety-exercise-4"},{"id":"next-step","level":0,"title":"Next step","anchor":"#next-step"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Intermediate: Null safety | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/kotlin-tour-intermediate-null-safety.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Intermediate: Null safety | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/kotlin-tour-intermediate-null-safety.html#webpage",
    "url": "https://kotlinlang.org/docs/kotlin-tour-intermediate-null-safety.html",
    "name": "Intermediate: Null safety | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="kotlin-tour-intermediate-null-safety" data-main-title="Intermediate: Null safety" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="kotlin-tour-welcome.md|Take Kotlin tour" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/tour/kotlin-tour-intermediate-null-safety.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="kotlin-tour-intermediate-null-safety" id="kotlin-tour-intermediate-null-safety.md">Intermediate: Null safety</h1><div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;-80rogk_10\&quot;\u003e\u003cimg alt\u003d\&quot;First step\&quot; src\u003d\&quot;images/icon-1-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;First step\&quot; id\u003d\&quot;-80rogk_11\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-extension-functions.html\&quot; id\u003d\&quot;-80rogk_12\&quot;\u003eExtension functions\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Second step\&quot; src\u003d\&quot;images/icon-2-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Second step\&quot; id\u003d\&quot;-80rogk_14\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-scope-functions.html\&quot; id\u003d\&quot;-80rogk_15\&quot;\u003eScope functions\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Third step\&quot; src\u003d\&quot;images/icon-3-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Third step\&quot; id\u003d\&quot;-80rogk_17\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-lambdas-receiver.html\&quot; id\u003d\&quot;-80rogk_18\&quot;\u003eLambda expressions with receiver\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Fourth step\&quot; src\u003d\&quot;images/icon-4-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Fourth step\&quot; id\u003d\&quot;-80rogk_20\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-classes-interfaces.html\&quot; id\u003d\&quot;-80rogk_21\&quot;\u003eClasses and interfaces\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Fifth step\&quot; src\u003d\&quot;images/icon-5-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Fifth step\&quot; id\u003d\&quot;-80rogk_23\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-objects.html\&quot; id\u003d\&quot;-80rogk_24\&quot;\u003eObjects\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Sixth step\&quot; src\u003d\&quot;images/icon-6-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Sixth step\&quot; id\u003d\&quot;-80rogk_26\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-open-special-classes.html\&quot; id\u003d\&quot;-80rogk_27\&quot;\u003eOpen and special classes\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Seventh step\&quot; src\u003d\&quot;images/icon-7-done.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Seventh step\&quot; id\u003d\&quot;-80rogk_29\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-properties.html\&quot; id\u003d\&quot;-80rogk_30\&quot;\u003eProperties\u003c/a\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Eighth step\&quot; src\u003d\&quot;images/icon-8.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Eighth step\&quot; id\u003d\&quot;-80rogk_32\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003cb id\u003d\&quot;-80rogk_33\&quot;\u003eNull safety\u003c/b\u003e\u003cbr\u003e \u003cimg alt\u003d\&quot;Ninth step\&quot; src\u003d\&quot;images/icon-9-todo.svg\&quot; class\u003d\&quot;inline-icon-\&quot; title\u003d\&quot;Ninth step\&quot; id\u003d\&quot;-80rogk_35\&quot; width\u003d\&quot;20\&quot; height\u003d\&quot;20\&quot;\u003e \u003ca href\u003d\&quot;kotlin-tour-intermediate-libraries-and-apis.html\&quot; id\u003d\&quot;-80rogk_36\&quot;\u003eLibraries and APIs\u003c/a\u003e\u003c/p\u003e&quot;]}"></div><p id="-80rogk_4">In the beginner tour, you learned how to handle <code class="code" id="-80rogk_37">null</code> values in your code. This chapter covers common use cases for null safety features and how to make the most of them.</p><section class="chapter"><h2 id="smart-casts-and-safe-casts" data-toc="smart-casts-and-safe-casts">Smart casts and safe casts</h2><p id="-80rogk_38">Kotlin can sometimes infer the type without explicit declaration. When you tell Kotlin to treat a variable or object as if it belongs to a specific type, this process is called <span class="control" id="-80rogk_41">casting</span>. When a type is automatically cast, like when it's inferred, it's called <span class="control" id="-80rogk_42">smart casting</span>.</p><section class="chapter"><h3 id="is-and-is-operators" data-toc="is-and-is-operators">is and !is operators</h3><p id="-80rogk_43">Before we explore how casting works, let's see how you can check if an object has a certain type. For this, you can use the <code class="code" id="-80rogk_48">is</code> and <code class="code" id="-80rogk_49">!is</code> operators with <code class="code" id="-80rogk_50">when</code> or <code class="code" id="-80rogk_51">if</code> conditional expressions:</p><ul class="list _bullet" id="-80rogk_44"><li class="list__item" id="-80rogk_52"><p id="-80rogk_54"><code class="code" id="-80rogk_55">is</code> checks if the object has the type and returns a boolean value.</p></li><li class="list__item" id="-80rogk_53"><p id="-80rogk_56"><code class="code" id="-80rogk_57">!is</code> checks if the object <span class="control" id="-80rogk_58">doesn't</span> have the type and returns a boolean value.</p></li></ul><p id="-80rogk_45">For example:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-casts">
fun printObjectType(obj: Any) {
    when (obj) {
        is Int -&gt; println(&quot;It's an Integer with value $obj&quot;)
        !is Double -&gt; println(&quot;It's NOT a Double&quot;)
        else -&gt; println(&quot;Unknown type&quot;)
    }
}

fun main() {
    val myInt = 42
    val myDouble = 3.14
    val myList = listOf(1, 2, 3)
  
    // The type is Int
    printObjectType(myInt)
    // It's an Integer with value 42

    // The type is List, so it's NOT a Double.
    printObjectType(myList)
    // It's NOT a Double

    // The type is Double, so the else branch is triggered.
    printObjectType(myDouble)
    // Unknown type
}
</div><aside class="prompt" data-type="tip" data-title="" id="-80rogk_47"><p id="-80rogk_59">You've already seen an example of how to use a <code class="code" id="-80rogk_60">when</code> conditional expression with the <code class="code" id="-80rogk_61">is</code> and <code class="code" id="-80rogk_62">!is</code> operators in the <a href="kotlin-tour-intermediate-open-special-classes.html#sealed-classes" id="-80rogk_63">Open and other special classes</a> chapter.</p></aside></section><section class="chapter"><h3 id="as-and-as-operators" data-toc="as-and-as-operators">as and as? operators</h3><p id="-80rogk_64">To explicitly <span class="emphasis" id="-80rogk_76">cast</span> an object to any other type, use the <code class="code" id="-80rogk_77">as</code> operator. This includes casting from a nullable type to its non-nullable counterpart. If the cast isn't possible, the program crashes <span class="control" id="-80rogk_78">at runtime</span>. This is why it's called the <span class="control" id="-80rogk_79">unsafe</span> cast operator.</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-as-operator">
fun main() {
//sampleStart
    val a: String? = null
    val b = a as String

    // Triggers an error at runtime
    print(b)
//sampleEnd
}
</div><p id="-80rogk_66">To explicitly cast an object to a non-nullable type, but return <code class="code" id="-80rogk_80">null</code> instead of throwing an error on failure, use the <code class="code" id="-80rogk_81">as?</code> operator. Since the <code class="code" id="-80rogk_82">as?</code> operator doesn't trigger an error on failure, it is called the <span class="control" id="-80rogk_83">safe</span> operator.</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-safe-operator">
fun main() {
//sampleStart
    val a: String? = null
    val b = a as? String

    // Returns null value
    print(b)
    // null
//sampleEnd
}
</div><p id="-80rogk_68">You can combine the <code class="code" id="-80rogk_84">as?</code> operator with the Elvis operator <code class="code" id="-80rogk_85">?:</code> to reduce several lines of code down to one. For example, the following <code class="code" id="-80rogk_86">calculateTotalStringLength()</code> function calculates the total length of all strings provided in a mixed list:</p><div class="code-block" data-lang="kotlin">
fun calculateTotalStringLength(items: List&lt;Any&gt;): Int {
    var totalLength = 0

    for (item in items) {
        totalLength += if (item is String) {
            item.length
        } else {
            0  // Add 0 for non-String items
        }
    }

    return totalLength
}
</div><p id="-80rogk_70">The example:</p><ul class="list _bullet" id="-80rogk_71"><li class="list__item" id="-80rogk_87"><p id="-80rogk_91">Uses the <code class="code" id="-80rogk_92">totalLength</code> variable as a counter.</p></li><li class="list__item" id="-80rogk_88"><p id="-80rogk_93">Uses a <code class="code" id="-80rogk_94">for</code> loop to loop through every item in the list.</p></li><li class="list__item" id="-80rogk_89"><p id="-80rogk_95">Uses an <code class="code" id="-80rogk_97">if</code> and the <code class="code" id="-80rogk_98">is</code> operator to check if the current item is a string:</p><ul class="list _bullet" id="-80rogk_96"><li class="list__item" id="-80rogk_99"><p id="-80rogk_101">If it is, the string's length is added to the counter.</p></li><li class="list__item" id="-80rogk_100"><p id="-80rogk_102">If it is not, the counter isn't incremented.</p></li></ul></li><li class="list__item" id="-80rogk_90"><p id="-80rogk_103">Returns the final value of the <code class="code" id="-80rogk_104">totalLength</code> variable.</p></li></ul><p id="-80rogk_72">This code can be reduced to:</p><div class="code-block" data-lang="kotlin">
fun calculateTotalStringLength(items: List&lt;Any&gt;): Int {
    return items.sumOf { (it as? String)?.length ?: 0 }
}
</div><p id="-80rogk_74">The example uses the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/sum-of.html" id="-80rogk_105" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_106">.sumOf()</code></a> extension function and provides a lambda expression that:</p><ul class="list _bullet" id="-80rogk_75"><li class="list__item" id="-80rogk_107"><p id="-80rogk_110">For each item in the list, performs a safe cast to <code class="code" id="-80rogk_111">String</code> using <code class="code" id="-80rogk_112">as?</code>.</p></li><li class="list__item" id="-80rogk_108"><p id="-80rogk_113">Uses a safe call <code class="code" id="-80rogk_114">?.</code> to access the <code class="code" id="-80rogk_115">length</code> property if the call doesn't return a <code class="code" id="-80rogk_116">null</code> value.</p></li><li class="list__item" id="-80rogk_109"><p id="-80rogk_117">Uses the Elvis operator <code class="code" id="-80rogk_118">?:</code> to return <code class="code" id="-80rogk_119">0</code> if the safe call returns a <code class="code" id="-80rogk_120">null</code> value.</p></li></ul></section></section><section class="chapter"><h2 id="null-values-and-collections" data-toc="null-values-and-collections">Null values and collections</h2><p id="-80rogk_121">In Kotlin, working with collections often involves handling <code class="code" id="-80rogk_144">null</code> values and filtering out unnecessary elements. Kotlin has useful functions that you can use to write clean, efficient, and null-safe code when working with lists, sets, maps, and other types of collections.</p><p id="-80rogk_122">To filter <code class="code" id="-80rogk_145">null</code> values from a list, use the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/filter-not-null.html" id="-80rogk_146" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_147">filterNotNull()</code></a> function:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-filternotnull">
fun main() {
//sampleStart
    val emails: List&lt;String?&gt; = listOf(&quot;alice@example.com&quot;, null, &quot;bob@example.com&quot;, null, &quot;carol@example.com&quot;)

    val validEmails = emails.filterNotNull()

    println(validEmails)
    // [alice@example.com, bob@example.com, carol@example.com]
//sampleEnd
}
</div><p id="-80rogk_124">If you want to perform filtering of <code class="code" id="-80rogk_148">null</code> values directly when creating a list, use the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/list-of-not-null.html" id="-80rogk_149" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_150">listOfNotNull()</code></a> function:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-listofnotnull">
fun main() {
//sampleStart
    val serverConfig = mapOf(
        &quot;appConfig.json&quot; to &quot;App Configuration&quot;,
        &quot;dbConfig.json&quot; to &quot;Database Configuration&quot;
    )

    val requestedFile = &quot;appConfig.json&quot;
    val configFiles = listOfNotNull(serverConfig[requestedFile])

    println(configFiles)
    // [App Configuration]
//sampleEnd
}
</div><p id="-80rogk_126">In both of these examples, if all items are <code class="code" id="-80rogk_151">null</code> values, an empty list is returned.</p><p id="-80rogk_127">Kotlin also provides functions that you can use to find values in collections. If a value isn't found, they return <code class="code" id="-80rogk_152">null</code> values instead of triggering an error:</p><ul class="list _bullet" id="-80rogk_128"><li class="list__item" id="-80rogk_153"><p id="-80rogk_155"><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/max-or-null.html" id="-80rogk_156" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_158">maxOrNull()</code></a> finds the highest value. If one doesn't exist, returns a <code class="code" id="-80rogk_157">null</code> value.</p></li><li class="list__item" id="-80rogk_154"><p id="-80rogk_159"><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/min-or-null.html" id="-80rogk_160" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_162">minOrNull()</code></a> finds the lowest value. If one doesn't exist, returns a <code class="code" id="-80rogk_161">null</code> value.</p></li></ul><p id="-80rogk_129">For example:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-collections">
fun main() {
//sampleStart
    // Temperatures recorded over a week
    val temperatures = listOf(15, 18, 21, 21, 19, 17, 16)
  
    // Find the highest temperature of the week
    val maxTemperature = temperatures.maxOrNull()
    println(&quot;Highest temperature recorded: ${maxTemperature ?: &quot;No data&quot;}&quot;)
    // Highest temperature recorded: 21

    // Find the lowest temperature of the week
    val minTemperature = temperatures.minOrNull()
    println(&quot;Lowest temperature recorded: ${minTemperature ?: &quot;No data&quot;}&quot;)
    // Lowest temperature recorded: 15
//sampleEnd
}
</div><p id="-80rogk_131">This example uses the Elvis operator <code class="code" id="-80rogk_163">?:</code> to return a printed statement if the functions return a <code class="code" id="-80rogk_164">null</code> value.</p><aside class="prompt" data-type="note" data-title="" id="-80rogk_132"><p id="-80rogk_165">The <code class="code" id="-80rogk_166">maxOrNull()</code>, and <code class="code" id="-80rogk_167">minOrNull()</code> functions are designed to be used with collections that <span class="control" id="-80rogk_168">don't</span> contain <code class="code" id="-80rogk_169">null</code> values. Otherwise, you can't tell whether the function couldn't find the desired value or whether it found a <code class="code" id="-80rogk_170">null</code> value.</p></aside><p id="-80rogk_133">You can use the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/single-or-null.html" id="-80rogk_171" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_173">singleOrNull()</code></a> function with a lambda expression to find a single item that matches a condition. If one doesn't exist or there are multiple items that match, the function returns a <code class="code" id="-80rogk_172">null</code> value:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-singleornull">
fun main() {
//sampleStart
    // Temperatures recorded over a week
    val temperatures = listOf(15, 18, 21, 21, 19, 17, 16)

    // Check if there was exactly one day with 30 degrees
    val singleHotDay = temperatures.singleOrNull{ it == 30 }
    println(&quot;Single hot day with 30 degrees: ${singleHotDay ?: &quot;None&quot;}&quot;)
    // Single hot day with 30 degrees: None
//sampleEnd
}
</div><aside class="prompt" data-type="note" data-title="" id="-80rogk_135"><p id="-80rogk_174">The <code class="code" id="-80rogk_175">singleOrNull()</code> function is designed to be used with collections that <span class="control" id="-80rogk_176">don't</span> contain <code class="code" id="-80rogk_177">null</code> values.</p></aside><p id="-80rogk_136">Some functions use a lambda expression to transform a collection and return <code class="code" id="-80rogk_178">null</code> values if they can't fulfill their purpose.</p><p id="-80rogk_137">To transform a collection with a lambda expression and return the first value that isn't <code class="code" id="-80rogk_179">null</code>, use the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/first-not-null-of-or-null.html" id="-80rogk_180" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_182">firstNotNullOfOrNull()</code></a> function. If no such value exists, the function returns a <code class="code" id="-80rogk_181">null</code> value:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-firstnotnullofornull">
fun main() {
//sampleStart
    data class User(val name: String?, val age: Int?)

    val users = listOf(
        User(null, 25),
        User(&quot;Alice&quot;, null),
        User(&quot;Bob&quot;, 30)
    )

    val firstNonNullName = users.firstNotNullOfOrNull { it.name }
    println(firstNonNullName)
    // Alice
//sampleEnd
}
</div><p id="-80rogk_139">To use a lambda expression to process each collection item sequentially and create an accumulated value (or return a <code class="code" id="-80rogk_183">null</code> value if the collection is empty) use the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/reduce-or-null.html" id="-80rogk_184" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_185">reduceOrNull()</code></a> function:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-reduceornull">
fun main() {
//sampleStart
    // Prices of items in a shopping cart
    val itemPrices = listOf(20, 35, 15, 40, 10)

    // Calculate the total price using the reduceOrNull() function
    val totalPrice = itemPrices.reduceOrNull { runningTotal, price -&gt; runningTotal + price }
    println(&quot;Total price of items in the cart: ${totalPrice ?: &quot;No items&quot;}&quot;)
    // Total price of items in the cart: 120

    val emptyCart = listOf&lt;Int&gt;()
    val emptyTotalPrice = emptyCart.reduceOrNull { runningTotal, price -&gt; runningTotal + price }
    println(&quot;Total price of items in the empty cart: ${emptyTotalPrice ?: &quot;No items&quot;}&quot;)
    // Total price of items in the empty cart: No items
//sampleEnd
}
</div><p id="-80rogk_141">This example also uses the Elvis operator <code class="code" id="-80rogk_186">?:</code> to return a printed statement if the function returns a <code class="code" id="-80rogk_187">null</code> value.</p><aside class="prompt" data-type="note" data-title="" id="-80rogk_142"><p id="-80rogk_188">The <code class="code" id="-80rogk_189">reduceOrNull()</code> function is designed to be used with collections that <span class="control" id="-80rogk_190">don't</span> contain <code class="code" id="-80rogk_191">null</code> values.</p></aside><p id="-80rogk_143">Explore Kotlin's <a href="https://kotlinlang.org/api/core/kotlin-stdlib/" id="-80rogk_192" data-external="true" rel="noopener noreferrer" target="_blank">standard library</a> to find more functions that you can use to make your code safer.</p></section><section class="chapter"><h2 id="early-returns-and-the-elvis-operator" data-toc="early-returns-and-the-elvis-operator">Early returns and the Elvis operator</h2><p id="-80rogk_193">In the beginner tour, you learned how to use <a href="kotlin-tour-functions.html#early-returns-in-functions" id="-80rogk_201">early returns</a> to stop your function from being processed further than a certain point. You can use the Elvis operator <code class="code" id="-80rogk_202">?:</code> with an early return to check preconditions in a function. This approach is a great way to keep your code concise because you don't need to use nested checks. The reduced complexity of your code also makes it easier to maintain. For example:</p><div class="code-block" data-lang="kotlin" data-runnable="true" id="kotlin-tour-null-safety-early-return">
data class User(
    val id: Int,
    val name: String,
    // List of friend user IDs
    val friends: List&lt;Int&gt;
)

// Function to get the number of friends for a user
fun getNumberOfFriends(users: Map&lt;Int, User&gt;, userId: Int): Int {
    // Retrieves the user or return -1 if not found
    val user = users[userId] ?: return -1
    // Returns the number of friends
    return user.friends.size
}

fun main() {
    // Creates some sample users
    val user1 = User(1, &quot;Alice&quot;, listOf(2, 3))
    val user2 = User(2, &quot;Bob&quot;, listOf(1))
    val user3 = User(3, &quot;Charlie&quot;, listOf(1))

    // Creates a map of users
    val users = mapOf(1 to user1, 2 to user2, 3 to user3)

    println(getNumberOfFriends(users, 1))
    // 2
    println(getNumberOfFriends(users, 2))
    // 1
    println(getNumberOfFriends(users, 4))
    // -1
}
</div><p id="-80rogk_195">In this example:</p><ul class="list _bullet" id="-80rogk_196"><li class="list__item" id="-80rogk_203"><p id="-80rogk_206">There is a <code class="code" id="-80rogk_207">User</code> data class that has properties for the user's <code class="code" id="-80rogk_208">id</code>, <code class="code" id="-80rogk_209">name</code> and list of friends.</p></li><li class="list__item" id="-80rogk_204"><p id="-80rogk_210">The <code class="code" id="-80rogk_212">getNumberOfFriends()</code> function:</p><ul class="list _bullet" id="-80rogk_211"><li class="list__item" id="-80rogk_213"><p id="-80rogk_218">Accepts a map of <code class="code" id="-80rogk_219">User</code> instances and a user ID as an integer.</p></li><li class="list__item" id="-80rogk_214"><p id="-80rogk_220">Accesses the value of the map of <code class="code" id="-80rogk_221">User</code> instances with the provided user ID.</p></li><li class="list__item" id="-80rogk_215"><p id="-80rogk_222">Uses an Elvis operator to return the function early with the value of <code class="code" id="-80rogk_223">-1</code> if the map value is a <code class="code" id="-80rogk_224">null</code> value.</p></li><li class="list__item" id="-80rogk_216"><p id="-80rogk_225">Assigns the value found from the map to the <code class="code" id="-80rogk_226">user</code> variable.</p></li><li class="list__item" id="-80rogk_217"><p id="-80rogk_227">Returns the number of friends in the user's friends list by using the <code class="code" id="-80rogk_228">size</code> property.</p></li></ul></li><li class="list__item" id="-80rogk_205"><p id="-80rogk_229">The <code class="code" id="-80rogk_231">main()</code> function:</p><ul class="list _bullet" id="-80rogk_230"><li class="list__item" id="-80rogk_232"><p id="-80rogk_236">Creates three <code class="code" id="-80rogk_237">User</code> instances.</p></li><li class="list__item" id="-80rogk_233"><p id="-80rogk_238">Creates a map of these <code class="code" id="-80rogk_239">User</code> instances and assigns them to the <code class="code" id="-80rogk_240">users</code> variable.</p></li><li class="list__item" id="-80rogk_234"><p id="-80rogk_241">Calls the <code class="code" id="-80rogk_242">getNumberOfFriends()</code> function on the <code class="code" id="-80rogk_243">users</code> variable with values <code class="code" id="-80rogk_244">1</code> and <code class="code" id="-80rogk_245">2</code> that returns two friends for <code class="code" id="-80rogk_246">&quot;Alice&quot;</code> and one friend for <code class="code" id="-80rogk_247">&quot;Bob&quot;</code>.</p></li><li class="list__item" id="-80rogk_235"><p id="-80rogk_248">Calls the <code class="code" id="-80rogk_249">getNumberOfFriends()</code> function on the <code class="code" id="-80rogk_250">users</code> variable with value <code class="code" id="-80rogk_251">4</code>, which triggers an early return with a value of <code class="code" id="-80rogk_252">-1</code>.</p></li></ul></li></ul><p id="-80rogk_197">You may notice that the code could be more concise without an early return. However, this approach needs multiple safe calls because the <code class="code" id="-80rogk_253">users[userId]</code> might return a <code class="code" id="-80rogk_254">null</code> value, making the code slightly harder to read:</p><div class="code-block" data-lang="kotlin">
fun getNumberOfFriends(users: Map&lt;Int, User&gt;, userId: Int): Int {
    // Retrieve the user or return -1 if not found
    return users[userId]?.friends?.size ?: -1
}
</div><p id="-80rogk_199">Although this example checks only one condition with the Elvis operator, you can add multiple checks to cover any critical error paths. Early returns with the Elvis operator prevent your program from doing unnecessary work and make your code safer by stopping as soon as a <code class="code" id="-80rogk_255">null</code> value or invalid case is detected.</p><p id="-80rogk_200">For more information about how you can use <code class="code" id="-80rogk_256">return</code> in your code, see <a href="returns.html" id="-80rogk_257">Returns and jumps</a>.</p></section><section class="chapter"><h2 id="practice" data-toc="practice">Practice</h2><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="null-safety-exercise-1" data-toc="null-safety-exercise-1">Exercise 1</h3></div><div class="collapse__content"><p id="-80rogk_262">You are developing a notification system for an app where users can enable or disable different types of notifications. Complete the <code class="code" id="-80rogk_269">getNotificationPreferences()</code> function so that:</p><ol class="list _decimal" id="-80rogk_263" type="1"><li class="list__item" id="-80rogk_270"><p id="-80rogk_274">The <code class="code" id="-80rogk_275">validUser</code> variable uses the <code class="code" id="-80rogk_276">as?</code> operator to check if <code class="code" id="-80rogk_277">user</code> is an instance of the <code class="code" id="-80rogk_278">User</code> class. If it isn't, return an empty list.</p></li><li class="list__item" id="-80rogk_271"><p id="-80rogk_279">The <code class="code" id="-80rogk_280">userName</code> variable uses the Elvis <code class="code" id="-80rogk_281">?:</code> operator to ensure that the user's name defaults to <code class="code" id="-80rogk_282">&quot;Guest&quot;</code> if it is <code class="code" id="-80rogk_283">null</code>.</p></li><li class="list__item" id="-80rogk_272"><p id="-80rogk_284">The final return statement uses the <code class="code" id="-80rogk_285">.takeIf()</code> function to include email and SMS notification preferences only if they are enabled.</p></li><li class="list__item" id="-80rogk_273"><p id="-80rogk_286">The <code class="code" id="-80rogk_287">main()</code> function runs successfully and prints the expected output.</p></li></ol><aside class="prompt" data-type="tip" data-title="" id="-80rogk_264"><p id="-80rogk_288">The <a href="scope-functions.html#takeif-and-takeunless" id="-80rogk_290"><code class="code" id="-80rogk_292">takeIf()</code> function</a> returns the original value if the given condition is true, otherwise it returns <code class="code" id="-80rogk_291">null</code>. For example:</p><div class="code-block" data-lang="kotlin">
fun main() {
    // The user is logged in
    val userIsLoggedIn = true
    // The user has an active session
    val hasSession = true

    // Gives access to the dashboard if the user is logged in
    // and has an active session
    val canAccessDashboard = userIsLoggedIn.takeIf { hasSession }

    println(canAccessDashboard ?: &quot;Access denied&quot;)
    // true
}
</div></aside><div class="table-wrapper"><table class="" id="-80rogk_265"><tbody></tbody></table></div><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-tour-null-safety-exercise-1">
data class User(val name: String?)

fun getNotificationPreferences(user: Any, emailEnabled: Boolean, smsEnabled: Boolean): List&lt;String&gt; {
    val validUser = // Write your code here
    val userName = // Write your code here

    return listOfNotNull( /* Write your code here */)
}

fun main() {
    val user1 = User(&quot;Alice&quot;)
    val user2 = User(null)
    val invalidUser = &quot;NotAUser&quot;

    println(getNotificationPreferences(user1, emailEnabled = true, smsEnabled = false))
    // [Email Notifications enabled for Alice]
    println(getNotificationPreferences(user2, emailEnabled = false, smsEnabled = true))
    // [SMS Notifications enabled for Guest]
    println(getNotificationPreferences(invalidUser, emailEnabled = true, smsEnabled = true))
    // []
}
</div><div class="table-wrapper"><table class="" id="-80rogk_267"><tbody></tbody></table></div><div class="code-collapse" data-lang="kotlin" id="kotlin-tour-null-safety-solution-1" data-is-expanded="false" data-synopsis="Example solution">
data class User(val name: String?)

fun getNotificationPreferences(user: Any, emailEnabled: Boolean, smsEnabled: Boolean): List&lt;String&gt; {
    val validUser = user as? User ?: return emptyList()
    val userName = validUser.name ?: &quot;Guest&quot;

    return listOfNotNull(
        &quot;Email Notifications enabled for $userName&quot;.takeIf { emailEnabled },
        &quot;SMS Notifications enabled for $userName&quot;.takeIf { smsEnabled }
    )
}

fun main() {
    val user1 = User(&quot;Alice&quot;)
    val user2 = User(null)
    val invalidUser = &quot;NotAUser&quot;

    println(getNotificationPreferences(user1, emailEnabled = true, smsEnabled = false))
    // [Email Notifications enabled for Alice]
    println(getNotificationPreferences(user2, emailEnabled = false, smsEnabled = true))
    // [SMS Notifications enabled for Guest]
    println(getNotificationPreferences(invalidUser, emailEnabled = true, smsEnabled = true))
    // []
}
</div></div></div></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="null-safety-exercise-2" data-toc="null-safety-exercise-2">Exercise 2</h3></div><div class="collapse__content"><p id="-80rogk_293">You are working on a subscription-based streaming service where users can have multiple subscriptions, but <span class="control" id="-80rogk_300">only one can be active at a time</span>. Complete the <code class="code" id="-80rogk_301">getActiveSubscription()</code> function so that it uses the <code class="code" id="-80rogk_302">singleOrNull()</code> function with a predicate to return a <code class="code" id="-80rogk_303">null</code> value if there is more than one active subscription:</p><div class="table-wrapper"><table class="" id="-80rogk_294"><tbody></tbody></table></div><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-tour-null-safety-exercise-2">
data class Subscription(val name: String, val isActive: Boolean)

fun getActiveSubscription(subscriptions: List&lt;Subscription&gt;): Subscription? // Write your code here

fun main() {
    val userWithPremiumPlan = listOf(
        Subscription(&quot;Basic Plan&quot;, false),
        Subscription(&quot;Premium Plan&quot;, true)
    )

    val userWithConflictingPlans = listOf(
        Subscription(&quot;Basic Plan&quot;, true),
        Subscription(&quot;Premium Plan&quot;, true)
    )

    println(getActiveSubscription(userWithPremiumPlan))
    // Subscription(name=Premium Plan, isActive=true)

    println(getActiveSubscription(userWithConflictingPlans))
    // null
}
</div><div class="table-wrapper"><table class="" id="-80rogk_296"><tbody></tbody></table></div><div class="code-collapse" data-lang="kotlin" id="kotlin-tour-null-safety-solution-2-1" data-is-expanded="false" data-synopsis="Example solution 1">
data class Subscription(val name: String, val isActive: Boolean)

fun getActiveSubscription(subscriptions: List&lt;Subscription&gt;): Subscription? {
    return subscriptions.singleOrNull { subscription -&gt; subscription.isActive }
}

fun main() {
    val userWithPremiumPlan = listOf(
        Subscription(&quot;Basic Plan&quot;, false),
        Subscription(&quot;Premium Plan&quot;, true)
    )

    val userWithConflictingPlans = listOf(
        Subscription(&quot;Basic Plan&quot;, true),
        Subscription(&quot;Premium Plan&quot;, true)
    )

    println(getActiveSubscription(userWithPremiumPlan))
    // Subscription(name=Premium Plan, isActive=true)

    println(getActiveSubscription(userWithConflictingPlans))
    // null
}
</div><div class="table-wrapper"><table class="" id="-80rogk_298"><tbody></tbody></table></div><div class="code-collapse" data-lang="kotlin" id="kotlin-tour-null-safety-solution-2-2" data-is-expanded="false" data-synopsis="Example solution 2">
data class Subscription(val name: String, val isActive: Boolean)

fun getActiveSubscription(subscriptions: List&lt;Subscription&gt;): Subscription? =
    subscriptions.singleOrNull { it.isActive }

fun main() {
    val userWithPremiumPlan = listOf(
        Subscription(&quot;Basic Plan&quot;, false),
        Subscription(&quot;Premium Plan&quot;, true)
    )

    val userWithConflictingPlans = listOf(
        Subscription(&quot;Basic Plan&quot;, true),
        Subscription(&quot;Premium Plan&quot;, true)
    )

    println(getActiveSubscription(userWithPremiumPlan))
    // Subscription(name=Premium Plan, isActive=true)

    println(getActiveSubscription(userWithConflictingPlans))
    // null
}
</div></div></div></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="null-safety-exercise-3" data-toc="null-safety-exercise-3">Exercise 3</h3></div><div class="collapse__content"><p id="-80rogk_304">You are working on a social media platform where users have usernames and account statuses. You want to see the list of currently active usernames. Complete the <code class="code" id="-80rogk_313">getActiveUsernames()</code> function so that the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/map-not-null.html" id="-80rogk_314" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-80rogk_316">mapNotNull()</code> function</a> has a predicate that returns the username if it is active or a <code class="code" id="-80rogk_315">null</code> value if it isn't:</p><div class="table-wrapper"><table class="" id="-80rogk_305"><tbody></tbody></table></div><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-tour-null-safety-exercise-3">
data class User(val username: String, val isActive: Boolean)

fun getActiveUsernames(users: List&lt;User&gt;): List&lt;String&gt; {
    return users.mapNotNull { /* Write your code here */ }
}

fun main() {
    val allUsers = listOf(
        User(&quot;alice123&quot;, true),
        User(&quot;bob_the_builder&quot;, false),
        User(&quot;charlie99&quot;, true)
    )

    println(getActiveUsernames(allUsers))
    // [alice123, charlie99]
}
</div><div class="table-wrapper"><table class="" id="-80rogk_307"><tbody></tbody></table></div><aside class="prompt" data-type="tip" data-title="" id="-80rogk_308"><p id="-80rogk_317">Just like in Exercise 1, you can use the <a href="scope-functions.html#takeif-and-takeunless" id="-80rogk_318"><code class="code" id="-80rogk_319">takeIf()</code> function</a> when you check if the user is active.</p></aside><div class="table-wrapper"><table class="" id="-80rogk_309"><tbody></tbody></table></div><div class="code-collapse" data-lang="kotlin" id="kotlin-tour-null-safety-solution-3-1" data-is-expanded="false" data-synopsis="Example solution 1">
data class User(val username: String, val isActive: Boolean)

fun getActiveUsernames(users: List&lt;User&gt;): List&lt;String&gt; {
    return users.mapNotNull { user -&gt;
        if (user.isActive) user.username else null
    }
}

fun main() {
    val allUsers = listOf(
        User(&quot;alice123&quot;, true),
        User(&quot;bob_the_builder&quot;, false),
        User(&quot;charlie99&quot;, true)
    )

    println(getActiveUsernames(allUsers))
    // [alice123, charlie99]
}
</div><div class="table-wrapper"><table class="" id="-80rogk_311"><tbody></tbody></table></div><div class="code-collapse" data-lang="kotlin" id="kotlin-tour-null-safety-solution-3-2" data-is-expanded="false" data-synopsis="Example solution 2">
data class User(val username: String, val isActive: Boolean)

fun getActiveUsernames(users: List&lt;User&gt;): List&lt;String&gt; = users.mapNotNull { user -&gt; user.username.takeIf { user.isActive } }

fun main() {
    val allUsers = listOf(
        User(&quot;alice123&quot;, true),
        User(&quot;bob_the_builder&quot;, false),
        User(&quot;charlie99&quot;, true)
    )

    println(getActiveUsernames(allUsers))
    // [alice123, charlie99]
}
</div></div></div></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="null-safety-exercise-4" data-toc="null-safety-exercise-4">Exercise 4</h3></div><div class="collapse__content"><p id="-80rogk_320">You are working on an inventory management system for an e-commerce platform. Before processing a sale, you need to check if the requested quantity of a product is valid based on the available stock.</p><p id="-80rogk_321">Complete the <code class="code" id="-80rogk_328">validateStock()</code> function so that it uses early returns and the Elvis operator (where applicable) to check if:</p><ul class="list _bullet" id="-80rogk_322"><li class="list__item" id="-80rogk_329"><p id="-80rogk_333">The <code class="code" id="-80rogk_334">requested</code> variable is <code class="code" id="-80rogk_335">null</code>.</p></li><li class="list__item" id="-80rogk_330"><p id="-80rogk_336">The <code class="code" id="-80rogk_337">available</code> variable is <code class="code" id="-80rogk_338">null</code>.</p></li><li class="list__item" id="-80rogk_331"><p id="-80rogk_339">The <code class="code" id="-80rogk_340">requested</code> variable is a negative value.</p></li><li class="list__item" id="-80rogk_332"><p id="-80rogk_341">The amount in the <code class="code" id="-80rogk_342">requested</code> variable is higher than in the <code class="code" id="-80rogk_343">available</code> variable.</p></li></ul><p id="-80rogk_323">In all of the above cases, the function must return early with the value of <code class="code" id="-80rogk_344">-1</code>.</p><div class="table-wrapper"><table class="" id="-80rogk_324"><tbody></tbody></table></div><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-tour-null-safety-exercise-4">
fun validateStock(requested: Int?, available: Int?): Int {
    // Write your code here
}

fun main() {
    println(validateStock(5,10))
    // 5
    println(validateStock(null,10))
    // -1
    println(validateStock(-2,10))
    // -1
}
</div><div class="table-wrapper"><table class="" id="-80rogk_326"><tbody></tbody></table></div><div class="code-collapse" data-lang="kotlin" id="kotlin-tour-null-safety-solution-4" data-is-expanded="false" data-synopsis="Example solution">
fun validateStock(requested: Int?, available: Int?): Int {
    val validRequested = requested ?: return -1
    val validAvailable = available ?: return -1

    if (validRequested &lt; 0) return -1
    if (validRequested &gt; validAvailable) return -1

    return validRequested
}

fun main() {
    println(validateStock(5,10))
    // 5
    println(validateStock(null,10))
    // -1
    println(validateStock(-2,10))
    // -1
}
</div></div></div></section></section><section class="chapter"><h2 id="next-step" data-toc="next-step">Next step</h2><p id="-80rogk_345"><a href="kotlin-tour-intermediate-libraries-and-apis.html" id="-80rogk_346">Intermediate: Libraries and APIs</a></p></section><div class="last-modified">17 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="kotlin-tour-intermediate-properties.html" class="navigation-links__prev">Intermediate: Properties</a><a href="kotlin-tour-intermediate-libraries-and-apis.html" class="navigation-links__next">Intermediate: Libraries and APIs</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>