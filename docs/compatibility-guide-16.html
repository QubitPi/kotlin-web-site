<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-16T16:36:00.982759465"><link rel="canonical" href="https://kotlinlang.org/docs/compatibility-guide-16.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Compatibility guide for Kotlin 1.6 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"basic-terms","level":0,"title":"Basic terms","anchor":"#basic-terms"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default","level":1,"title":"Make when statements with enum, sealed, and Boolean subjects exhaustive by default","anchor":"#make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default"},{"id":"deprecate-confusing-grammar-in-when-with-subject","level":1,"title":"Deprecate confusing grammar in when-with-subject","anchor":"#deprecate-confusing-grammar-in-when-with-subject"},{"id":"prohibit-access-to-class-members-in-the-super-constructor-call-of-its-companion-and-nested-objects","level":1,"title":"Prohibit access to class members in the super constructor call of its companion and nested objects","anchor":"#prohibit-access-to-class-members-in-the-super-constructor-call-of-its-companion-and-nested-objects"},{"id":"type-nullability-enhancement-improvements","level":1,"title":"Type nullability enhancement improvements","anchor":"#type-nullability-enhancement-improvements"},{"id":"prevent-implicit-coercions-between-different-numeric-types","level":1,"title":"Prevent implicit coercions between different numeric types","anchor":"#prevent-implicit-coercions-between-different-numeric-types"},{"id":"prohibit-declarations-of-repeatable-annotation-classes-whose-container-annotation-violates-jls","level":1,"title":"Prohibit declarations of repeatable annotation classes whose container annotation violates JLS","anchor":"#prohibit-declarations-of-repeatable-annotation-classes-whose-container-annotation-violates-jls"},{"id":"prohibit-declaring-a-nested-class-named-container-in-a-repeatable-annotation-class","level":1,"title":"Prohibit declaring a nested class named Container in a repeatable annotation class","anchor":"#prohibit-declaring-a-nested-class-named-container-in-a-repeatable-annotation-class"},{"id":"prohibit-jvmfield-on-a-property-in-the-primary-constructor-that-overrides-an-interface-property","level":1,"title":"Prohibit @JvmField on a property in the primary constructor that overrides an interface property","anchor":"#prohibit-jvmfield-on-a-property-in-the-primary-constructor-that-overrides-an-interface-property"},{"id":"deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default","level":1,"title":"Deprecate the enable and the compatibility modes of the compiler option -Xjvm-default","anchor":"#deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default"},{"id":"prohibit-super-calls-from-public-abi-inline-functions","level":1,"title":"Prohibit super calls from public-abi inline functions","anchor":"#prohibit-super-calls-from-public-abi-inline-functions"},{"id":"prohibit-protected-constructor-calls-from-public-inline-functions","level":1,"title":"Prohibit protected constructor calls from public inline functions","anchor":"#prohibit-protected-constructor-calls-from-public-inline-functions"},{"id":"prohibit-exposing-private-nested-types-from-private-in-file-types","level":1,"title":"Prohibit exposing private nested types from private-in-file types","anchor":"#prohibit-exposing-private-nested-types-from-private-in-file-types"},{"id":"annotation-target-is-not-analyzed-in-several-cases-for-annotations-on-a-type","level":1,"title":"Annotation target is not analyzed in several cases for annotations on a type","anchor":"#annotation-target-is-not-analyzed-in-several-cases-for-annotations-on-a-type"},{"id":"prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda","level":1,"title":"Prohibit calls to functions named suspend with a trailing lambda","anchor":"#prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda"},{"id":"standard-library","level":0,"title":"Standard library","anchor":"#standard-library"},{"id":"remove-brittle-contains-optimization-in-minus-removeall-retainall","level":1,"title":"Remove brittle contains optimization in minus/removeAll/retainAll","anchor":"#remove-brittle-contains-optimization-in-minus-removeall-retainall"},{"id":"change-value-generation-algorithm-in-random-nextlong","level":1,"title":"Change value generation algorithm in Random.nextLong","anchor":"#change-value-generation-algorithm-in-random-nextlong"},{"id":"gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable","level":1,"title":"Gradually change the return type of collection min and max functions to non-nullable","anchor":"#gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable"},{"id":"deprecate-floating-point-array-functions-contains-indexof-lastindexof","level":1,"title":"Deprecate floating-point array functions: contains, indexOf, lastIndexOf","anchor":"#deprecate-floating-point-array-functions-contains-indexof-lastindexof"},{"id":"migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx","level":1,"title":"Migrate declarations from kotlin.dom and kotlin.browser packages to kotlinx.*","anchor":"#migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx"},{"id":"make-regex-replace-function-not-inline-in-kotlin-js","level":1,"title":"Make Regex.replace function not inline in Kotlin/JS","anchor":"#make-regex-replace-function-not-inline-in-kotlin-js"},{"id":"different-behavior-of-the-regex-replace-function-in-jvm-and-js-when-replacement-string-contains-group-reference","level":1,"title":"Different behavior of the Regex.replace function in JVM and JS when replacement string contains group reference","anchor":"#different-behavior-of-the-regex-replace-function-in-jvm-and-js-when-replacement-string-contains-group-reference"},{"id":"use-the-unicode-case-folding-in-js-regex","level":1,"title":"Use the Unicode case folding in JS Regex","anchor":"#use-the-unicode-case-folding-in-js-regex"},{"id":"deprecate-some-js-only-api","level":1,"title":"Deprecate some JS-only API","anchor":"#deprecate-some-js-only-api"},{"id":"hide-implementation-and-interop-specific-functions-from-the-public-api-of-classes-in-kotlin-js","level":1,"title":"Hide implementation- and interop-specific functions from the public API of classes in Kotlin/JS","anchor":"#hide-implementation-and-interop-specific-functions-from-the-public-api-of-classes-in-kotlin-js"},{"id":"tools","level":0,"title":"Tools","anchor":"#tools"},{"id":"deprecate-kotlingradlesubplugin-class","level":1,"title":"Deprecate KotlinGradleSubplugin class","anchor":"#deprecate-kotlingradlesubplugin-class"},{"id":"remove-kotlin-usefallbackcompilersearch-build-option","level":1,"title":"Remove kotlin.useFallbackCompilerSearch build option","anchor":"#remove-kotlin-usefallbackcompilersearch-build-option"},{"id":"remove-several-compiler-options","level":1,"title":"Remove several compiler options","anchor":"#remove-several-compiler-options"},{"id":"deprecate-useir-compiler-option","level":1,"title":"Deprecate useIR compiler option","anchor":"#deprecate-useir-compiler-option"},{"id":"deprecate-kapt-use-worker-api-gradle-property","level":1,"title":"Deprecate kapt.use.worker.api Gradle property","anchor":"#deprecate-kapt-use-worker-api-gradle-property"},{"id":"remove-kotlin-parallel-tasks-in-project-gradle-property","level":1,"title":"Remove kotlin.parallel.tasks.in.project Gradle property","anchor":"#remove-kotlin-parallel-tasks-in-project-gradle-property"},{"id":"deprecate-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property","level":1,"title":"Deprecate kotlin.experimental.coroutines Gradle DSL option and kotlin.coroutines Gradle property","anchor":"#deprecate-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Compatibility guide for Kotlin 1.6 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/compatibility-guide-16.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Compatibility guide for Kotlin 1.6 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/compatibility-guide-16.html#webpage",
    "url": "https://kotlinlang.org/docs/compatibility-guide-16.html",
    "name": "Compatibility guide for Kotlin 1.6 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="compatibility-guide-16" data-main-title="Compatibility guide for Kotlin 1.6" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Other resources///Kotlin compatibility guides" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/compatibility-guides/compatibility-guide-16.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compatibility-guide-16" id="compatibility-guide-16.md">Compatibility guide for Kotlin 1.6</h1><p id="-lipfb8_2"><span class="emphasis" id="-lipfb8_8"><a href="kotlin-evolution-principles.html" id="-lipfb8_10">Keeping the Language Modern</a></span> and <span class="emphasis" id="-lipfb8_9"><a href="kotlin-evolution-principles.html" id="-lipfb8_11">Comfortable Updates</a></span> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p><p id="-lipfb8_3">While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 1.5 to Kotlin 1.6.</p><section class="chapter"><h2 id="basic-terms" data-toc="basic-terms">Basic terms</h2><p id="-lipfb8_12">In this document we introduce several kinds of compatibility:</p><ul class="list _bullet" id="-lipfb8_13"><li class="list__item" id="-lipfb8_15"><p id="-lipfb8_18"><span class="emphasis" id="-lipfb8_19">source</span>: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</p></li><li class="list__item" id="-lipfb8_16"><p id="-lipfb8_20"><span class="emphasis" id="-lipfb8_21">binary</span>: two binary artifacts are said to be binary-compatible if interchanging them doesn't lead to loading or linkage errors</p></li><li class="list__item" id="-lipfb8_17"><p id="-lipfb8_22"><span class="emphasis" id="-lipfb8_23">behavioral</span>: a change is said to be behavioral-incompatible if the same program demonstrates different behavior before and after applying the change</p></li></ul><p id="-lipfb8_14">Remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (for example, from Java) is out of the scope of this document.</p></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><section class="chapter"><h3 id="make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default" data-toc="make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default">Make when statements with enum, sealed, and Boolean subjects exhaustive by default</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_38"><p id="-lipfb8_39"><span class="control" id="-lipfb8_45">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-47709" id="-lipfb8_46" data-external="true" rel="noopener noreferrer" target="_blank">KT-47709</a></p><p id="-lipfb8_40"><span class="control" id="-lipfb8_47">Component</span>: Core language</p><p id="-lipfb8_41"><span class="control" id="-lipfb8_48">Incompatible change type</span>: source</p><p id="-lipfb8_42"><span class="control" id="-lipfb8_49">Short summary</span>: Kotlin 1.6 will warn about the <code class="code" id="-lipfb8_50">when</code> statement with an enum, sealed, or Boolean subject being non-exhaustive</p><p id="-lipfb8_43"><span class="control" id="-lipfb8_51">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_44"><li class="list__item" id="-lipfb8_52"><p id="-lipfb8_54">1.6.0: introduce a warning when the <code class="code" id="-lipfb8_55">when</code> statement with an enum, sealed, or Boolean subject is non-exhaustive (error in the progressive mode)</p></li><li class="list__item" id="-lipfb8_53"><p id="-lipfb8_56">1.7.0: raise this warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-confusing-grammar-in-when-with-subject" data-toc="deprecate-confusing-grammar-in-when-with-subject">Deprecate confusing grammar in when-with-subject</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_57"><p id="-lipfb8_58"><span class="control" id="-lipfb8_64">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48385" id="-lipfb8_65" data-external="true" rel="noopener noreferrer" target="_blank">KT-48385</a></p><p id="-lipfb8_59"><span class="control" id="-lipfb8_66">Component</span>: Core language</p><p id="-lipfb8_60"><span class="control" id="-lipfb8_67">Incompatible change type</span>: source</p><p id="-lipfb8_61"><span class="control" id="-lipfb8_68">Short summary</span>: Kotlin 1.6 will deprecate several confusing grammar constructs in <code class="code" id="-lipfb8_69">when</code> condition expressions</p><p id="-lipfb8_62"><span class="control" id="-lipfb8_70">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_63"><li class="list__item" id="-lipfb8_71"><p id="-lipfb8_74">1.6.20: introduce a deprecation warning on the affected expressions</p></li><li class="list__item" id="-lipfb8_72"><p id="-lipfb8_75">1.8.0: raise this warning to an error</p></li><li class="list__item" id="-lipfb8_73"><p id="-lipfb8_76">&gt;= 1.8: repurpose some deprecated constructs for new language features</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-access-to-class-members-in-the-super-constructor-call-of-its-companion-and-nested-objects" data-toc="prohibit-access-to-class-members-in-the-super-constructor-call-of-its-companion-and-nested-objects">Prohibit access to class members in the super constructor call of its companion and nested objects</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_77"><p id="-lipfb8_78"><span class="control" id="-lipfb8_84">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-25289" id="-lipfb8_85" data-external="true" rel="noopener noreferrer" target="_blank">KT-25289</a></p><p id="-lipfb8_79"><span class="control" id="-lipfb8_86">Component</span>: Core language</p><p id="-lipfb8_80"><span class="control" id="-lipfb8_87">Incompatible change type</span>: source</p><p id="-lipfb8_81"><span class="control" id="-lipfb8_88">Short summary</span>: Kotlin 1.6 will report an error for arguments of super constructor call of companion and regular objects if the receiver of such arguments refers to the containing declaration</p><p id="-lipfb8_82"><span class="control" id="-lipfb8_89">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_83"><li class="list__item" id="-lipfb8_90"><p id="-lipfb8_92">1.5.20: introduce a warning on the problematic arguments</p></li><li class="list__item" id="-lipfb8_91"><p id="-lipfb8_93">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_94">-XXLanguage:-ProhibitSelfCallsInNestedObjects</code> can be used to temporarily revert to the pre-1.6 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="type-nullability-enhancement-improvements" data-toc="type-nullability-enhancement-improvements">Type nullability enhancement improvements</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_95"><p id="-lipfb8_96"><span class="control" id="-lipfb8_102">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48623" id="-lipfb8_103" data-external="true" rel="noopener noreferrer" target="_blank">KT-48623</a></p><p id="-lipfb8_97"><span class="control" id="-lipfb8_104">Component</span>: Kotlin/JVM</p><p id="-lipfb8_98"><span class="control" id="-lipfb8_105">Incompatible change type</span>: source</p><p id="-lipfb8_99"><span class="control" id="-lipfb8_106">Short summary</span>: Kotlin 1.7 will change how it loads and interprets type nullability annotations in Java code</p><p id="-lipfb8_100"><span class="control" id="-lipfb8_107">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_101"><li class="list__item" id="-lipfb8_108"><p id="-lipfb8_110">1.4.30: introduce warnings for cases where more precise type nullability could lead to an error</p></li><li class="list__item" id="-lipfb8_109"><p id="-lipfb8_111">1.7.0: infer more precise nullability of Java types, <code class="code" id="-lipfb8_112">-XXLanguage:-TypeEnhancementImprovementsInStrictMode</code> can be used to temporarily revert to the pre-1.7 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="prevent-implicit-coercions-between-different-numeric-types" data-toc="prevent-implicit-coercions-between-different-numeric-types">Prevent implicit coercions between different numeric types</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_113"><p id="-lipfb8_114"><span class="control" id="-lipfb8_120">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48645" id="-lipfb8_121" data-external="true" rel="noopener noreferrer" target="_blank">KT-48645</a></p><p id="-lipfb8_115"><span class="control" id="-lipfb8_122">Component</span>: Kotlin/JVM</p><p id="-lipfb8_116"><span class="control" id="-lipfb8_123">Incompatible change type</span>: behavioral</p><p id="-lipfb8_117"><span class="control" id="-lipfb8_124">Short summary</span>: Kotlin will avoid converting numeric values automatically to a primitive numeric type where only a downcast to that type was needed semantically</p><p id="-lipfb8_118"><span class="control" id="-lipfb8_125">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_119"><li class="list__item" id="-lipfb8_126"><p id="-lipfb8_129">&lt; 1.5.30: the old behavior in all affected cases</p></li><li class="list__item" id="-lipfb8_127"><p id="-lipfb8_130">1.5.30: fix the downcast behavior in generated property delegate accessors, <code class="code" id="-lipfb8_131">-Xuse-old-backend</code> can be used to temporarily revert to the pre-1.5.30 fix behavior</p></li><li class="list__item" id="-lipfb8_128"><p id="-lipfb8_132">&gt;= 1.6.20: fix the downcast behavior in other affected cases</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-declarations-of-repeatable-annotation-classes-whose-container-annotation-violates-jls" data-toc="prohibit-declarations-of-repeatable-annotation-classes-whose-container-annotation-violates-jls">Prohibit declarations of repeatable annotation classes whose container annotation violates JLS</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_133"><p id="-lipfb8_134"><span class="control" id="-lipfb8_140">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-47928" id="-lipfb8_141" data-external="true" rel="noopener noreferrer" target="_blank">KT-47928</a></p><p id="-lipfb8_135"><span class="control" id="-lipfb8_142">Component</span>: Kotlin/JVM</p><p id="-lipfb8_136"><span class="control" id="-lipfb8_143">Incompatible change type</span>: source</p><p id="-lipfb8_137"><span class="control" id="-lipfb8_144">Short summary</span>: Kotlin 1.6 will check that the container annotation of a repeatable annotation satisfies the same requirements as in <a href="https://docs.oracle.com/javase/specs/jls/se16/html/jls-9.html#jls-9.6.3" id="-lipfb8_145" data-external="true" rel="noopener noreferrer" target="_blank">JLS 9.6.3</a>: array-typed value method, retention, and target</p><p id="-lipfb8_138"><span class="control" id="-lipfb8_146">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_139"><li class="list__item" id="-lipfb8_147"><p id="-lipfb8_149">1.5.30: introduce a warning on repeatable container annotation declarations violating JLS requirements (error in the progressive mode)</p></li><li class="list__item" id="-lipfb8_148"><p id="-lipfb8_150">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_151">-XXLanguage:-RepeatableAnnotationContainerConstraints</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-declaring-a-nested-class-named-container-in-a-repeatable-annotation-class" data-toc="prohibit-declaring-a-nested-class-named-container-in-a-repeatable-annotation-class">Prohibit declaring a nested class named Container in a repeatable annotation class</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_152"><p id="-lipfb8_153"><span class="control" id="-lipfb8_159">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-47971" id="-lipfb8_160" data-external="true" rel="noopener noreferrer" target="_blank">KT-47971</a></p><p id="-lipfb8_154"><span class="control" id="-lipfb8_161">Component</span>: Kotlin/JVM</p><p id="-lipfb8_155"><span class="control" id="-lipfb8_162">Incompatible change type</span>: source</p><p id="-lipfb8_156"><span class="control" id="-lipfb8_163">Short summary</span>: Kotlin 1.6 will check that a repeatable annotation declared in Kotlin doesn't have a nested class with the predefined name <code class="code" id="-lipfb8_164">Container</code></p><p id="-lipfb8_157"><span class="control" id="-lipfb8_165">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_158"><li class="list__item" id="-lipfb8_166"><p id="-lipfb8_168">1.5.30: introduce a warning on nested classes with the name <code class="code" id="-lipfb8_169">Container</code> in a Kotlin-repeatable annotation class (error in the progressive mode)</p></li><li class="list__item" id="-lipfb8_167"><p id="-lipfb8_170">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_171">-XXLanguage:-RepeatableAnnotationContainerConstraints</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-jvmfield-on-a-property-in-the-primary-constructor-that-overrides-an-interface-property" data-toc="prohibit-jvmfield-on-a-property-in-the-primary-constructor-that-overrides-an-interface-property">Prohibit @JvmField on a property in the primary constructor that overrides an interface property</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_172"><p id="-lipfb8_173"><span class="control" id="-lipfb8_179">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-32753" id="-lipfb8_180" data-external="true" rel="noopener noreferrer" target="_blank">KT-32753</a></p><p id="-lipfb8_174"><span class="control" id="-lipfb8_181">Component</span>: Kotlin/JVM</p><p id="-lipfb8_175"><span class="control" id="-lipfb8_182">Incompatible change type</span>: source</p><p id="-lipfb8_176"><span class="control" id="-lipfb8_183">Short summary</span>: Kotlin 1.6 will outlaw annotating a property declared in the primary constructor that overrides an interface property with the <code class="code" id="-lipfb8_184">@JvmField</code> annotation</p><p id="-lipfb8_177"><span class="control" id="-lipfb8_185">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_178"><li class="list__item" id="-lipfb8_186"><p id="-lipfb8_188">1.5.20: introduce a warning on the <code class="code" id="-lipfb8_189">@JvmField</code> annotation on such properties in the primary constructor</p></li><li class="list__item" id="-lipfb8_187"><p id="-lipfb8_190">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_191">-XXLanguage:-ProhibitJvmFieldOnOverrideFromInterfaceInPrimaryConstructor</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default" data-toc="deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default">Deprecate the enable and the compatibility modes of the compiler option -Xjvm-default</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_192"><p id="-lipfb8_193"><span class="control" id="-lipfb8_199">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46329" id="-lipfb8_200" data-external="true" rel="noopener noreferrer" target="_blank">KT-46329</a></p><p id="-lipfb8_194"><span class="control" id="-lipfb8_201">Component</span>: Kotlin/JVM</p><p id="-lipfb8_195"><span class="control" id="-lipfb8_202">Incompatible change type</span>: source</p><p id="-lipfb8_196"><span class="control" id="-lipfb8_203">Short summary</span>: Kotlin 1.6.20 will warn about the usage of <code class="code" id="-lipfb8_204">enable</code> and <code class="code" id="-lipfb8_205">compatibility</code> modes of the <code class="code" id="-lipfb8_206">-Xjvm-default</code> compiler option</p><p id="-lipfb8_197"><span class="control" id="-lipfb8_207">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_198"><li class="list__item" id="-lipfb8_208"><p id="-lipfb8_210">1.6.20: introduce a warning on the <code class="code" id="-lipfb8_211">enable</code> and <code class="code" id="-lipfb8_212">compatibility</code> modes of the <code class="code" id="-lipfb8_213">-Xjvm-default</code> compiler option</p></li><li class="list__item" id="-lipfb8_209"><p id="-lipfb8_214">&gt;= 1.8.0: raise this warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-super-calls-from-public-abi-inline-functions" data-toc="prohibit-super-calls-from-public-abi-inline-functions">Prohibit super calls from public-abi inline functions</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_215"><p id="-lipfb8_216"><span class="control" id="-lipfb8_222">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-45379" id="-lipfb8_223" data-external="true" rel="noopener noreferrer" target="_blank">KT-45379</a></p><p id="-lipfb8_217"><span class="control" id="-lipfb8_224">Component</span>: Core language</p><p id="-lipfb8_218"><span class="control" id="-lipfb8_225">Incompatible change type</span>: source</p><p id="-lipfb8_219"><span class="control" id="-lipfb8_226">Short summary</span>: Kotlin 1.6 will outlaw calling functions with a <code class="code" id="-lipfb8_227">super</code> qualifier from public or protected inline functions and properties</p><p id="-lipfb8_220"><span class="control" id="-lipfb8_228">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_221"><li class="list__item" id="-lipfb8_229"><p id="-lipfb8_231">1.5.0: introduce a warning on super calls from public or protected inline functions or property accessors</p></li><li class="list__item" id="-lipfb8_230"><p id="-lipfb8_232">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_233">-XXLanguage:-ProhibitSuperCallsFromPublicInline</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-protected-constructor-calls-from-public-inline-functions" data-toc="prohibit-protected-constructor-calls-from-public-inline-functions">Prohibit protected constructor calls from public inline functions</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_234"><p id="-lipfb8_235"><span class="control" id="-lipfb8_241">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48860" id="-lipfb8_242" data-external="true" rel="noopener noreferrer" target="_blank">KT-48860</a></p><p id="-lipfb8_236"><span class="control" id="-lipfb8_243">Component</span>: Core language</p><p id="-lipfb8_237"><span class="control" id="-lipfb8_244">Incompatible change type</span>: source</p><p id="-lipfb8_238"><span class="control" id="-lipfb8_245">Short summary</span>: Kotlin 1.6 will outlaw calling protected constructors from public or protected inline functions and properties</p><p id="-lipfb8_239"><span class="control" id="-lipfb8_246">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_240"><li class="list__item" id="-lipfb8_247"><p id="-lipfb8_249">1.4.30: introduce a warning on protected constructor calls from public or protected inline functions or property accessors</p></li><li class="list__item" id="-lipfb8_248"><p id="-lipfb8_250">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_251">-XXLanguage:-ProhibitProtectedConstructorCallFromPublicInline</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-exposing-private-nested-types-from-private-in-file-types" data-toc="prohibit-exposing-private-nested-types-from-private-in-file-types">Prohibit exposing private nested types from private-in-file types</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_252"><p id="-lipfb8_253"><span class="control" id="-lipfb8_259">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-20094" id="-lipfb8_260" data-external="true" rel="noopener noreferrer" target="_blank">KT-20094</a></p><p id="-lipfb8_254"><span class="control" id="-lipfb8_261">Component</span>: Core language</p><p id="-lipfb8_255"><span class="control" id="-lipfb8_262">Incompatible change type</span>: source</p><p id="-lipfb8_256"><span class="control" id="-lipfb8_263">Short summary</span>: Kotlin 1.6 will outlaw exposing private nested types and inner classes from private-in-file types</p><p id="-lipfb8_257"><span class="control" id="-lipfb8_264">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_258"><li class="list__item" id="-lipfb8_265"><p id="-lipfb8_267">1.5.0: introduce a warning on private types exposed from private-in-file types</p></li><li class="list__item" id="-lipfb8_266"><p id="-lipfb8_268">1.6.0: raise this warning to an error, <code class="code" id="-lipfb8_269">-XXLanguage:-PrivateInFileEffectiveVisibility</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="annotation-target-is-not-analyzed-in-several-cases-for-annotations-on-a-type" data-toc="annotation-target-is-not-analyzed-in-several-cases-for-annotations-on-a-type">Annotation target is not analyzed in several cases for annotations on a type</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_270"><p id="-lipfb8_271"><span class="control" id="-lipfb8_277">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-28449" id="-lipfb8_278" data-external="true" rel="noopener noreferrer" target="_blank">KT-28449</a></p><p id="-lipfb8_272"><span class="control" id="-lipfb8_279">Component</span>: Core language</p><p id="-lipfb8_273"><span class="control" id="-lipfb8_280">Incompatible change type</span>: source</p><p id="-lipfb8_274"><span class="control" id="-lipfb8_281">Short summary</span>: Kotlin 1.6 will no longer allow annotations on types that should not be applicable to types</p><p id="-lipfb8_275"><span class="control" id="-lipfb8_282">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_276"><li class="list__item" id="-lipfb8_283"><p id="-lipfb8_285">1.5.20: introduce an error in the progressive mode</p></li><li class="list__item" id="-lipfb8_284"><p id="-lipfb8_286">1.6.0: introduce an error, <code class="code" id="-lipfb8_287">-XXLanguage:-ProperCheckAnnotationsTargetInTypeUsePositions</code> can be used to temporarily disable the error reporting</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda" data-toc="prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda">Prohibit calls to functions named suspend with a trailing lambda</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_288"><p id="-lipfb8_289"><span class="control" id="-lipfb8_295">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-22562" id="-lipfb8_296" data-external="true" rel="noopener noreferrer" target="_blank">KT-22562</a></p><p id="-lipfb8_290"><span class="control" id="-lipfb8_297">Component</span>: Core language</p><p id="-lipfb8_291"><span class="control" id="-lipfb8_298">Incompatible change type</span>: source</p><p id="-lipfb8_292"><span class="control" id="-lipfb8_299">Short summary</span>: Kotlin 1.6 will no longer allow calling functions named <code class="code" id="-lipfb8_300">suspend</code> that have the single argument of a functional type passed as a trailing lambda</p><p id="-lipfb8_293"><span class="control" id="-lipfb8_301">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_294"><li class="list__item" id="-lipfb8_302"><p id="-lipfb8_305">1.3.0: introduce a warning on such function calls</p></li><li class="list__item" id="-lipfb8_303"><p id="-lipfb8_306">1.6.0: raise this warning to an error</p></li><li class="list__item" id="-lipfb8_304"><p id="-lipfb8_307">&gt;= 1.7.0: introduce changes to the language grammar, so that <code class="code" id="-lipfb8_308">suspend</code> before <code class="code" id="-lipfb8_309">{</code> is parsed as a keyword</p></li></ul></aside></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2><section class="chapter"><h3 id="remove-brittle-contains-optimization-in-minus-removeall-retainall" data-toc="remove-brittle-contains-optimization-in-minus-removeall-retainall">Remove brittle contains optimization in minus/removeAll/retainAll</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_320"><p id="-lipfb8_321"><span class="control" id="-lipfb8_327">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-45438" id="-lipfb8_328" data-external="true" rel="noopener noreferrer" target="_blank">KT-45438</a></p><p id="-lipfb8_322"><span class="control" id="-lipfb8_329">Component</span>: kotlin-stdlib</p><p id="-lipfb8_323"><span class="control" id="-lipfb8_330">Incompatible change type</span>: behavioral</p><p id="-lipfb8_324"><span class="control" id="-lipfb8_331">Short summary</span>: Kotlin 1.6 will no longer perform conversion to set for the argument of functions and operators that remove several elements from collection/iterable/array/sequence.</p><p id="-lipfb8_325"><span class="control" id="-lipfb8_332">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_326"><li class="list__item" id="-lipfb8_333"><p id="-lipfb8_336">&lt; 1.6: the old behavior: the argument is converted to set in some cases</p></li><li class="list__item" id="-lipfb8_334"><p id="-lipfb8_337">1.6.0: if the function argument is a collection, it's no longer converted to <code class="code" id="-lipfb8_338">Set</code>. If it's not a collection, it can be converted to <code class="code" id="-lipfb8_339">List</code> instead. <br> The old behavior can be temporarily turned back on JVM by setting the system property <code class="code" id="-lipfb8_341">kotlin.collections.convert_arg_to_set_in_removeAll=true</code></p></li><li class="list__item" id="-lipfb8_335"><p id="-lipfb8_342">&gt;= 1.7: the system property above will no longer have an effect</p></li></ul></aside></section><section class="chapter"><h3 id="change-value-generation-algorithm-in-random-nextlong" data-toc="change-value-generation-algorithm-in-random-nextlong">Change value generation algorithm in Random.nextLong</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_343"><p id="-lipfb8_344"><span class="control" id="-lipfb8_350">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-47304" id="-lipfb8_351" data-external="true" rel="noopener noreferrer" target="_blank">KT-47304</a></p><p id="-lipfb8_345"><span class="control" id="-lipfb8_352">Component</span>: kotlin-stdlib</p><p id="-lipfb8_346"><span class="control" id="-lipfb8_353">Incompatible change type</span>: behavioral</p><p id="-lipfb8_347"><span class="control" id="-lipfb8_354">Short summary</span>: Kotlin 1.6 changes the value generation algorithm in the <code class="code" id="-lipfb8_355">Random.nextLong</code> function to avoid producing values out of the specified range.</p><p id="-lipfb8_348"><span class="control" id="-lipfb8_356">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_349"><li class="list__item" id="-lipfb8_357"><p id="-lipfb8_358">1.6.0: the behavior is fixed immediately</p></li></ul></aside></section><section class="chapter"><h3 id="gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable" data-toc="gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable">Gradually change the return type of collection min and max functions to non-nullable</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_359"><p id="-lipfb8_360"><span class="control" id="-lipfb8_366">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-38854" id="-lipfb8_367" data-external="true" rel="noopener noreferrer" target="_blank">KT-38854</a></p><p id="-lipfb8_361"><span class="control" id="-lipfb8_368">Component</span>: kotlin-stdlib</p><p id="-lipfb8_362"><span class="control" id="-lipfb8_369">Incompatible change type</span>: source</p><p id="-lipfb8_363"><span class="control" id="-lipfb8_370">Short summary</span>: the return type of collection <code class="code" id="-lipfb8_371">min</code> and <code class="code" id="-lipfb8_372">max</code> functions will be changed to non-nullable in Kotlin 1.7</p><p id="-lipfb8_364"><span class="control" id="-lipfb8_373">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_365"><li class="list__item" id="-lipfb8_374"><p id="-lipfb8_378">1.4.0: introduce <code class="code" id="-lipfb8_379">...OrNull</code> functions as synonyms and deprecate the affected API (see details in the issue)</p></li><li class="list__item" id="-lipfb8_375"><p id="-lipfb8_380">1.5.0: raise the deprecation level of the affected API to an error</p></li><li class="list__item" id="-lipfb8_376"><p id="-lipfb8_381">1.6.0: hide the deprecated functions from the public API</p></li><li class="list__item" id="-lipfb8_377"><p id="-lipfb8_382">&gt;= 1.7: reintroduce the affected API but with non-nullable return type</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-floating-point-array-functions-contains-indexof-lastindexof" data-toc="deprecate-floating-point-array-functions-contains-indexof-lastindexof">Deprecate floating-point array functions: contains, indexOf, lastIndexOf</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_383"><p id="-lipfb8_384"><span class="control" id="-lipfb8_390">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-28753" id="-lipfb8_391" data-external="true" rel="noopener noreferrer" target="_blank">KT-28753</a></p><p id="-lipfb8_385"><span class="control" id="-lipfb8_392">Component</span>: kotlin-stdlib</p><p id="-lipfb8_386"><span class="control" id="-lipfb8_393">Incompatible change type</span>: source</p><p id="-lipfb8_387"><span class="control" id="-lipfb8_394">Short summary</span>: Kotlin deprecates floating-point array functions <code class="code" id="-lipfb8_395">contains</code>, <code class="code" id="-lipfb8_396">indexOf</code>, <code class="code" id="-lipfb8_397">lastIndexOf</code> that compare values using the IEEE-754 order instead of the total order</p><p id="-lipfb8_388"><span class="control" id="-lipfb8_398">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_389"><li class="list__item" id="-lipfb8_399"><p id="-lipfb8_402">1.4.0: deprecate the affected functions with a warning</p></li><li class="list__item" id="-lipfb8_400"><p id="-lipfb8_403">1.6.0: raise the deprecation level to an error</p></li><li class="list__item" id="-lipfb8_401"><p id="-lipfb8_404">&gt;= 1.7: hide the deprecated functions from the public API</p></li></ul></aside></section><section class="chapter"><h3 id="migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx" data-toc="migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx">Migrate declarations from kotlin.dom and kotlin.browser packages to kotlinx.*</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_405"><p id="-lipfb8_406"><span class="control" id="-lipfb8_412">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-39330" id="-lipfb8_413" data-external="true" rel="noopener noreferrer" target="_blank">KT-39330</a></p><p id="-lipfb8_407"><span class="control" id="-lipfb8_414">Component</span>: kotlin-stdlib (JS)</p><p id="-lipfb8_408"><span class="control" id="-lipfb8_415">Incompatible change type</span>: source</p><p id="-lipfb8_409"><span class="control" id="-lipfb8_416">Short summary</span>: declarations from the <code class="code" id="-lipfb8_417">kotlin.dom</code> and <code class="code" id="-lipfb8_418">kotlin.browser</code> packages are moved to the corresponding <code class="code" id="-lipfb8_419">kotlinx.*</code> packages to prepare for extracting them from stdlib</p><p id="-lipfb8_410"><span class="control" id="-lipfb8_420">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_411"><li class="list__item" id="-lipfb8_421"><p id="-lipfb8_426">1.4.0: introduce the replacement API in <code class="code" id="-lipfb8_427">kotlinx.dom</code> and <code class="code" id="-lipfb8_428">kotlinx.browser</code> packages</p></li><li class="list__item" id="-lipfb8_422"><p id="-lipfb8_429">1.4.0: deprecate the API in <code class="code" id="-lipfb8_430">kotlin.dom</code> and <code class="code" id="-lipfb8_431">kotlin.browser</code> packages and propose the new API above as a replacement</p></li><li class="list__item" id="-lipfb8_423"><p id="-lipfb8_432">1.6.0: raise the deprecation level to an error</p></li><li class="list__item" id="-lipfb8_424"><p id="-lipfb8_433">&gt;= 1.7: remove the deprecated functions from stdlib</p></li><li class="list__item" id="-lipfb8_425"><p id="-lipfb8_434">&gt;= 1.7: move the API in kotlinx.* packages to a separate library</p></li></ul></aside></section><section class="chapter"><h3 id="make-regex-replace-function-not-inline-in-kotlin-js" data-toc="make-regex-replace-function-not-inline-in-kotlin-js">Make Regex.replace function not inline in Kotlin/JS</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_435"><p id="-lipfb8_436"><span class="control" id="-lipfb8_442">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-27738" id="-lipfb8_443" data-external="true" rel="noopener noreferrer" target="_blank">KT-27738</a></p><p id="-lipfb8_437"><span class="control" id="-lipfb8_444">Component</span>: kotlin-stdlib (JS)</p><p id="-lipfb8_438"><span class="control" id="-lipfb8_445">Incompatible change type</span>: source</p><p id="-lipfb8_439"><span class="control" id="-lipfb8_446">Short summary</span>: the <code class="code" id="-lipfb8_447">Regex.replace</code> function with the functional <code class="code" id="-lipfb8_448">transform</code> parameter will no longer be inline in Kotlin/JS</p><p id="-lipfb8_440"><span class="control" id="-lipfb8_449">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_441"><li class="list__item" id="-lipfb8_450"><p id="-lipfb8_451">1.6.0: remove the <code class="code" id="-lipfb8_452">inline</code> modifier from the affected function</p></li></ul></aside></section><section class="chapter"><h3 id="different-behavior-of-the-regex-replace-function-in-jvm-and-js-when-replacement-string-contains-group-reference" data-toc="different-behavior-of-the-regex-replace-function-in-jvm-and-js-when-replacement-string-contains-group-reference">Different behavior of the Regex.replace function in JVM and JS when replacement string contains group reference</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_453"><p id="-lipfb8_454"><span class="control" id="-lipfb8_460">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-28378" id="-lipfb8_461" data-external="true" rel="noopener noreferrer" target="_blank">KT-28378</a></p><p id="-lipfb8_455"><span class="control" id="-lipfb8_462">Component</span>: kotlin-stdlib (JS)</p><p id="-lipfb8_456"><span class="control" id="-lipfb8_463">Incompatible change type</span>: behavioral</p><p id="-lipfb8_457"><span class="control" id="-lipfb8_464">Short summary</span>: the function <code class="code" id="-lipfb8_465">Regex.replace</code> in Kotlin/JS with the replacement pattern string will follow the same syntax of that pattern as in Kotlin/JVM</p><p id="-lipfb8_458"><span class="control" id="-lipfb8_466">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_459"><li class="list__item" id="-lipfb8_467"><p id="-lipfb8_468">1.6.0: change the replacement pattern handling in <code class="code" id="-lipfb8_469">Regex.replace</code> of the Kotlin/JS stdlib</p></li></ul></aside></section><section class="chapter"><h3 id="use-the-unicode-case-folding-in-js-regex" data-toc="use-the-unicode-case-folding-in-js-regex">Use the Unicode case folding in JS Regex</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_470"><p id="-lipfb8_471"><span class="control" id="-lipfb8_477">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-45928" id="-lipfb8_478" data-external="true" rel="noopener noreferrer" target="_blank">KT-45928</a></p><p id="-lipfb8_472"><span class="control" id="-lipfb8_479">Component</span>: kotlin-stdlib (JS)</p><p id="-lipfb8_473"><span class="control" id="-lipfb8_480">Incompatible change type</span>: behavioral</p><p id="-lipfb8_474"><span class="control" id="-lipfb8_481">Short summary</span>: the <code class="code" id="-lipfb8_482">Regex</code> class in Kotlin/JS will use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode" id="-lipfb8_483" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-lipfb8_484">unicode</code></a> flag when calling the underlying JS Regular expressions engine to search and compare characters according to the Unicode rules. This brings certain version requirements of the JS environment and causes more strict validation of unnecessary escaping in the regex pattern string.</p><p id="-lipfb8_475"><span class="control" id="-lipfb8_485">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_476"><li class="list__item" id="-lipfb8_486"><p id="-lipfb8_488">1.5.0: enable the Unicode case folding in most functions of the JS <code class="code" id="-lipfb8_489">Regex</code> class</p></li><li class="list__item" id="-lipfb8_487"><p id="-lipfb8_490">1.6.0: enable the Unicode case folding in the <code class="code" id="-lipfb8_491">Regex.replaceFirst</code> function</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-some-js-only-api" data-toc="deprecate-some-js-only-api">Deprecate some JS-only API</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_492"><p id="-lipfb8_493"><span class="control" id="-lipfb8_499">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48587" id="-lipfb8_500" data-external="true" rel="noopener noreferrer" target="_blank">KT-48587</a></p><p id="-lipfb8_494"><span class="control" id="-lipfb8_501">Component</span>: kotlin-stdlib (JS)</p><p id="-lipfb8_495"><span class="control" id="-lipfb8_502">Incompatible change type</span>: source</p><p id="-lipfb8_496"><span class="control" id="-lipfb8_503">Short summary</span>: a number of JS-only functions in stdlib are deprecated for removal. They include: <code class="code" id="-lipfb8_504">String.concat(String)</code>, <code class="code" id="-lipfb8_505">String.match(regex: String)</code>, <code class="code" id="-lipfb8_506">String.matches(regex: String)</code>, and the <code class="code" id="-lipfb8_507">sort</code> functions on arrays taking a comparison function, for example, <code class="code" id="-lipfb8_508">Array&lt;out T&gt;.sort(comparison: (a: T, b: T) -&gt; Int)</code></p><p id="-lipfb8_497"><span class="control" id="-lipfb8_509">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_498"><li class="list__item" id="-lipfb8_510"><p id="-lipfb8_513">1.6.0: deprecate the affected functions with a warning</p></li><li class="list__item" id="-lipfb8_511"><p id="-lipfb8_514">1.7.0: raise the deprecation level to an error</p></li><li class="list__item" id="-lipfb8_512"><p id="-lipfb8_515">1.8.0: remove the deprecated functions from the public API</p></li></ul></aside></section><section class="chapter"><h3 id="hide-implementation-and-interop-specific-functions-from-the-public-api-of-classes-in-kotlin-js" data-toc="hide-implementation-and-interop-specific-functions-from-the-public-api-of-classes-in-kotlin-js">Hide implementation- and interop-specific functions from the public API of classes in Kotlin/JS</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_516"><p id="-lipfb8_517"><span class="control" id="-lipfb8_523">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48587" id="-lipfb8_524" data-external="true" rel="noopener noreferrer" target="_blank">KT-48587</a></p><p id="-lipfb8_518"><span class="control" id="-lipfb8_525">Component</span>: kotlin-stdlib (JS)</p><p id="-lipfb8_519"><span class="control" id="-lipfb8_526">Incompatible change type</span>: source, binary</p><p id="-lipfb8_520"><span class="control" id="-lipfb8_527">Short summary</span>: the functions <code class="code" id="-lipfb8_528">HashMap.createEntrySet</code> and <code class="code" id="-lipfb8_529">AbstactMutableCollection.toJSON</code> change their visibility to internal</p><p id="-lipfb8_521"><span class="control" id="-lipfb8_530">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_522"><li class="list__item" id="-lipfb8_531"><p id="-lipfb8_532">1.6.0: make the functions internal, thus removing them from the public API</p></li></ul></aside></section></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2><section class="chapter"><h3 id="deprecate-kotlingradlesubplugin-class" data-toc="deprecate-kotlingradlesubplugin-class">Deprecate KotlinGradleSubplugin class</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_540"><p id="-lipfb8_541"><span class="control" id="-lipfb8_547">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48830" id="-lipfb8_548" data-external="true" rel="noopener noreferrer" target="_blank">KT-48830</a></p><p id="-lipfb8_542"><span class="control" id="-lipfb8_549">Component</span>: Gradle</p><p id="-lipfb8_543"><span class="control" id="-lipfb8_550">Incompatible change type</span>: source</p><p id="-lipfb8_544"><span class="control" id="-lipfb8_551">Short summary</span>: the class <code class="code" id="-lipfb8_552">KotlinGradleSubplugin</code> will be deprecated in favor of <code class="code" id="-lipfb8_553">KotlinCompilerPluginSupportPlugin</code></p><p id="-lipfb8_545"><span class="control" id="-lipfb8_554">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_546"><li class="list__item" id="-lipfb8_555"><p id="-lipfb8_557">1.6.0: raise the deprecation level to an error</p></li><li class="list__item" id="-lipfb8_556"><p id="-lipfb8_558">&gt;= 1.7.0: remove the deprecated class</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin-usefallbackcompilersearch-build-option" data-toc="remove-kotlin-usefallbackcompilersearch-build-option">Remove kotlin.useFallbackCompilerSearch build option</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_559"><p id="-lipfb8_560"><span class="control" id="-lipfb8_566">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46719" id="-lipfb8_567" data-external="true" rel="noopener noreferrer" target="_blank">KT-46719</a></p><p id="-lipfb8_561"><span class="control" id="-lipfb8_568">Component</span>: Gradle</p><p id="-lipfb8_562"><span class="control" id="-lipfb8_569">Incompatible change type</span>: source</p><p id="-lipfb8_563"><span class="control" id="-lipfb8_570">Short summary</span>: remove the deprecated 'kotlin.useFallbackCompilerSearch' build option</p><p id="-lipfb8_564"><span class="control" id="-lipfb8_571">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_565"><li class="list__item" id="-lipfb8_572"><p id="-lipfb8_574">1.5.0: raise the deprecation level to a warning</p></li><li class="list__item" id="-lipfb8_573"><p id="-lipfb8_575">1.6.0: remove the deprecated option</p></li></ul></aside></section><section class="chapter"><h3 id="remove-several-compiler-options" data-toc="remove-several-compiler-options">Remove several compiler options</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_576"><p id="-lipfb8_577"><span class="control" id="-lipfb8_583">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48847" id="-lipfb8_584" data-external="true" rel="noopener noreferrer" target="_blank">KT-48847</a></p><p id="-lipfb8_578"><span class="control" id="-lipfb8_585">Component</span>: Gradle</p><p id="-lipfb8_579"><span class="control" id="-lipfb8_586">Incompatible change type</span>: source</p><p id="-lipfb8_580"><span class="control" id="-lipfb8_587">Short summary</span>: remove the deprecated <code class="code" id="-lipfb8_588">noReflect</code> and <code class="code" id="-lipfb8_589">includeRuntime</code> compiler options</p><p id="-lipfb8_581"><span class="control" id="-lipfb8_590">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_582"><li class="list__item" id="-lipfb8_591"><p id="-lipfb8_593">1.5.0: raise the deprecation level to an error</p></li><li class="list__item" id="-lipfb8_592"><p id="-lipfb8_594">1.6.0: remove the deprecated options</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-useir-compiler-option" data-toc="deprecate-useir-compiler-option">Deprecate useIR compiler option</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_595"><p id="-lipfb8_596"><span class="control" id="-lipfb8_602">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48847" id="-lipfb8_603" data-external="true" rel="noopener noreferrer" target="_blank">KT-48847</a></p><p id="-lipfb8_597"><span class="control" id="-lipfb8_604">Component</span>: Gradle</p><p id="-lipfb8_598"><span class="control" id="-lipfb8_605">Incompatible change type</span>: source</p><p id="-lipfb8_599"><span class="control" id="-lipfb8_606">Short summary</span>: hide the deprecated <code class="code" id="-lipfb8_607">useIR</code> compiler option</p><p id="-lipfb8_600"><span class="control" id="-lipfb8_608">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_601"><li class="list__item" id="-lipfb8_609"><p id="-lipfb8_612">1.5.0: raise the deprecation level to a warning</p></li><li class="list__item" id="-lipfb8_610"><p id="-lipfb8_613">1.6.0: hide the option</p></li><li class="list__item" id="-lipfb8_611"><p id="-lipfb8_614">&gt;= 1.7.0: remove the deprecated option</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kapt-use-worker-api-gradle-property" data-toc="deprecate-kapt-use-worker-api-gradle-property">Deprecate kapt.use.worker.api Gradle property</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_615"><p id="-lipfb8_616"><span class="control" id="-lipfb8_622">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48826" id="-lipfb8_623" data-external="true" rel="noopener noreferrer" target="_blank">KT-48826</a></p><p id="-lipfb8_617"><span class="control" id="-lipfb8_624">Component</span>: Gradle</p><p id="-lipfb8_618"><span class="control" id="-lipfb8_625">Incompatible change type</span>: source</p><p id="-lipfb8_619"><span class="control" id="-lipfb8_626">Short summary</span>: deprecate the <code class="code" id="-lipfb8_627">kapt.use.worker.api</code> property that allowed to run kapt via Gradle Workers API (default: true)</p><p id="-lipfb8_620"><span class="control" id="-lipfb8_628">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_621"><li class="list__item" id="-lipfb8_629"><p id="-lipfb8_631">1.6.20: raise the deprecation level to a warning</p></li><li class="list__item" id="-lipfb8_630"><p id="-lipfb8_632">&gt;= 1.8.0: remove this property</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin-parallel-tasks-in-project-gradle-property" data-toc="remove-kotlin-parallel-tasks-in-project-gradle-property">Remove kotlin.parallel.tasks.in.project Gradle property</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_633"><p id="-lipfb8_634"><span class="control" id="-lipfb8_640">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46406" id="-lipfb8_641" data-external="true" rel="noopener noreferrer" target="_blank">KT-46406</a></p><p id="-lipfb8_635"><span class="control" id="-lipfb8_642">Component</span>: Gradle</p><p id="-lipfb8_636"><span class="control" id="-lipfb8_643">Incompatible change type</span>: source</p><p id="-lipfb8_637"><span class="control" id="-lipfb8_644">Short summary</span>: remove the <code class="code" id="-lipfb8_645">kotlin.parallel.tasks.in.project</code> property</p><p id="-lipfb8_638"><span class="control" id="-lipfb8_646">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_639"><li class="list__item" id="-lipfb8_647"><p id="-lipfb8_649">1.5.20: raise the deprecation level to a warning</p></li><li class="list__item" id="-lipfb8_648"><p id="-lipfb8_650">1.6.20: remove this property</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property" data-toc="deprecate-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property">Deprecate kotlin.experimental.coroutines Gradle DSL option and kotlin.coroutines Gradle property</h3><aside class="prompt" data-type="tip" data-title="" id="-lipfb8_651"><p id="-lipfb8_652"><span class="control" id="-lipfb8_658">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-50369" id="-lipfb8_659" data-external="true" rel="noopener noreferrer" target="_blank">KT-50369</a></p><p id="-lipfb8_653"><span class="control" id="-lipfb8_660">Component</span>: Gradle</p><p id="-lipfb8_654"><span class="control" id="-lipfb8_661">Incompatible change type</span>: source</p><p id="-lipfb8_655"><span class="control" id="-lipfb8_662">Short summary</span>: deprecate the <code class="code" id="-lipfb8_663">kotlin.experimental.coroutines</code> Gradle DSL option and the <code class="code" id="-lipfb8_664">kotlin.coroutines</code> property</p><p id="-lipfb8_656"><span class="control" id="-lipfb8_665">Deprecation cycle</span>:</p><ul class="list _bullet" id="-lipfb8_657"><li class="list__item" id="-lipfb8_666"><p id="-lipfb8_668">1.6.20: raise the deprecation level to a warning</p></li><li class="list__item" id="-lipfb8_667"><p id="-lipfb8_669">&gt;= 1.7.0: remove the DSL option and the property</p></li></ul></aside></section></section><div class="last-modified">16 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compatibility-guide-17.html" class="navigation-links__prev">Compatibility guide for Kotlin 1.7</a><a href="compatibility-guide-15.html" class="navigation-links__next">Compatibility guide for Kotlin 1.5</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>