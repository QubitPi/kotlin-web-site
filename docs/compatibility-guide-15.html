<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-28T16:03:11.324556017"><link rel="canonical" href="https://kotlinlang.org/docs/compatibility-guide-15.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Compatibility guide for Kotlin 1.5 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"basic-terms","level":0,"title":"Basic terms","anchor":"#basic-terms"},{"id":"language-and-stdlib","level":0,"title":"Language and stdlib","anchor":"#language-and-stdlib"},{"id":"forbid-spread-operator-in-signature-polymorphic-calls","level":1,"title":"Forbid spread operator in signature-polymorphic calls","anchor":"#forbid-spread-operator-in-signature-polymorphic-calls"},{"id":"forbid-non-abstract-classes-containing-abstract-members-invisible-from-that-classes-internal-package-private","level":1,"title":"Forbid non-abstract classes containing abstract members invisible from that classes (internal/package-private)","anchor":"#forbid-non-abstract-classes-containing-abstract-members-invisible-from-that-classes-internal-package-private"},{"id":"forbid-using-array-based-on-non-reified-type-parameters-as-reified-type-arguments-on-jvm","level":1,"title":"Forbid using array based on non-reified type parameters as reified type arguments on JVM","anchor":"#forbid-using-array-based-on-non-reified-type-parameters-as-reified-type-arguments-on-jvm"},{"id":"forbid-secondary-enum-class-constructors-which-do-not-delegate-to-the-primary-constructor","level":1,"title":"Forbid secondary enum class constructors which do not delegate to the primary constructor","anchor":"#forbid-secondary-enum-class-constructors-which-do-not-delegate-to-the-primary-constructor"},{"id":"forbid-exposing-anonymous-types-from-private-inline-functions","level":1,"title":"Forbid exposing anonymous types from private inline functions","anchor":"#forbid-exposing-anonymous-types-from-private-inline-functions"},{"id":"forbid-passing-non-spread-arrays-after-arguments-with-sam-conversion","level":1,"title":"Forbid passing non-spread arrays after arguments with SAM-conversion","anchor":"#forbid-passing-non-spread-arrays-after-arguments-with-sam-conversion"},{"id":"support-special-semantics-for-underscore-named-catch-block-parameters","level":1,"title":"Support special semantics for underscore-named catch block parameters","anchor":"#support-special-semantics-for-underscore-named-catch-block-parameters"},{"id":"change-implementation-strategy-of-sam-conversion-from-anonymous-class-based-to-invokedynamic","level":1,"title":"Change implementation strategy of SAM conversion from anonymous class-based to invokedynamic","anchor":"#change-implementation-strategy-of-sam-conversion-from-anonymous-class-based-to-invokedynamic"},{"id":"performance-issues-with-the-jvm-ir-based-backend","level":1,"title":"Performance issues with the JVM IR-based backend","anchor":"#performance-issues-with-the-jvm-ir-based-backend"},{"id":"new-field-sorting-in-the-jvm-ir-based-backend","level":1,"title":"New field sorting in the JVM IR-based backend","anchor":"#new-field-sorting-in-the-jvm-ir-based-backend"},{"id":"generate-nullability-assertion-for-delegated-properties-with-a-generic-call-in-the-delegate-expression","level":1,"title":"Generate nullability assertion for delegated properties with a generic call in the delegate expression","anchor":"#generate-nullability-assertion-for-delegated-properties-with-a-generic-call-in-the-delegate-expression"},{"id":"turn-warnings-into-errors-for-calls-with-type-parameters-annotated-by-onlyinputtypes","level":1,"title":"Turn warnings into errors for calls with type parameters annotated by @OnlyInputTypes","anchor":"#turn-warnings-into-errors-for-calls-with-type-parameters-annotated-by-onlyinputtypes"},{"id":"use-the-correct-order-of-arguments-execution-in-calls-with-named-vararg","level":1,"title":"Use the correct order of arguments execution in calls with named vararg","anchor":"#use-the-correct-order-of-arguments-execution-in-calls-with-named-vararg"},{"id":"use-default-value-of-the-parameter-in-operator-functional-calls","level":1,"title":"Use default value of the parameter in operator functional calls","anchor":"#use-default-value-of-the-parameter-in-operator-functional-calls"},{"id":"produce-empty-reversed-progressions-in-for-loops-if-regular-progression-is-also-empty","level":1,"title":"Produce empty reversed progressions in for loops if regular progression is also empty","anchor":"#produce-empty-reversed-progressions-in-for-loops-if-regular-progression-is-also-empty"},{"id":"straighten-char-to-code-and-char-to-digit-conversions-out","level":1,"title":"Straighten Char-to-code and Char-to-digit conversions out","anchor":"#straighten-char-to-code-and-char-to-digit-conversions-out"},{"id":"inconsistent-case-insensitive-comparison-of-characters-in-kotlin-text-functions","level":1,"title":"Inconsistent case-insensitive comparison of characters in kotlin.text functions","anchor":"#inconsistent-case-insensitive-comparison-of-characters-in-kotlin-text-functions"},{"id":"remove-default-locale-sensitive-case-conversion-api","level":1,"title":"Remove default locale-sensitive case conversion API","anchor":"#remove-default-locale-sensitive-case-conversion-api"},{"id":"gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable","level":1,"title":"Gradually change the return type of collection min and max functions to non-nullable","anchor":"#gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable"},{"id":"raise-the-deprecation-level-of-conversions-of-floating-point-types-to-short-and-byte","level":1,"title":"Raise the deprecation level of conversions of floating-point types to Short and Byte","anchor":"#raise-the-deprecation-level-of-conversions-of-floating-point-types-to-short-and-byte"},{"id":"tools","level":0,"title":"Tools","anchor":"#tools"},{"id":"do-not-mix-several-jvm-variants-of-kotlin-test-in-a-single-project","level":1,"title":"Do not mix several JVM variants of kotlin-test in a single project","anchor":"#do-not-mix-several-jvm-variants-of-kotlin-test-in-a-single-project"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Compatibility guide for Kotlin 1.5 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/compatibility-guide-15.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Compatibility guide for Kotlin 1.5 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/compatibility-guide-15.html#webpage",
    "url": "https://kotlinlang.org/docs/compatibility-guide-15.html",
    "name": "Compatibility guide for Kotlin 1.5 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="compatibility-guide-15" data-main-title="Compatibility guide for Kotlin 1.5" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Other resources///Kotlin compatibility guides" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/compatibility-guides/compatibility-guide-15.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compatibility-guide-15" id="compatibility-guide-15.md">Compatibility guide for Kotlin 1.5</h1><p id="-drz3qn_2"><span class="emphasis" id="-drz3qn_7"><a href="kotlin-evolution-principles.html" id="-drz3qn_9">Keeping the Language Modern</a></span> and <span class="emphasis" id="-drz3qn_8"><a href="kotlin-evolution-principles.html" id="-drz3qn_10">Comfortable Updates</a></span> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p><p id="-drz3qn_3">While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 1.4 to Kotlin 1.5.</p><section class="chapter"><h2 id="basic-terms" data-toc="basic-terms">Basic terms</h2><p id="-drz3qn_11">In this document we introduce several kinds of compatibility:</p><ul class="list _bullet" id="-drz3qn_12"><li class="list__item" id="-drz3qn_14"><p id="-drz3qn_17"><span class="emphasis" id="-drz3qn_18">source</span>: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</p></li><li class="list__item" id="-drz3qn_15"><p id="-drz3qn_19"><span class="emphasis" id="-drz3qn_20">binary</span>: two binary artifacts are said to be binary-compatible if interchanging them doesn't lead to loading or linkage errors</p></li><li class="list__item" id="-drz3qn_16"><p id="-drz3qn_21"><span class="emphasis" id="-drz3qn_22">behavioral</span>: a change is said to be behavioral-incompatible if the same program demonstrates different behavior before and after applying the change</p></li></ul><p id="-drz3qn_13">Remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (for example, from Java) is out of the scope of this document.</p></section><section class="chapter"><h2 id="language-and-stdlib" data-toc="language-and-stdlib">Language and stdlib</h2><section class="chapter"><h3 id="forbid-spread-operator-in-signature-polymorphic-calls" data-toc="forbid-spread-operator-in-signature-polymorphic-calls">Forbid spread operator in signature-polymorphic calls</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_43"><p id="-drz3qn_44"><span class="control" id="-drz3qn_50">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-35226" id="-drz3qn_51" data-external="true" rel="noopener noreferrer" target="_blank">KT-35226</a></p><p id="-drz3qn_45"><span class="control" id="-drz3qn_52">Component</span>: Core language</p><p id="-drz3qn_46"><span class="control" id="-drz3qn_53">Incompatible change type</span>: source</p><p id="-drz3qn_47"><span class="control" id="-drz3qn_54">Short summary</span>: Kotlin 1.5 will outlaw the use of spread operator (*) on signature-polymorphic calls</p><p id="-drz3qn_48"><span class="control" id="-drz3qn_55">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_49"><li class="list__item" id="-drz3qn_56"><p id="-drz3qn_58">&lt; 1.5: introduce warning for the problematic operator at call-site</p></li><li class="list__item" id="-drz3qn_57"><p id="-drz3qn_59">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_60">-XXLanguage:-ProhibitSpreadOnSignaturePolymorphicCall</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-non-abstract-classes-containing-abstract-members-invisible-from-that-classes-internal-package-private" data-toc="forbid-non-abstract-classes-containing-abstract-members-invisible-from-that-classes-internal-package-private">Forbid non-abstract classes containing abstract members invisible from that classes (internal/package-private)</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_61"><p id="-drz3qn_62"><span class="control" id="-drz3qn_68">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-27825" id="-drz3qn_69" data-external="true" rel="noopener noreferrer" target="_blank">KT-27825</a></p><p id="-drz3qn_63"><span class="control" id="-drz3qn_70">Component</span>: Core language</p><p id="-drz3qn_64"><span class="control" id="-drz3qn_71">Incompatible change type</span>: source</p><p id="-drz3qn_65"><span class="control" id="-drz3qn_72">Short summary</span>: Kotlin 1.5 will outlaw non-abstract classes containing abstract members invisible from that classes (internal/package-private)</p><p id="-drz3qn_66"><span class="control" id="-drz3qn_73">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_67"><li class="list__item" id="-drz3qn_74"><p id="-drz3qn_76">&lt; 1.5: introduce warning for the problematic classes</p></li><li class="list__item" id="-drz3qn_75"><p id="-drz3qn_77">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_78">-XXLanguage:-ProhibitInvisibleAbstractMethodsInSuperclasses</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-using-array-based-on-non-reified-type-parameters-as-reified-type-arguments-on-jvm" data-toc="forbid-using-array-based-on-non-reified-type-parameters-as-reified-type-arguments-on-jvm">Forbid using array based on non-reified type parameters as reified type arguments on JVM</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_79"><p id="-drz3qn_80"><span class="control" id="-drz3qn_86">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-31227" id="-drz3qn_87" data-external="true" rel="noopener noreferrer" target="_blank">KT-31227</a></p><p id="-drz3qn_81"><span class="control" id="-drz3qn_88">Component</span>: Core language</p><p id="-drz3qn_82"><span class="control" id="-drz3qn_89">Incompatible change type</span>: source</p><p id="-drz3qn_83"><span class="control" id="-drz3qn_90">Short summary</span>: Kotlin 1.5 will outlaw using array based on non-reified type parameters as reified type arguments on JVM</p><p id="-drz3qn_84"><span class="control" id="-drz3qn_91">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_85"><li class="list__item" id="-drz3qn_92"><p id="-drz3qn_94">&lt; 1.5: introduce warning for the problematic calls</p></li><li class="list__item" id="-drz3qn_93"><p id="-drz3qn_95">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_96">-XXLanguage:-ProhibitNonReifiedArraysAsReifiedTypeArguments</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-secondary-enum-class-constructors-which-do-not-delegate-to-the-primary-constructor" data-toc="forbid-secondary-enum-class-constructors-which-do-not-delegate-to-the-primary-constructor">Forbid secondary enum class constructors which do not delegate to the primary constructor</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_97"><p id="-drz3qn_98"><span class="control" id="-drz3qn_104">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-35870" id="-drz3qn_105" data-external="true" rel="noopener noreferrer" target="_blank">KT-35870</a></p><p id="-drz3qn_99"><span class="control" id="-drz3qn_106">Component</span>: Core language</p><p id="-drz3qn_100"><span class="control" id="-drz3qn_107">Incompatible change type</span>: source</p><p id="-drz3qn_101"><span class="control" id="-drz3qn_108">Short summary</span>: Kotlin 1.5 will outlaw secondary enum class constructors which do not delegate to the primary constructor</p><p id="-drz3qn_102"><span class="control" id="-drz3qn_109">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_103"><li class="list__item" id="-drz3qn_110"><p id="-drz3qn_112">&lt; 1.5: introduce warning for the problematic constructors</p></li><li class="list__item" id="-drz3qn_111"><p id="-drz3qn_113">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_114">-XXLanguage:-RequiredPrimaryConstructorDelegationCallInEnums</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-exposing-anonymous-types-from-private-inline-functions" data-toc="forbid-exposing-anonymous-types-from-private-inline-functions">Forbid exposing anonymous types from private inline functions</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_115"><p id="-drz3qn_116"><span class="control" id="-drz3qn_122">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-33917" id="-drz3qn_123" data-external="true" rel="noopener noreferrer" target="_blank">KT-33917</a></p><p id="-drz3qn_117"><span class="control" id="-drz3qn_124">Component</span>: Core language</p><p id="-drz3qn_118"><span class="control" id="-drz3qn_125">Incompatible change type</span>: source</p><p id="-drz3qn_119"><span class="control" id="-drz3qn_126">Short summary</span>: Kotlin 1.5 will outlaw exposing anonymous types from private inline functions</p><p id="-drz3qn_120"><span class="control" id="-drz3qn_127">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_121"><li class="list__item" id="-drz3qn_128"><p id="-drz3qn_130">&lt; 1.5: introduce warning for the problematic constructors</p></li><li class="list__item" id="-drz3qn_129"><p id="-drz3qn_131">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_132">-XXLanguage:-ApproximateAnonymousReturnTypesInPrivateInlineFunctions</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-passing-non-spread-arrays-after-arguments-with-sam-conversion" data-toc="forbid-passing-non-spread-arrays-after-arguments-with-sam-conversion">Forbid passing non-spread arrays after arguments with SAM-conversion</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_133"><p id="-drz3qn_134"><span class="control" id="-drz3qn_140">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-35224" id="-drz3qn_141" data-external="true" rel="noopener noreferrer" target="_blank">KT-35224</a></p><p id="-drz3qn_135"><span class="control" id="-drz3qn_142">Component</span>: Core language</p><p id="-drz3qn_136"><span class="control" id="-drz3qn_143">Incompatible change type</span>: source</p><p id="-drz3qn_137"><span class="control" id="-drz3qn_144">Short summary</span>: Kotlin 1.5 will outlaw passing non-spread arrays after arguments with SAM-conversion</p><p id="-drz3qn_138"><span class="control" id="-drz3qn_145">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_139"><li class="list__item" id="-drz3qn_146"><p id="-drz3qn_148">1.3.70: introduce warning for the problematic calls</p></li><li class="list__item" id="-drz3qn_147"><p id="-drz3qn_149">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_150">-XXLanguage:-ProhibitVarargAsArrayAfterSamArgument</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="support-special-semantics-for-underscore-named-catch-block-parameters" data-toc="support-special-semantics-for-underscore-named-catch-block-parameters">Support special semantics for underscore-named catch block parameters</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_151"><p id="-drz3qn_152"><span class="control" id="-drz3qn_158">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-31567" id="-drz3qn_159" data-external="true" rel="noopener noreferrer" target="_blank">KT-31567</a></p><p id="-drz3qn_153"><span class="control" id="-drz3qn_160">Component</span>: Core language</p><p id="-drz3qn_154"><span class="control" id="-drz3qn_161">Incompatible change type</span>: source</p><p id="-drz3qn_155"><span class="control" id="-drz3qn_162">Short summary</span>: Kotlin 1.5 will outlaw references to the underscore symbol (<code class="code" id="-drz3qn_163">_</code>) that is used to omit parameter name of an exception in the catch block</p><p id="-drz3qn_156"><span class="control" id="-drz3qn_164">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_157"><li class="list__item" id="-drz3qn_165"><p id="-drz3qn_167">1.4.20: introduce warning for the problematic references</p></li><li class="list__item" id="-drz3qn_166"><p id="-drz3qn_168">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_169">-XXLanguage:-ForbidReferencingToUnderscoreNamedParameterOfCatchBlock</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="change-implementation-strategy-of-sam-conversion-from-anonymous-class-based-to-invokedynamic" data-toc="change-implementation-strategy-of-sam-conversion-from-anonymous-class-based-to-invokedynamic">Change implementation strategy of SAM conversion from anonymous class-based to invokedynamic</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_170"><p id="-drz3qn_171"><span class="control" id="-drz3qn_177">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-44912" id="-drz3qn_178" data-external="true" rel="noopener noreferrer" target="_blank">KT-44912</a></p><p id="-drz3qn_172"><span class="control" id="-drz3qn_179">Component</span>: Kotlin/JVM</p><p id="-drz3qn_173"><span class="control" id="-drz3qn_180">Incompatible change type</span>: behavioral</p><p id="-drz3qn_174"><span class="control" id="-drz3qn_181">Short summary</span>: Since Kotlin 1.5, implementation strategy of SAM (single abstract method) conversion will be changed from generating an anonymous class to using the <code class="code" id="-drz3qn_182">invokedynamic</code> JVM instruction</p><p id="-drz3qn_175"><span class="control" id="-drz3qn_183">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_176"><li class="list__item" id="-drz3qn_184"><p id="-drz3qn_185">1.5: change implementation strategy of SAM conversion, <code class="code" id="-drz3qn_186">-Xsam-conversions=class</code> can be used to revert implementation scheme to the one that used before</p></li></ul></aside></section><section class="chapter"><h3 id="performance-issues-with-the-jvm-ir-based-backend" data-toc="performance-issues-with-the-jvm-ir-based-backend">Performance issues with the JVM IR-based backend</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_187"><p id="-drz3qn_188"><span class="control" id="-drz3qn_200">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48233" id="-drz3qn_201" data-external="true" rel="noopener noreferrer" target="_blank">KT-48233</a></p><p id="-drz3qn_189"><span class="control" id="-drz3qn_202">Component</span>: Kotlin/JVM</p><p id="-drz3qn_190"><span class="control" id="-drz3qn_203">Incompatible change type</span>: behavioral</p><p id="-drz3qn_191"><span class="control" id="-drz3qn_204">Short summary</span>: Kotlin 1.5 uses the <a href="https://blog.jetbrains.com/kotlin/2021/02/the-jvm-backend-is-in-beta-let-s-make-it-stable-together/" id="-drz3qn_205" data-external="true" rel="noopener noreferrer" target="_blank">IR-based backend</a> for the Kotlin/JVM compiler by default. The old backend is still used by default for earlier language versions.</p><p id="-drz3qn_192">You might encounter some performance degradation issues using the new compiler in Kotlin 1.5. We are working on fixing such cases.</p><p id="-drz3qn_193"><span class="control" id="-drz3qn_206">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_194"><li class="list__item" id="-drz3qn_207"><p id="-drz3qn_209">&lt; 1.5: by default, the old JVM backend is used</p></li><li class="list__item" id="-drz3qn_208"><p id="-drz3qn_210">&gt;= 1.5: by default, the IR-based backend is used. If you need to use the old backend in Kotlin 1.5, add the following lines to the project's configuration file to temporarily revert to pre-1.5 behavior:</p></li></ul><p id="-drz3qn_195">In Gradle:</p><div class="tabs" id="-drz3qn_196" data-anchors="[-drz3qn_211,-drz3qn_212]"><div class="tabs__content" data-gtm="tab" id="-drz3qn_211" data-title="Kotlin"><div class="code-block" data-lang="kotlin">
tasks.withType&lt;org.jetbrains.kotlin.gradle.dsl.KotlinJvmCompile&gt; {
  kotlinOptions.useOldBackend = true
}
</div></div><div class="tabs__content" data-gtm="tab" id="-drz3qn_212" data-title="Groovy"><div class="code-block" data-lang="groovy">
tasks.withType(org.jetbrains.kotlin.gradle.dsl.KotlinJvmCompile) {
  kotlinOptions.useOldBackend = true
}
</div></div></div><p id="-drz3qn_197">In Maven:</p><div class="code-block" data-lang="markup">
&lt;configuration&gt;
    &lt;args&gt;
        &lt;arg&gt;-Xuse-old-backend&lt;/arg&gt;
    &lt;/args&gt;
&lt;/configuration&gt;
</div><p id="-drz3qn_199">Support for this flag will be removed in one of the future releases.</p></aside></section><section class="chapter"><h3 id="new-field-sorting-in-the-jvm-ir-based-backend" data-toc="new-field-sorting-in-the-jvm-ir-based-backend">New field sorting in the JVM IR-based backend</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_213"><p id="-drz3qn_214"><span class="control" id="-drz3qn_225">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46378" id="-drz3qn_226" data-external="true" rel="noopener noreferrer" target="_blank">KT-46378</a></p><p id="-drz3qn_215"><span class="control" id="-drz3qn_227">Component</span>: Kotlin/JVM</p><p id="-drz3qn_216"><span class="control" id="-drz3qn_228">Incompatible change type</span>: behavioral</p><p id="-drz3qn_217"><span class="control" id="-drz3qn_229">Short summary</span>: Since version 1.5, Kotlin uses the <a href="https://blog.jetbrains.com/kotlin/2021/02/the-jvm-backend-is-in-beta-let-s-make-it-stable-together/" id="-drz3qn_230" data-external="true" rel="noopener noreferrer" target="_blank">IR-based backend</a> that sorts JVM bytecode differently: it generates fields declared in the constructor before fields declared in the body, while it's vice versa for the old backend. The new sorting may change the behavior of programs that use serialization frameworks that depend on the field order, such as Java serialization.</p><p id="-drz3qn_218"><span class="control" id="-drz3qn_231">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_219"><li class="list__item" id="-drz3qn_232"><p id="-drz3qn_234">&lt; 1.5: by default, the old JVM backend is used. It has fields declared in the body before fields declared in the constructor.</p></li><li class="list__item" id="-drz3qn_233"><p id="-drz3qn_235">&gt;= 1.5: by default, the new IR-based backend is used. Fields declared in the constructor are generated before fields declared in the body. As a workaround, you can temporarily switch to the old backend in Kotlin 1.5. To do that, add the following lines to the project's configuration file:</p></li></ul><p id="-drz3qn_220">In Gradle:</p><div class="tabs" id="-drz3qn_221" data-anchors="[-drz3qn_236,-drz3qn_237]"><div class="tabs__content" data-gtm="tab" id="-drz3qn_236" data-title="Kotlin"><div class="code-block" data-lang="kotlin">
tasks.withType&lt;org.jetbrains.kotlin.gradle.dsl.KotlinJvmCompile&gt; {
  kotlinOptions.useOldBackend = true
}
</div></div><div class="tabs__content" data-gtm="tab" id="-drz3qn_237" data-title="Groovy"><div class="code-block" data-lang="groovy">
tasks.withType(org.jetbrains.kotlin.gradle.dsl.KotlinJvmCompile) {
  kotlinOptions.useOldBackend = true
}
</div></div></div><p id="-drz3qn_222">In Maven:</p><div class="code-block" data-lang="markup">
&lt;configuration&gt;
    &lt;args&gt;
        &lt;arg&gt;-Xuse-old-backend&lt;/arg&gt;
    &lt;/args&gt;
&lt;/configuration&gt;
</div><p id="-drz3qn_224">Support for this flag will be removed in one of the future releases.</p></aside></section><section class="chapter"><h3 id="generate-nullability-assertion-for-delegated-properties-with-a-generic-call-in-the-delegate-expression" data-toc="generate-nullability-assertion-for-delegated-properties-with-a-generic-call-in-the-delegate-expression">Generate nullability assertion for delegated properties with a generic call in the delegate expression</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_238"><p id="-drz3qn_239"><span class="control" id="-drz3qn_245">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-44304" id="-drz3qn_246" data-external="true" rel="noopener noreferrer" target="_blank">KT-44304</a></p><p id="-drz3qn_240"><span class="control" id="-drz3qn_247">Component</span>: Kotlin/JVM</p><p id="-drz3qn_241"><span class="control" id="-drz3qn_248">Incompatible change type</span>: behavioral</p><p id="-drz3qn_242"><span class="control" id="-drz3qn_249">Short summary</span>: Since Kotlin 1.5, the Kotlin compiler will emit nullability assertions for delegated properties with a generic call in the delegate expression</p><p id="-drz3qn_243"><span class="control" id="-drz3qn_250">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_244"><li class="list__item" id="-drz3qn_251"><p id="-drz3qn_252">1.5: emit nullability assertion for delegated properties (see details in the issue), <code class="code" id="-drz3qn_253">-Xuse-old-backend</code> or <code class="code" id="-drz3qn_254">-language-version 1.4</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="turn-warnings-into-errors-for-calls-with-type-parameters-annotated-by-onlyinputtypes" data-toc="turn-warnings-into-errors-for-calls-with-type-parameters-annotated-by-onlyinputtypes">Turn warnings into errors for calls with type parameters annotated by @OnlyInputTypes</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_255"><p id="-drz3qn_256"><span class="control" id="-drz3qn_262">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-45861" id="-drz3qn_263" data-external="true" rel="noopener noreferrer" target="_blank">KT-45861</a></p><p id="-drz3qn_257"><span class="control" id="-drz3qn_264">Component</span>: Core language</p><p id="-drz3qn_258"><span class="control" id="-drz3qn_265">Incompatible change type</span>: source</p><p id="-drz3qn_259"><span class="control" id="-drz3qn_266">Short summary</span>: Kotlin 1.5 will outlaw calls like <code class="code" id="-drz3qn_267">contains</code>, <code class="code" id="-drz3qn_268">indexOf</code>, and <code class="code" id="-drz3qn_269">assertEquals</code> with senseless arguments to improve type safety</p><p id="-drz3qn_260"><span class="control" id="-drz3qn_270">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_261"><li class="list__item" id="-drz3qn_271"><p id="-drz3qn_273">1.4.0: introduce warning for the problematic constructors</p></li><li class="list__item" id="-drz3qn_272"><p id="-drz3qn_274">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_275">-XXLanguage:-StrictOnlyInputTypesChecks</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="use-the-correct-order-of-arguments-execution-in-calls-with-named-vararg" data-toc="use-the-correct-order-of-arguments-execution-in-calls-with-named-vararg">Use the correct order of arguments execution in calls with named vararg</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_276"><p id="-drz3qn_277"><span class="control" id="-drz3qn_283">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-17691" id="-drz3qn_284" data-external="true" rel="noopener noreferrer" target="_blank">KT-17691</a></p><p id="-drz3qn_278"><span class="control" id="-drz3qn_285">Component</span>: Kotlin/JVM</p><p id="-drz3qn_279"><span class="control" id="-drz3qn_286">Incompatible change type</span>: behavioral</p><p id="-drz3qn_280"><span class="control" id="-drz3qn_287">Short summary</span>: Kotlin 1.5 will change the order of arguments execution in calls with named vararg</p><p id="-drz3qn_281"><span class="control" id="-drz3qn_288">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_282"><li class="list__item" id="-drz3qn_289"><p id="-drz3qn_291">&lt; 1.5: introduce warning for the problematic constructors</p></li><li class="list__item" id="-drz3qn_290"><p id="-drz3qn_292">&gt;= 1.5: raise this warning to an error, <code class="code" id="-drz3qn_293">-XXLanguage:-UseCorrectExecutionOrderForVarargArguments</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="use-default-value-of-the-parameter-in-operator-functional-calls" data-toc="use-default-value-of-the-parameter-in-operator-functional-calls">Use default value of the parameter in operator functional calls</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_294"><p id="-drz3qn_295"><span class="control" id="-drz3qn_301">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-42064" id="-drz3qn_302" data-external="true" rel="noopener noreferrer" target="_blank">KT-42064</a></p><p id="-drz3qn_296"><span class="control" id="-drz3qn_303">Component</span>: Kotlin/JVM</p><p id="-drz3qn_297"><span class="control" id="-drz3qn_304">Incompatible change type</span>: behavioral</p><p id="-drz3qn_298"><span class="control" id="-drz3qn_305">Short summary</span>: Kotlin 1.5 will use default value of the parameter in operator calls</p><p id="-drz3qn_299"><span class="control" id="-drz3qn_306">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_300"><li class="list__item" id="-drz3qn_307"><p id="-drz3qn_309">&lt; 1.5: old behavior (see details in the issue)</p></li><li class="list__item" id="-drz3qn_308"><p id="-drz3qn_310">&gt;= 1.5: behavior changed, <code class="code" id="-drz3qn_311">-XXLanguage:-JvmIrEnabledByDefault</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="produce-empty-reversed-progressions-in-for-loops-if-regular-progression-is-also-empty" data-toc="produce-empty-reversed-progressions-in-for-loops-if-regular-progression-is-also-empty">Produce empty reversed progressions in for loops if regular progression is also empty</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_312"><p id="-drz3qn_313"><span class="control" id="-drz3qn_319">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-42533" id="-drz3qn_320" data-external="true" rel="noopener noreferrer" target="_blank">KT-42533</a></p><p id="-drz3qn_314"><span class="control" id="-drz3qn_321">Component</span>: Kotlin/JVM</p><p id="-drz3qn_315"><span class="control" id="-drz3qn_322">Incompatible change type</span>: behavioral</p><p id="-drz3qn_316"><span class="control" id="-drz3qn_323">Short summary</span>: Kotlin 1.5 will produce empty reversed progressions in for loops if regular progression is also empty</p><p id="-drz3qn_317"><span class="control" id="-drz3qn_324">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_318"><li class="list__item" id="-drz3qn_325"><p id="-drz3qn_327">&lt; 1.5: old behavior (see details in the issue)</p></li><li class="list__item" id="-drz3qn_326"><p id="-drz3qn_328">&gt;= 1.5: behavior changed, <code class="code" id="-drz3qn_329">-XXLanguage:-JvmIrEnabledByDefault</code> can be used to temporarily revert to pre-1.5 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="straighten-char-to-code-and-char-to-digit-conversions-out" data-toc="straighten-char-to-code-and-char-to-digit-conversions-out">Straighten Char-to-code and Char-to-digit conversions out</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_330"><p id="-drz3qn_331"><span class="control" id="-drz3qn_337">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-23451" id="-drz3qn_338" data-external="true" rel="noopener noreferrer" target="_blank">KT-23451</a></p><p id="-drz3qn_332"><span class="control" id="-drz3qn_339">Component</span>: kotlin-stdlib</p><p id="-drz3qn_333"><span class="control" id="-drz3qn_340">Incompatible change type</span>: source</p><p id="-drz3qn_334"><span class="control" id="-drz3qn_341">Short summary</span>: Since Kotlin 1.5, conversions of Char to number types will be deprecated</p><p id="-drz3qn_335"><span class="control" id="-drz3qn_342">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_336"><li class="list__item" id="-drz3qn_343"><p id="-drz3qn_344">1.5: deprecate <code class="code" id="-drz3qn_345">Char.toInt()/toShort()/toLong()/toByte()/toDouble()/toFloat()</code> and the reverse functions like <code class="code" id="-drz3qn_346">Long.toChar()</code>, and propose replacement</p></li></ul></aside></section><section class="chapter"><h3 id="inconsistent-case-insensitive-comparison-of-characters-in-kotlin-text-functions" data-toc="inconsistent-case-insensitive-comparison-of-characters-in-kotlin-text-functions">Inconsistent case-insensitive comparison of characters in kotlin.text functions</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_347"><p id="-drz3qn_348"><span class="control" id="-drz3qn_354">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-45496" id="-drz3qn_355" data-external="true" rel="noopener noreferrer" target="_blank">KT-45496</a></p><p id="-drz3qn_349"><span class="control" id="-drz3qn_356">Component</span>: kotlin-stdlib</p><p id="-drz3qn_350"><span class="control" id="-drz3qn_357">Incompatible change type</span>: behavioral</p><p id="-drz3qn_351"><span class="control" id="-drz3qn_358">Short summary</span>: Since Kotlin 1.5, <code class="code" id="-drz3qn_359">Char.equals</code> will be improved in case-insensitive case by first comparing whether the uppercase variants of characters are equal, then whether the lowercase variants of those uppercase variants (as opposed to the characters themselves) are equal</p><p id="-drz3qn_352"><span class="control" id="-drz3qn_360">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_353"><li class="list__item" id="-drz3qn_361"><p id="-drz3qn_363">&lt; 1.5: old behavior (see details in the issue)</p></li><li class="list__item" id="-drz3qn_362"><p id="-drz3qn_364">1.5: change behavior for <code class="code" id="-drz3qn_365">Char.equals</code> function</p></li></ul></aside></section><section class="chapter"><h3 id="remove-default-locale-sensitive-case-conversion-api" data-toc="remove-default-locale-sensitive-case-conversion-api">Remove default locale-sensitive case conversion API</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_366"><p id="-drz3qn_367"><span class="control" id="-drz3qn_373">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-43023" id="-drz3qn_374" data-external="true" rel="noopener noreferrer" target="_blank">KT-43023</a></p><p id="-drz3qn_368"><span class="control" id="-drz3qn_375">Component</span>: kotlin-stdlib</p><p id="-drz3qn_369"><span class="control" id="-drz3qn_376">Incompatible change type</span>: source</p><p id="-drz3qn_370"><span class="control" id="-drz3qn_377">Short summary</span>: Since Kotlin 1.5, default locale-sensitive case conversion functions like <code class="code" id="-drz3qn_378">String.toUpperCase()</code> will be deprecated</p><p id="-drz3qn_371"><span class="control" id="-drz3qn_379">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_372"><li class="list__item" id="-drz3qn_380"><p id="-drz3qn_381">1.5: deprecate case conversions functions with the default locale (see details in the issue), and propose replacement</p></li></ul></aside></section><section class="chapter"><h3 id="gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable" data-toc="gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable">Gradually change the return type of collection min and max functions to non-nullable</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_382"><p id="-drz3qn_383"><span class="control" id="-drz3qn_389">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-38854" id="-drz3qn_390" data-external="true" rel="noopener noreferrer" target="_blank">KT-38854</a></p><p id="-drz3qn_384"><span class="control" id="-drz3qn_391">Component</span>: kotlin-stdlib (JVM)</p><p id="-drz3qn_385"><span class="control" id="-drz3qn_392">Incompatible change type</span>: source</p><p id="-drz3qn_386"><span class="control" id="-drz3qn_393">Short summary</span>: return type of collection <code class="code" id="-drz3qn_394">min</code> and <code class="code" id="-drz3qn_395">max</code> functions will be changed to non-nullable in 1.6</p><p id="-drz3qn_387"><span class="control" id="-drz3qn_396">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_388"><li class="list__item" id="-drz3qn_397"><p id="-drz3qn_400">1.4: introduce <code class="code" id="-drz3qn_401">...OrNull</code> functions as synonyms and deprecate the affected API (see details in the issue)</p></li><li class="list__item" id="-drz3qn_398"><p id="-drz3qn_402">1.5.0: raise the deprecation level of the affected API to error</p></li><li class="list__item" id="-drz3qn_399"><p id="-drz3qn_403">&gt;=1.6: reintroduce the affected API but with non-nullable return type</p></li></ul></aside></section><section class="chapter"><h3 id="raise-the-deprecation-level-of-conversions-of-floating-point-types-to-short-and-byte" data-toc="raise-the-deprecation-level-of-conversions-of-floating-point-types-to-short-and-byte">Raise the deprecation level of conversions of floating-point types to Short and Byte</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_404"><p id="-drz3qn_405"><span class="control" id="-drz3qn_411">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-30360" id="-drz3qn_412" data-external="true" rel="noopener noreferrer" target="_blank">KT-30360</a></p><p id="-drz3qn_406"><span class="control" id="-drz3qn_413">Component</span>: kotlin-stdlib (JVM)</p><p id="-drz3qn_407"><span class="control" id="-drz3qn_414">Incompatible change type</span>: source</p><p id="-drz3qn_408"><span class="control" id="-drz3qn_415">Short summary</span>: conversions of floating-point types to <code class="code" id="-drz3qn_416">Short</code> and <code class="code" id="-drz3qn_417">Byte</code> deprecated in Kotlin 1.4 with <code class="code" id="-drz3qn_418">WARNING</code> level will cause errors since Kotlin 1.5.0.</p><p id="-drz3qn_409"><span class="control" id="-drz3qn_419">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_410"><li class="list__item" id="-drz3qn_420"><p id="-drz3qn_422">1.4: deprecate <code class="code" id="-drz3qn_423">Double.toShort()/toByte()</code> and <code class="code" id="-drz3qn_424">Float.toShort()/toByte()</code> and propose replacement</p></li><li class="list__item" id="-drz3qn_421"><p id="-drz3qn_425">1.5.0: raise the deprecation level to error</p></li></ul></aside></section></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2><section class="chapter"><h3 id="do-not-mix-several-jvm-variants-of-kotlin-test-in-a-single-project" data-toc="do-not-mix-several-jvm-variants-of-kotlin-test-in-a-single-project">Do not mix several JVM variants of kotlin-test in a single project</h3><aside class="prompt" data-type="tip" data-title="" id="-drz3qn_427"><p id="-drz3qn_428"><span class="control" id="-drz3qn_434">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-40225" id="-drz3qn_435" data-external="true" rel="noopener noreferrer" target="_blank">KT-40225</a></p><p id="-drz3qn_429"><span class="control" id="-drz3qn_436">Component</span>: Gradle</p><p id="-drz3qn_430"><span class="control" id="-drz3qn_437">Incompatible change type</span>: behavioral</p><p id="-drz3qn_431"><span class="control" id="-drz3qn_438">Short summary</span>: several mutually exclusive <code class="code" id="-drz3qn_439">kotlin-test</code> variants for different testing frameworks could have been in a project if one of them is brought by a transitive dependency. From 1.5.0, Gradle won't allow having mutually exclusive <code class="code" id="-drz3qn_440">kotlin-test</code> variants for different testing frameworks.</p><p id="-drz3qn_432"><span class="control" id="-drz3qn_441">Deprecation cycle</span>:</p><ul class="list _bullet" id="-drz3qn_433"><li class="list__item" id="-drz3qn_442"><p id="-drz3qn_444">&lt; 1.5: having several mutually exclusive <code class="code" id="-drz3qn_445">kotlin-test</code> variants for different testing frameworks is allowed</p></li><li class="list__item" id="-drz3qn_443"><p id="-drz3qn_446">&gt;= 1.5: behavior changed, <br> Gradle throws an exception like &quot;Cannot select module with conflict on capability...&quot;. Possible solutions:</p><ul class="list _bullet" id="-drz3qn_447"><li class="list__item" id="-drz3qn_449"><p id="-drz3qn_453">use the same <code class="code" id="-drz3qn_454">kotlin-test</code> variant and the corresponding testing framework as the transitive dependency brings.</p></li><li class="list__item" id="-drz3qn_450"><p id="-drz3qn_455">find another variant of the dependency that doesn't bring the <code class="code" id="-drz3qn_456">kotlin-test</code> variant transitively, so you can use the testing framework you would like to use.</p></li><li class="list__item" id="-drz3qn_451"><p id="-drz3qn_457">find another variant of the dependency that brings another <code class="code" id="-drz3qn_458">kotlin-test</code> variant transitively, which uses the same testing framework you would like to use.</p></li><li class="list__item" id="-drz3qn_452"><p id="-drz3qn_459">exclude the testing framework that is brought transitively. The following example is for excluding JUnit 4:</p><div class="code-block" data-lang="groovy">
configurations { 
    testImplementation.get().exclude(&quot;org.jetbrains.kotlin&quot;, &quot;kotlin-test-junit&quot;)
}
</div><p id="-drz3qn_461">After excluding the testing framework, test your application. If it stopped working, rollback excluding changes, use the same testing framework as the library does, and exclude your testing framework.</p></li></ul></li></ul></aside></section></section><div class="last-modified">28 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compatibility-guide-16.html" class="navigation-links__prev">Compatibility guide for Kotlin 1.6</a><a href="compatibility-guide-14.html" class="navigation-links__next">Compatibility guide for Kotlin 1.4</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>