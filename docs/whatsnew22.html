<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-24T18:52:09.532888428"><link rel="canonical" href="https://kotlinlang.org/docs/whatsnew22.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>What's new in Kotlin 2.2.0 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"ide-support","level":0,"title":"IDE support","anchor":"#ide-support"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"preview-of-context-parameters","level":1,"title":"Preview of context parameters","anchor":"#preview-of-context-parameters"},{"id":"preview-of-context-sensitive-resolution","level":1,"title":"Preview of context-sensitive resolution","anchor":"#preview-of-context-sensitive-resolution"},{"id":"preview-of-features-for-annotation-use-site-targets","level":1,"title":"Preview of features for annotation use-site targets","anchor":"#preview-of-features-for-annotation-use-site-targets"},{"id":"support-for-nested-type-aliases","level":1,"title":"Support for nested type aliases","anchor":"#support-for-nested-type-aliases"},{"id":"stable-features-guard-conditions-non-local-break-and-continue-and-multi-dollar-interpolation","level":1,"title":"Stable features: guard conditions, non-local break and continue, and multi-dollar interpolation","anchor":"#stable-features-guard-conditions-non-local-break-and-continue-and-multi-dollar-interpolation"},{"id":"kotlin-compiler-unified-management-of-compiler-warnings","level":0,"title":"Kotlin compiler: unified management of compiler warnings","anchor":"#kotlin-compiler-unified-management-of-compiler-warnings"},{"id":"how-to-apply","level":1,"title":"How to apply","anchor":"#how-to-apply"},{"id":"use-cases","level":1,"title":"Use cases","anchor":"#use-cases"},{"id":"leave-feedback","level":1,"title":"Leave feedback","anchor":"#leave-feedback"},{"id":"kotlin-jvm","level":0,"title":"Kotlin/JVM","anchor":"#kotlin-jvm"},{"id":"changes-to-default-method-generation-for-interface-functions","level":1,"title":"Changes to default method generation for interface functions","anchor":"#changes-to-default-method-generation-for-interface-functions"},{"id":"support-for-reading-and-writing-annotations-in-kotlin-metadata","level":1,"title":"Support for reading and writing annotations in Kotlin metadata","anchor":"#support-for-reading-and-writing-annotations-in-kotlin-metadata"},{"id":"improved-java-interop-with-inline-value-classes","level":1,"title":"Improved Java interop with inline value classes","anchor":"#improved-java-interop-with-inline-value-classes"},{"id":"improved-support-for-annotating-jvm-records","level":1,"title":"Improved support for annotating JVM records","anchor":"#improved-support-for-annotating-jvm-records"},{"id":"kotlin-native","level":0,"title":"Kotlin/Native","anchor":"#kotlin-native"},{"id":"per-object-memory-allocation","level":1,"title":"Per-object memory allocation","anchor":"#per-object-memory-allocation"},{"id":"support-for-latin-1-encoded-strings-at-runtime","level":1,"title":"Support for Latin-1 encoded strings at runtime","anchor":"#support-for-latin-1-encoded-strings-at-runtime"},{"id":"improved-tracking-of-memory-consumption-on-apple-platforms","level":1,"title":"Improved tracking of memory consumption on Apple platforms","anchor":"#improved-tracking-of-memory-consumption-on-apple-platforms"},{"id":"llvm-update-from-16-to-19","level":1,"title":"LLVM update from 16 to 19","anchor":"#llvm-update-from-16-to-19"},{"id":"windows-7-target-deprecated","level":1,"title":"Windows 7 target deprecated","anchor":"#windows-7-target-deprecated"},{"id":"kotlin-wasm","level":0,"title":"Kotlin/Wasm","anchor":"#kotlin-wasm"},{"id":"build-infrastructure-for-wasm-target-separated-from-javascript-target","level":1,"title":"Build infrastructure for Wasm target separated from JavaScript target","anchor":"#build-infrastructure-for-wasm-target-separated-from-javascript-target"},{"id":"per-project-binaryen-configuration","level":1,"title":"Per-project Binaryen configuration","anchor":"#per-project-binaryen-configuration"},{"id":"kotlin-js","level":0,"title":"Kotlin/JS","anchor":"#kotlin-js"},{"id":"fix-for-copy-in-jsplainobject-interfaces","level":1,"title":"Fix for copy() in @JsPlainObject interfaces","anchor":"#fix-for-copy-in-jsplainobject-interfaces"},{"id":"support-for-type-aliases-in-files-with-jsmodule-annotation","level":1,"title":"Support for type aliases in files with @JsModule annotation","anchor":"#support-for-type-aliases-in-files-with-jsmodule-annotation"},{"id":"support-for-jsexport-in-multiplatform-expect-declarations","level":1,"title":"Support for @JsExport in multiplatform expect declarations","anchor":"#support-for-jsexport-in-multiplatform-expect-declarations"},{"id":"ability-to-use-jsexport-with-the-promise-unit-type","level":1,"title":"Ability to use @JsExport with the Promise\u003cUnit\u003e type","anchor":"#ability-to-use-jsexport-with-the-promise-unit-type"},{"id":"gradle","level":0,"title":"Gradle","anchor":"#gradle"},{"id":"binary-compatibility-validation-included-in-kotlin-gradle-plugin","level":1,"title":"Binary compatibility validation included in Kotlin Gradle plugin","anchor":"#binary-compatibility-validation-included-in-kotlin-gradle-plugin"},{"id":"support-for-rich-output-in-console-for-kotlin-gradle-plugin","level":1,"title":"Support for rich output in console for Kotlin Gradle plugin","anchor":"#support-for-rich-output-in-console-for-kotlin-gradle-plugin"},{"id":"integration-of-problems-api-within-kgp-diagnostics","level":1,"title":"Integration of Problems API within KGP diagnostics","anchor":"#integration-of-problems-api-within-kgp-diagnostics"},{"id":"kgp-compatibility-with-warning-mode","level":1,"title":"KGP compatibility with --warning-mode","anchor":"#kgp-compatibility-with-warning-mode"},{"id":"new-experimental-build-tools-api","level":0,"title":"New experimental build tools API","anchor":"#new-experimental-build-tools-api"},{"id":"improved-in-process-compiler-execution-strategy","level":1,"title":"Improved \"in process\" compiler execution strategy","anchor":"#improved-in-process-compiler-execution-strategy"},{"id":"flexibility-to-configure-different-compiler-versions-from-kotlin","level":1,"title":"Flexibility to configure different compiler versions from Kotlin","anchor":"#flexibility-to-configure-different-compiler-versions-from-kotlin"},{"id":"kotlin-standard-library","level":0,"title":"Kotlin standard library","anchor":"#kotlin-standard-library"},{"id":"stable-base64-encoding-and-decoding","level":1,"title":"Stable Base64 encoding and decoding","anchor":"#stable-base64-encoding-and-decoding"},{"id":"stable-hexadecimal-parsing-and-formatting-with-the-hexformat-api","level":1,"title":"Stable Hexadecimal parsing and formatting with the HexFormat API","anchor":"#stable-hexadecimal-parsing-and-formatting-with-the-hexformat-api"},{"id":"compose-compiler","level":0,"title":"Compose compiler","anchor":"#compose-compiler"},{"id":"support-for-composable-function-references","level":1,"title":"Support for @Composable function references","anchor":"#support-for-composable-function-references"},{"id":"pausablecomposition-feature-flag-enabled-by-default","level":1,"title":"PausableComposition feature flag enabled by default","anchor":"#pausablecomposition-feature-flag-enabled-by-default"},{"id":"optimizenonskippinggroups-feature-flag-enabled-by-default","level":1,"title":"OptimizeNonSkippingGroups feature flag enabled by default","anchor":"#optimizenonskippinggroups-feature-flag-enabled-by-default"},{"id":"deprecated-feature-flags","level":1,"title":"Deprecated feature flags","anchor":"#deprecated-feature-flags"},{"id":"breaking-changes-and-deprecations","level":0,"title":"Breaking changes and deprecations","anchor":"#breaking-changes-and-deprecations"},{"id":"documentation-updates","level":0,"title":"Documentation updates","anchor":"#documentation-updates"},{"id":"kotlin-s-documentation-survey","level":1,"title":"Kotlin\u0027s documentation survey","anchor":"#kotlin-s-documentation-survey"},{"id":"new-and-revamped-tutorials","level":1,"title":"New and revamped tutorials","anchor":"#new-and-revamped-tutorials"},{"id":"new-and-revamped-pages","level":1,"title":"New and revamped pages","anchor":"#new-and-revamped-pages"},{"id":"how-to-update-to-kotlin-2-2-0","level":0,"title":"How to update to Kotlin 2.2.0","anchor":"#how-to-update-to-kotlin-2-2-0"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="What's new in Kotlin 2.2.0 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/whatsnew22.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="What's new in Kotlin 2.2.0 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/whatsnew22.html#webpage",
    "url": "https://kotlinlang.org/docs/whatsnew22.html",
    "name": "What's new in Kotlin 2.2.0 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="whatsnew22" data-main-title="What's new in Kotlin 2.2.0" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="What's new in Kotlin" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/whatsnew/whatsnew22.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="whatsnew22" id="whatsnew22.md">What's new in Kotlin 2.2.0</h1><p id="z9f3y72_2"><span class="emphasis" id="z9f3y72_21"><a href="releases.html#release-details" id="z9f3y72_22">Released: June 23, 2025</a></span></p><p id="z9f3y72_3">The Kotlin 2.2.0 release is here! Here are the main highlights:</p><ul class="list _bullet" id="z9f3y72_4"><li class="list__item" id="z9f3y72_23"><p id="z9f3y72_32"><span class="control" id="z9f3y72_33">Language</span>: new language features in preview, including <a href="#preview-of-context-parameters" id="z9f3y72_34">context parameters</a>. Several <a href="#stable-features-guard-conditions-non-local-break-and-continue-and-multi-dollar-interpolation" id="z9f3y72_35">previously experimental features are now Stable</a>, such as guard conditions, non-local break and continue, and multi-dollar interpolation.</p></li><li class="list__item" id="z9f3y72_24"><p id="z9f3y72_36"><span class="control" id="z9f3y72_37">Kotlin compiler</span>: <a href="#kotlin-compiler-unified-management-of-compiler-warnings" id="z9f3y72_38">unified management of compiler warnings</a>.</p></li><li class="list__item" id="z9f3y72_25"><p id="z9f3y72_39"><span class="control" id="z9f3y72_40">Kotlin/JVM</span>: <a href="#changes-to-default-method-generation-for-interface-functions" id="z9f3y72_41">changes to default method generation for interface functions</a>.</p></li><li class="list__item" id="z9f3y72_26"><p id="z9f3y72_42"><span class="control" id="z9f3y72_43">Kotlin/Native</span>: <a href="#kotlin-native" id="z9f3y72_44">LLVM 19 and new features for tracking and adjusting memory consumption</a>.</p></li><li class="list__item" id="z9f3y72_27"><p id="z9f3y72_45"><span class="control" id="z9f3y72_46">Kotlin/Wasm</span>: <a href="#build-infrastructure-for-wasm-target-separated-from-javascript-target" id="z9f3y72_47">separated Wasm target</a> and the ability to configure <a href="#per-project-binaryen-configuration" id="z9f3y72_48">Binaryen per project</a>.</p></li><li class="list__item" id="z9f3y72_28"><p id="z9f3y72_49"><span class="control" id="z9f3y72_50">Kotlin/JS</span>: <a href="#fix-for-copy-in-jsplainobject-interfaces" id="z9f3y72_51">fix for the <code class="code" id="z9f3y72_52">copy()</code> method generated for <code class="code" id="z9f3y72_53">@JsPlainObject</code> interfaces</a>.</p></li><li class="list__item" id="z9f3y72_29"><p id="z9f3y72_54"><span class="control" id="z9f3y72_55">Gradle</span>: <a href="#binary-compatibility-validation-included-in-kotlin-gradle-plugin" id="z9f3y72_56">binary compatibility validation in the Kotlin Gradle plugin</a>.</p></li><li class="list__item" id="z9f3y72_30"><p id="z9f3y72_57"><span class="control" id="z9f3y72_58">Standard library</span>: <a href="#stable-base64-encoding-and-decoding" id="z9f3y72_59">stable Base64 and HexFormat APIs</a>.</p></li><li class="list__item" id="z9f3y72_31"><p id="z9f3y72_60"><span class="control" id="z9f3y72_61">Documentation</span>: our <a href="https://surveys.jetbrains.com/s3/Kotlin-Docs-2025" id="z9f3y72_62" data-external="true" rel="noopener noreferrer" target="_blank">documentation survey is open</a>, and <a href="#documentation-updates" id="z9f3y72_63">notable improvements have been made to the Kotlin documentation</a>.</p></li></ul><p id="z9f3y72_5">You can also watch this video of the Kotlin Language Evolution team discussing new features and answering questions:</p><div class="video-player" id="z9f3y72_6"><object class="article__bordered-element" width="560" height="315" data-theme="light" type="application/x-shockwave-flash" data="https://www.youtube.com/v/jne3923lWtw?color2=FBE9EC&amp;rel=0&amp;hd=1&amp;autoplay=0&amp;version=3&amp;modestbranding=1&amp;fs=1"></object></div><section class="chapter"><h2 id="ide-support" data-toc="ide-support">IDE support</h2><p id="z9f3y72_64">The Kotlin plugins that support 2.2.0 are bundled in the latest versions of IntelliJ IDEA and Android Studio. You don't need to update the Kotlin plugin in your IDE. All you need to do is to <a href="configure-build-for-eap.html#adjust-the-kotlin-version" id="z9f3y72_66">change the Kotlin version</a> to 2.2.0 in your build scripts.</p><p id="z9f3y72_65">See <a href="releases.html#update-to-a-new-kotlin-version" id="z9f3y72_67">Update to a new release</a> for details.</p></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><p id="z9f3y72_68">This release <a href="#stable-features-guard-conditions-non-local-break-and-continue-and-multi-dollar-interpolation" id="z9f3y72_74">promotes</a> guard conditions, non-local <code class="code" id="z9f3y72_75">break</code> and <code class="code" id="z9f3y72_76">continue</code>, and multi-dollar interpolation to <a href="components-stability.html#stability-levels-explained" id="z9f3y72_77">Stable</a>. Additionally, several features, such as <a href="#preview-of-context-parameters" id="z9f3y72_78">context parameters</a> and <a href="#preview-of-context-sensitive-resolution" id="z9f3y72_79">context-sensitive resolution</a>, are introduced in preview.</p><section class="chapter"><h3 id="preview-of-context-parameters" data-toc="preview-of-context-parameters" data-label-id="experimental-general">Preview of context parameters</h3><p id="z9f3y72_81">Context parameters allow functions and properties to declare dependencies that are implicitly available in the surrounding context.</p><p id="z9f3y72_82">With context parameters, you don't need to manually pass around values, such as services or dependencies, that are shared and rarely change across sets of function calls.</p><p id="z9f3y72_83">Context parameters replace an older experimental feature called context receivers. To migrate from context receivers to context parameters, you can use assisted support in IntelliJ IDEA, as described in the <a href="https://blog.jetbrains.com/kotlin/2025/04/update-on-context-parameters/" id="z9f3y72_89" data-external="true" rel="noopener noreferrer" target="_blank">blog post</a>.</p><p id="z9f3y72_84">The main difference is that context parameters are not introduced as receivers in the body of a function. As a result, you need to use the name of the context parameters to access their members, unlike with context receivers, where the context is implicitly available.</p><p id="z9f3y72_85">Context parameters in Kotlin represent a significant improvement in managing dependencies through simplified dependency injection, improved DSL design, and scoped operations. For more information, see the feature's <a href="https://github.com/Kotlin/KEEP/blob/context-parameters/proposals/context-parameters.md" id="z9f3y72_90" data-external="true" rel="noopener noreferrer" target="_blank">KEEP</a>.</p><section class="chapter"><h4 id="how-to-declare-context-parameters" data-toc="how-to-declare-context-parameters">How to declare context parameters</h4><p id="z9f3y72_91">You can declare context parameters for properties and functions using the <code class="code" id="z9f3y72_95">context</code> keyword followed by a list of parameters, each of the form <code class="code" id="z9f3y72_96">name: Type</code>. Here is an example with a dependency on the <code class="code" id="z9f3y72_97">UserService</code> interface:</p><div class="code-block" data-lang="kotlin">
// UserService defines the dependency required in the context 
interface UserService {
    fun log(message: String)
    fun findUserById(id: Int): String
}

// Declares a function with a context parameter
context(users: UserService)
fun outputMessage(message: String) {
    // Uses log from the context
    users.log(&quot;Log: $message&quot;)
}

// Declares a property with a context parameter
context(users: UserService)
val firstUser: String
    // Uses findUserById from the context    
    get() = users.findUserById(1)
</div><p id="z9f3y72_93">You can use <code class="code" id="z9f3y72_98">_</code> as a context parameter name. In this case, the parameter's value is available for resolution but is not accessible by name inside the block:</p><div class="code-block" data-lang="kotlin">
// Uses &quot;_&quot; as context parameter name
context(_: UserService)
fun logWelcome() {
    // Finds the appropriate log function from UserService
    outputMessage(&quot;Welcome!&quot;)
}
</div></section><section class="chapter"><h4 id="how-to-enable-context-parameters" data-toc="how-to-enable-context-parameters">How to enable context parameters</h4><p id="z9f3y72_99">To enable context parameters in your project, use the following compiler option in the command line:</p><div class="code-block" data-lang="bash">
-Xcontext-parameters
</div><p id="z9f3y72_101">Or add it to the <code class="code" id="z9f3y72_104">compilerOptions {}</code> block of your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xcontext-parameters&quot;)
    }
}
</div><aside class="prompt" data-type="warning" data-title="" id="z9f3y72_103"><p id="z9f3y72_105">Specifying both <code class="code" id="z9f3y72_106">-Xcontext-receivers</code> and <code class="code" id="z9f3y72_107">-Xcontext-parameters</code> compiler options simultaneously leads to an error.</p></aside></section><section class="chapter"><h4 id="leave-your-feedback" data-toc="leave-your-feedback">Leave your feedback</h4><p id="z9f3y72_108">This feature is planned to be stabilized and improved in future Kotlin releases. We would appreciate your feedback on our issue tracker, <a href="https://youtrack.jetbrains.com/issue/KT-10468/Context-Parameters-expanding-extension-receivers-to-work-with-scopes" id="z9f3y72_109" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>.</p></section></section><section class="chapter"><h3 id="preview-of-context-sensitive-resolution" data-toc="preview-of-context-sensitive-resolution" data-label-id="experimental-general">Preview of context-sensitive resolution</h3><p id="z9f3y72_111">Kotlin 2.2.0 introduces an implementation of context-sensitive resolution in preview.</p><p id="z9f3y72_112">Previously, you had to write the full name of enum entries or sealed class members, even when the type could be inferred from the context. For example:</p><div class="code-block" data-lang="kotlin">
enum class Problem {
    CONNECTION, AUTHENTICATION, DATABASE, UNKNOWN
}

fun message(problem: Problem): String = when (problem) {
    Problem.CONNECTION -&gt; &quot;connection&quot;
    Problem.AUTHENTICATION -&gt; &quot;authentication&quot;
    Problem.DATABASE -&gt; &quot;database&quot;
    Problem.UNKNOWN -&gt; &quot;unknown&quot;
}
</div><p id="z9f3y72_114">Now, with context-sensitive resolution, you can omit the type name in contexts where the expected type is known:</p><div class="code-block" data-lang="kotlin">
enum class Problem {
    CONNECTION, AUTHENTICATION, DATABASE, UNKNOWN
}

// Resolves enum entries based on the known type of problem
fun message(problem: Problem): String = when (problem) {
    CONNECTION -&gt; &quot;connection&quot;
    AUTHENTICATION -&gt; &quot;authentication&quot;
    DATABASE -&gt; &quot;database&quot;
    UNKNOWN -&gt; &quot;unknown&quot;
}
</div><p id="z9f3y72_116">The compiler uses this contextual type information to resolve the correct member. This information includes, among other things:</p><ul class="list _bullet" id="z9f3y72_117"><li class="list__item" id="z9f3y72_124"><p id="z9f3y72_130">The subject of a <code class="code" id="z9f3y72_131">when</code> expression</p></li><li class="list__item" id="z9f3y72_125"><p id="z9f3y72_132">An explicit return type</p></li><li class="list__item" id="z9f3y72_126"><p id="z9f3y72_133">A declared variable type</p></li><li class="list__item" id="z9f3y72_127"><p id="z9f3y72_134">Type checks (<code class="code" id="z9f3y72_135">is</code>) and casts (<code class="code" id="z9f3y72_136">as</code>)</p></li><li class="list__item" id="z9f3y72_128"><p id="z9f3y72_137">The known type of a sealed class hierarchy</p></li><li class="list__item" id="z9f3y72_129"><p id="z9f3y72_138">The declared type of a parameter</p></li></ul><aside class="prompt" data-type="note" data-title="" id="z9f3y72_118"><p id="z9f3y72_139">Context-sensitive resolution doesn't apply to functions, properties with parameters, or extension properties with receivers.</p></aside><p id="z9f3y72_119">To try out context-sensitive resolution in your project, use the following compiler option in the command line:</p><div class="code-block" data-lang="bash">
-Xcontext-sensitive-resolution
</div><p id="z9f3y72_121">Or add it to the <code class="code" id="z9f3y72_140">compilerOptions {}</code> block of your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xcontext-sensitive-resolution&quot;)
    }
}
</div><p id="z9f3y72_123">We plan to stabilize and improve this feature in future Kotlin releases and would appreciate your feedback on our issue tracker <a href="https://youtrack.jetbrains.com/issue/KT-16768/Context-sensitive-resolution" id="z9f3y72_141" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>.</p></section><section class="chapter"><h3 id="preview-of-features-for-annotation-use-site-targets" data-toc="preview-of-features-for-annotation-use-site-targets" data-label-id="experimental-general">Preview of features for annotation use-site targets</h3><p id="z9f3y72_143">Kotlin 2.2.0 introduces a couple of features that make working with annotation use-site targets more convenient.</p><section class="chapter"><h4 id="all-meta-target-for-properties" data-toc="all-meta-target-for-properties" data-label-id="experimental-general"><code class="code" id="z9f3y72_162">@all</code> meta-target for properties</h4><p id="z9f3y72_148">Kotlin allows you to attach annotations to specific parts of a declaration, known as <a href="annotations.html#annotation-use-site-targets" id="z9f3y72_163">use-site targets</a>. However, annotating each target individually was complex and error-prone:</p><div class="code-block" data-lang="kotlin">
data class User(
    val username: String,

    @param:Email      // Constructor parameter
    @field:Email      // Backing field
    @get:Email        // Getter method
    @property:Email   // Kotlin property reference
    val email: String,
) {
    @field:Email
    @get:Email
    @property:Email
    val secondaryEmail: String? = null
}
</div><p id="z9f3y72_150">To simplify this, Kotlin introduces the new <code class="code" id="z9f3y72_164">@all</code> meta-target for properties. This feature tells the compiler to apply the annotation to all relevant parts of the property. When you use it, <code class="code" id="z9f3y72_165">@all</code> attempts to apply the annotation to:</p><ul class="list _bullet" id="z9f3y72_151"><li class="list__item" id="z9f3y72_166"><p id="z9f3y72_172"><span class="control" id="z9f3y72_173"><code class="code" id="z9f3y72_174">param</code></span>: the constructor parameter, if declared in the primary constructor.</p></li><li class="list__item" id="z9f3y72_167"><p id="z9f3y72_175"><span class="control" id="z9f3y72_176"><code class="code" id="z9f3y72_177">property</code></span>: the Kotlin property itself.</p></li><li class="list__item" id="z9f3y72_168"><p id="z9f3y72_178"><span class="control" id="z9f3y72_179"><code class="code" id="z9f3y72_180">field</code></span>: the backing field, if it exists.</p></li><li class="list__item" id="z9f3y72_169"><p id="z9f3y72_181"><span class="control" id="z9f3y72_182"><code class="code" id="z9f3y72_183">get</code></span>: the getter method.</p></li><li class="list__item" id="z9f3y72_170"><p id="z9f3y72_184"><span class="control" id="z9f3y72_185"><code class="code" id="z9f3y72_187">set_param</code></span>: the parameter of the setter method, if the property is defined as <code class="code" id="z9f3y72_186">var</code>.</p></li><li class="list__item" id="z9f3y72_171"><p id="z9f3y72_188"><span class="control" id="z9f3y72_189"><code class="code" id="z9f3y72_192">RECORD_COMPONENT</code></span>: if the class is a <code class="code" id="z9f3y72_190">@JvmRecord</code>, the annotation applies to the <a href="#improved-support-for-annotating-jvm-records" id="z9f3y72_191">Java record component</a>. This behavior mimics the way Java handles annotations on record components.</p></li></ul><p id="z9f3y72_152">The compiler only applies the annotation to the targets for the given property.</p><p id="z9f3y72_153">In the example below, the <code class="code" id="z9f3y72_193">@Email</code> annotation is applied to all relevant targets of each property:</p><div class="code-block" data-lang="kotlin">
data class User(
    val username: String,

    // Applies @Email to param, property, field,
    // get, and set_param (if var)
    @all:Email val email: String,
) {
    // Applies @Email to property, field, and getter 
    // (no param since it's not in the constructor)
    @all:Email val secondaryEmail: String? = null
}
</div><p id="z9f3y72_155">You can use the <code class="code" id="z9f3y72_194">@all</code> meta-target with any property, both inside and outside the primary constructor. However, you can't use the <code class="code" id="z9f3y72_195">@all</code> meta-target with <a href="https://kotlinlang.org/spec/syntax-and-grammar.html#grammar-rule-annotation" id="z9f3y72_196" data-external="true" rel="noopener noreferrer" target="_blank">multiple annotations</a>.</p><p id="z9f3y72_156">This new feature simplifies the syntax, ensures consistency, and improves interoperability with Java records.</p><p id="z9f3y72_157">To enable the <code class="code" id="z9f3y72_197">@all</code> meta-target in your project, use the following compiler option in the command line:</p><div class="code-block" data-lang="bash">
-Xannotation-target-all
</div><p id="z9f3y72_159">Or add it to the <code class="code" id="z9f3y72_198">compilerOptions {}</code> block of your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xannotation-target-all&quot;)
    }
}
</div><p id="z9f3y72_161">This feature is in preview. Please report any problems to our issue tracker, <a href="https://kotl.in/issue" id="z9f3y72_199" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>. For more information about the <code class="code" id="z9f3y72_200">@all</code> meta-target, read this <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/annotation-target-in-properties.md" id="z9f3y72_201" data-external="true" rel="noopener noreferrer" target="_blank">KEEP</a> proposal.</p></section><section class="chapter"><h4 id="new-defaulting-rules-for-use-site-annotation-targets" data-toc="new-defaulting-rules-for-use-site-annotation-targets" data-label-id="experimental-general">New defaulting rules for use-site annotation targets</h4><p id="z9f3y72_203">Kotlin 2.2.0 introduces new defaulting rules for propagating annotations to parameters, fields, and properties. Where previously an annotation was applied by default only to one of <code class="code" id="z9f3y72_214">param</code>, <code class="code" id="z9f3y72_215">property</code>, or <code class="code" id="z9f3y72_216">field</code>, defaults are now more in line with what is expected of an annotation.</p><p id="z9f3y72_204">If there are multiple applicable targets, one or more is chosen as follows:</p><ul class="list _bullet" id="z9f3y72_205"><li class="list__item" id="z9f3y72_217"><p id="z9f3y72_220">If the constructor parameter target (<code class="code" id="z9f3y72_221">param</code>) is applicable, it is used.</p></li><li class="list__item" id="z9f3y72_218"><p id="z9f3y72_222">If the property target (<code class="code" id="z9f3y72_223">property</code>) is applicable, it is used.</p></li><li class="list__item" id="z9f3y72_219"><p id="z9f3y72_224">If the field target (<code class="code" id="z9f3y72_225">field</code>) is applicable while <code class="code" id="z9f3y72_226">property</code> isn't, <code class="code" id="z9f3y72_227">field</code> is used.</p></li></ul><p id="z9f3y72_206">If there are multiple targets, and none of <code class="code" id="z9f3y72_228">param</code>, <code class="code" id="z9f3y72_229">property</code>, or <code class="code" id="z9f3y72_230">field</code> are applicable, the annotation results in an error.</p><p id="z9f3y72_207">To enable this feature, add it to the <code class="code" id="z9f3y72_231">compilerOptions {}</code> block of your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xannotation-default-target=param-property&quot;)
    }
}
</div><p id="z9f3y72_209">Or use the command-line argument for the compiler:</p><div class="code-block" data-lang="bash">
-Xannotation-default-target=param-property
</div><p id="z9f3y72_211">Whenever you'd like to use the old behavior, you can:</p><ul class="list _bullet" id="z9f3y72_212"><li class="list__item" id="z9f3y72_232"><p id="z9f3y72_234">In a specific case, define the necessary target explicitly, for example, using <code class="code" id="z9f3y72_235">@param:Annotation</code> instead of <code class="code" id="z9f3y72_236">@Annotation</code>.</p></li><li class="list__item" id="z9f3y72_233"><p id="z9f3y72_237">For a whole project, use this flag in your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xannotation-default-target=first-only&quot;)
    }
}
</div></li></ul><p id="z9f3y72_213">This feature is in preview. Please report any problems to our issue tracker, <a href="https://kotl.in/issue" id="z9f3y72_239" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>. For more information about the new defaulting rules for annotation use-site targets, read this <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/annotation-target-in-properties.md" id="z9f3y72_240" data-external="true" rel="noopener noreferrer" target="_blank">KEEP</a> proposal.</p></section></section><section class="chapter"><h3 id="support-for-nested-type-aliases" data-toc="support-for-nested-type-aliases" data-label-id="beta">Support for nested type aliases</h3><p id="z9f3y72_242">Previously, you could only declare <a href="type-aliases.html" id="z9f3y72_249">type aliases</a> at the top level of a Kotlin file. This meant that even internal or domain-specific type aliases had to live outside the class where they were used.</p><p id="z9f3y72_243">Starting from 2.2.0, you can define type aliases inside other declarations, as long as they don't capture type parameters from their outer class:</p><div class="code-block" data-lang="kotlin">
class Dijkstra {
    typealias VisitedNodes = Set&lt;Node&gt;

    private fun step(visited: VisitedNodes, ...) = ...
}
</div><p id="z9f3y72_245">Nested type aliases have a few additional constraints, like not being able to mention type parameters. Check the <a href="type-aliases.html#nested-type-aliases" id="z9f3y72_250">documentation</a> for the entire set of rules.</p><p id="z9f3y72_246">Nested type aliases allow for cleaner, more maintainable code by improving encapsulation, reducing package-level clutter, and simplifying internal implementations.</p><section class="chapter"><h4 id="how-to-enable-nested-type-aliases" data-toc="how-to-enable-nested-type-aliases">How to enable nested type aliases</h4><p id="z9f3y72_251">To enable nested type aliases in your project, use the following compiler option in the command line:</p><div class="code-block" data-lang="bash">
-Xnested-type-aliases
</div><p id="z9f3y72_253">Or add it to the <code class="code" id="z9f3y72_255">compilerOptions {}</code> block of your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xnested-type-aliases&quot;)
    }
}
</div></section><section class="chapter"><h4 id="share-your-feedback" data-toc="share-your-feedback">Share your feedback</h4><p id="z9f3y72_256">Nested type aliases are currently in <a href="components-stability.html#stability-levels-explained" id="z9f3y72_257">Beta</a>. Please report any problems to our issue tracker, <a href="https://kotl.in/issue" id="z9f3y72_258" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>. For more information about this feature, read this <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/nested-typealias.md" id="z9f3y72_259" data-external="true" rel="noopener noreferrer" target="_blank">KEEP</a> proposal.</p></section></section><section class="chapter"><h3 id="stable-features-guard-conditions-non-local-break-and-continue-and-multi-dollar-interpolation" data-toc="stable-features-guard-conditions-non-local-break-and-continue-and-multi-dollar-interpolation">Stable features: guard conditions, non-local <code class="code" id="z9f3y72_264">break</code> and <code class="code" id="z9f3y72_265">continue</code>, and multi-dollar interpolation</h3><p id="z9f3y72_261">In Kotlin 2.1.0, several new language features were introduced in preview. We're happy to announce that the following language features are now <a href="components-stability.html#stability-levels-explained" id="z9f3y72_266">Stable</a> in this release:</p><ul class="list _bullet" id="z9f3y72_262"><li class="list__item" id="z9f3y72_267"><p id="z9f3y72_270"><a href="whatsnew21.html#guard-conditions-in-when-with-a-subject" id="z9f3y72_271">Guard conditions in <code class="code" id="z9f3y72_272">when</code> with a subject</a></p></li><li class="list__item" id="z9f3y72_268"><p id="z9f3y72_273"><a href="whatsnew21.html#non-local-break-and-continue" id="z9f3y72_274">Non-local <code class="code" id="z9f3y72_275">break</code> and <code class="code" id="z9f3y72_276">continue</code></a></p></li><li class="list__item" id="z9f3y72_269"><p id="z9f3y72_277"><a href="whatsnew21.html#multi-dollar-string-interpolation" id="z9f3y72_278">Multi-dollar interpolation: improved handling of <code class="code" id="z9f3y72_279">$</code> in string literals</a></p></li></ul><p id="z9f3y72_263"><a href="kotlin-language-features-and-proposals.html" id="z9f3y72_280">See the full list of Kotlin language design features and proposals</a>.</p></section></section><section class="chapter"><h2 id="kotlin-compiler-unified-management-of-compiler-warnings" data-toc="kotlin-compiler-unified-management-of-compiler-warnings" data-label-id="experimental-general">Kotlin compiler: unified management of compiler warnings</h2><p id="z9f3y72_282">Kotlin 2.2.0 introduces a new compiler option, <code class="code" id="z9f3y72_288">-Xwarning-level</code>. It's designed to provide a unified way of managing compiler warnings in Kotlin projects.</p><p id="z9f3y72_283">Previously, you could only apply general module-wide rules, like disabling all warnings with <code class="code" id="z9f3y72_289">-nowarn</code>, turning all warnings to compilation errors with <code class="code" id="z9f3y72_290">-Werror</code>, or enabling additional compiler checks with <code class="code" id="z9f3y72_291">-Wextra</code>. The only option to adjust them for specific warnings was the <code class="code" id="z9f3y72_292">-Xsuppress-warning</code> option.</p><p id="z9f3y72_284">With the new solution, you can override general rules and exclude specific diagnostics in a consistent way.</p><section class="chapter"><h3 id="how-to-apply" data-toc="how-to-apply">How to apply</h3><p id="z9f3y72_293">The new compiler option has the following syntax:</p><div class="code-block" data-lang="bash">
-Xwarning-level=DIAGNOSTIC_NAME:(error|warning|disabled)
</div><ul class="list _bullet" id="z9f3y72_295"><li class="list__item" id="z9f3y72_297"><p id="z9f3y72_300"><code class="code" id="z9f3y72_301">error</code>: raises the specified warning to an error.</p></li><li class="list__item" id="z9f3y72_298"><p id="z9f3y72_302"><code class="code" id="z9f3y72_303">warning</code>: emits a warning and is enabled by default.</p></li><li class="list__item" id="z9f3y72_299"><p id="z9f3y72_304"><code class="code" id="z9f3y72_305">disabled</code>: completely suppresses the specified warning module-wide.</p></li></ul><p id="z9f3y72_296">Keep in mind that you can only configure the severity level of <span class="emphasis" id="z9f3y72_306">warnings</span> with the new compiler option.</p></section><section class="chapter"><h3 id="use-cases" data-toc="use-cases">Use cases</h3><p id="z9f3y72_307">With the new solution, you can better fine-tune warning reporting in your project by combining general rules with specific ones. Choose your use case:</p><section class="chapter"><h4 id="suppress-warnings" data-toc="suppress-warnings">Suppress warnings</h4><div class="table-wrapper"><table class="wide" id="z9f3y72_312"><thead><tr class="ijRowHead" id="z9f3y72_313"><th id="z9f3y72_317"><p>Command</p></th><th id="z9f3y72_318"><p>Description</p></th></tr></thead><tbody><tr id="z9f3y72_314"><td id="z9f3y72_319"><p><a href="compiler-reference.html#nowarn" id="z9f3y72_321"><code class="code" id="z9f3y72_322">-nowarn</code></a></p></td><td id="z9f3y72_320"><p>Suppresses all warnings during compilation.</p></td></tr><tr id="z9f3y72_315"><td id="z9f3y72_323"><p><code class="code" id="z9f3y72_325">-Xwarning-level=DIAGNOSTIC_NAME:disabled</code></p></td><td id="z9f3y72_324"><p>Suppresses only specified warnings.</p></td></tr><tr id="z9f3y72_316"><td id="z9f3y72_326"><p><code class="code" id="z9f3y72_328">-nowarn -Xwarning-level=DIAGNOSTIC_NAME:warning</code></p></td><td id="z9f3y72_327"><p>Suppresses all warnings except for the specified ones.</p></td></tr></tbody></table></div></section><section class="chapter"><h4 id="raise-warnings-to-errors" data-toc="raise-warnings-to-errors">Raise warnings to errors</h4><div class="table-wrapper"><table class="wide" id="z9f3y72_329"><thead><tr class="ijRowHead" id="z9f3y72_330"><th id="z9f3y72_334"><p>Command</p></th><th id="z9f3y72_335"><p>Description</p></th></tr></thead><tbody><tr id="z9f3y72_331"><td id="z9f3y72_336"><p><a href="compiler-reference.html#werror" id="z9f3y72_338"><code class="code" id="z9f3y72_339">-Werror</code></a></p></td><td id="z9f3y72_337"><p>Raises all warnings to compilation errors.</p></td></tr><tr id="z9f3y72_332"><td id="z9f3y72_340"><p><code class="code" id="z9f3y72_342">-Xwarning-level=DIAGNOSTIC_NAME:error</code></p></td><td id="z9f3y72_341"><p>Raises only specified warnings to errors.</p></td></tr><tr id="z9f3y72_333"><td id="z9f3y72_343"><p><code class="code" id="z9f3y72_345">-Werror -Xwarning-level=DIAGNOSTIC_NAME:warning</code></p></td><td id="z9f3y72_344"><p>Raises all warnings to errors except for the specified ones.</p></td></tr></tbody></table></div></section><section class="chapter"><h4 id="enable-additional-compiler-warnings" data-toc="enable-additional-compiler-warnings">Enable additional compiler warnings</h4><div class="table-wrapper"><table class="wide" id="z9f3y72_346"><thead><tr class="ijRowHead" id="z9f3y72_347"><th id="z9f3y72_351"><p>Command</p></th><th id="z9f3y72_352"><p>Description</p></th></tr></thead><tbody><tr id="z9f3y72_348"><td id="z9f3y72_353"><p><a href="compiler-reference.html#wextra" id="z9f3y72_355"><code class="code" id="z9f3y72_356">-Wextra</code></a></p></td><td id="z9f3y72_354"><p>Enables all additional declaration, expression, and type compiler checks that emit warnings if true.</p></td></tr><tr id="z9f3y72_349"><td id="z9f3y72_357"><p><code class="code" id="z9f3y72_359">-Xwarning-level=DIAGNOSTIC_NAME:warning</code></p></td><td id="z9f3y72_358"><p>Enables only specified additional compiler checks.</p></td></tr><tr id="z9f3y72_350"><td id="z9f3y72_360"><p><code class="code" id="z9f3y72_362">-Wextra -Xwarning-level=DIAGNOSTIC_NAME:disabled</code></p></td><td id="z9f3y72_361"><p>Enables all additional checks except for the specified ones.</p></td></tr></tbody></table></div></section><section class="chapter"><h4 id="warning-lists" data-toc="warning-lists">Warning lists</h4><p id="z9f3y72_363">In case you have many warnings you want to exclude from general rules, you can list them in a separate file through <a href="compiler-reference.html#argfile" id="z9f3y72_364"><code class="code" id="z9f3y72_365">@argfile</code></a>.</p></section></section><section class="chapter"><h3 id="leave-feedback" data-toc="leave-feedback">Leave feedback</h3><p id="z9f3y72_366">The new compiler option is still <a href="components-stability.html#stability-levels-explained" id="z9f3y72_367">Experimental</a>. Please report any problems to our issue tracker, <a href="https://kotl.in/issue" id="z9f3y72_368" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>.</p></section></section><section class="chapter"><h2 id="kotlin-jvm" data-toc="kotlin-jvm">Kotlin/JVM</h2><p id="z9f3y72_369">Kotlin 2.2.0 brings many updates to the JVM. The compiler now supports Java 24 bytecode and introduces changes to default method generation for interface functions. The release also simplifies working with annotations in Kotlin metadata, improves Java interop with inline value classes, and includes better support for annotating JVM records.</p><section class="chapter"><h3 id="changes-to-default-method-generation-for-interface-functions" data-toc="changes-to-default-method-generation-for-interface-functions">Changes to default method generation for interface functions</h3><p id="z9f3y72_374">Starting from Kotlin 2.2.0, functions declared in interfaces are compiled to JVM default methods unless configured otherwise. This change affects how Kotlin's interface functions with implementations are compiled to bytecode.</p><p id="z9f3y72_375">This behavior is controlled by the new stable compiler option <code class="code" id="z9f3y72_380">-jvm-default</code>, replacing the deprecated <code class="code" id="z9f3y72_381">-Xjvm-default</code> option.</p><p id="z9f3y72_376">You can control the behavior of the <code class="code" id="z9f3y72_382">-jvm-default</code> option using the following values:</p><ul class="list _bullet" id="z9f3y72_377"><li class="list__item" id="z9f3y72_383"><p id="z9f3y72_386"><code class="code" id="z9f3y72_387">enable</code> (default): generates default implementations in interfaces and includes bridge functions in subclasses and <code class="code" id="z9f3y72_388">DefaultImpls</code> classes. Use this mode to maintain binary compatibility with older Kotlin versions.</p></li><li class="list__item" id="z9f3y72_384"><p id="z9f3y72_389"><code class="code" id="z9f3y72_390">no-compatibility</code>: generates only default implementations in interfaces. This mode skips compatibility bridges and <code class="code" id="z9f3y72_391">DefaultImpls</code> classes, making it suitable for new code.</p></li><li class="list__item" id="z9f3y72_385"><p id="z9f3y72_392"><code class="code" id="z9f3y72_393">disable</code>: disables default implementations in interfaces. Only bridge functions and <code class="code" id="z9f3y72_394">DefaultImpls</code> classes are generated, matching the behavior before Kotlin 2.2.0.</p></li></ul><p id="z9f3y72_378">To configure the <code class="code" id="z9f3y72_395">-jvm-default</code> compiler option, set the <code class="code" id="z9f3y72_396">jvmDefault</code> property in your Gradle Kotlin DSL:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        jvmDefault = JvmDefaultMode.NO_COMPATIBILITY
    }
}
</div></section><section class="chapter"><h3 id="support-for-reading-and-writing-annotations-in-kotlin-metadata" data-toc="support-for-reading-and-writing-annotations-in-kotlin-metadata" data-label-id="experimental-general">Support for reading and writing annotations in Kotlin metadata</h3><p id="z9f3y72_398">Previously, you had to read annotations from compiled JVM class files using reflection or bytecode analysis and manually match them to metadata entries based on signatures. This process was error-prone, especially for overloaded functions.</p><p id="z9f3y72_399">Now, in Kotlin 2.2.0, the <a href="metadata-jvm.html" id="z9f3y72_411">Kotlin Metadata JVM library</a> introduces support for reading annotations stored in Kotlin metadata.</p><p id="z9f3y72_400">To make annotations available in the metadata for your compiled files, add the following compiler option:</p><div class="code-block" data-lang="kotlin">
-Xannotations-in-metadata
</div><p id="z9f3y72_402">Alternatively, add it to the <code class="code" id="z9f3y72_412">compilerOptions {}</code> block of your Gradle build file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    compilerOptions {
        freeCompilerArgs.add(&quot;-Xannotations-in-metadata&quot;)
    }
}
</div><p id="z9f3y72_404">With this option enabled, the Kotlin compiler writes annotations into metadata alongside the JVM bytecode, making them accessible to the <code class="code" id="z9f3y72_413">kotlin-metadata-jvm</code> library.</p><p id="z9f3y72_405">The library provides the following APIs for accessing annotations:</p><ul class="list _bullet" id="z9f3y72_406"><li class="list__item" id="z9f3y72_414"><p id="z9f3y72_425"><code class="code" id="z9f3y72_426">KmClass.annotations</code></p></li><li class="list__item" id="z9f3y72_415"><p id="z9f3y72_427"><code class="code" id="z9f3y72_428">KmFunction.annotations</code></p></li><li class="list__item" id="z9f3y72_416"><p id="z9f3y72_429"><code class="code" id="z9f3y72_430">KmProperty.annotations</code></p></li><li class="list__item" id="z9f3y72_417"><p id="z9f3y72_431"><code class="code" id="z9f3y72_432">KmConstructor.annotations</code></p></li><li class="list__item" id="z9f3y72_418"><p id="z9f3y72_433"><code class="code" id="z9f3y72_434">KmPropertyAccessorAttributes.annotations</code></p></li><li class="list__item" id="z9f3y72_419"><p id="z9f3y72_435"><code class="code" id="z9f3y72_436">KmValueParameter.annotations</code></p></li><li class="list__item" id="z9f3y72_420"><p id="z9f3y72_437"><code class="code" id="z9f3y72_438">KmFunction.extensionReceiverAnnotations</code></p></li><li class="list__item" id="z9f3y72_421"><p id="z9f3y72_439"><code class="code" id="z9f3y72_440">KmProperty.extensionReceiverAnnotations</code></p></li><li class="list__item" id="z9f3y72_422"><p id="z9f3y72_441"><code class="code" id="z9f3y72_442">KmProperty.backingFieldAnnotations</code></p></li><li class="list__item" id="z9f3y72_423"><p id="z9f3y72_443"><code class="code" id="z9f3y72_444">KmProperty.delegateFieldAnnotations</code></p></li><li class="list__item" id="z9f3y72_424"><p id="z9f3y72_445"><code class="code" id="z9f3y72_446">KmEnumEntry.annotations</code></p></li></ul><p id="z9f3y72_407">These APIs are <a href="components-stability.html#stability-levels-explained" id="z9f3y72_447">Experimental</a>. To opt in, use the <code class="code" id="z9f3y72_448">@OptIn(ExperimentalAnnotationsInMetadata::class)</code> annotation.</p><p id="z9f3y72_408">Here's an example of reading annotations from Kotlin metadata:</p><div class="code-block" data-lang="kotlin">
@file:OptIn(ExperimentalAnnotationsInMetadata::class)

import kotlin.metadata.ExperimentalAnnotationsInMetadata
import kotlin.metadata.jvm.KotlinClassMetadata

annotation class Label(val value: String)

@Label(&quot;Message class&quot;)
class Message

fun main() {
    val metadata = Message::class.java.getAnnotation(Metadata::class.java)
    val kmClass = (KotlinClassMetadata.readStrict(metadata) as KotlinClassMetadata.Class).kmClass
    println(kmClass.annotations)
    // [@Label(value = StringValue(&quot;Message class&quot;))]
}
</div><aside class="prompt" data-type="warning" data-title="" id="z9f3y72_410"><p id="z9f3y72_449">If you use the <code class="code" id="z9f3y72_451">kotlin-metadata-jvm</code> library in your projects, we recommend testing and updating your code to support annotations. Otherwise, when annotations in metadata become <a href="https://youtrack.jetbrains.com/issue/KT-75736" id="z9f3y72_452" data-external="true" rel="noopener noreferrer" target="_blank">enabled by default</a> in a future Kotlin version, your projects may produce invalid or incomplete metadata.</p><p id="z9f3y72_450">If you experience any problems, please report them in our <a href="https://youtrack.jetbrains.com/issue/KT-31857" id="z9f3y72_453" data-external="true" rel="noopener noreferrer" target="_blank">issue tracker</a>.</p></aside></section><section class="chapter"><h3 id="improved-java-interop-with-inline-value-classes" data-toc="improved-java-interop-with-inline-value-classes" data-label-id="experimental-general">Improved Java interop with inline value classes</h3><p id="z9f3y72_455">Kotlin 2.2.0 introduces a new experimental annotation: <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.jvm/-jvm-expose-boxed/" id="z9f3y72_471" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_473">@JvmExposeBoxed</code></a>. This annotation makes it easier to consume <a href="inline-classes.html" id="z9f3y72_472">inline value classes</a> from Java.</p><p id="z9f3y72_456">By default, Kotlin compiles inline value classes to use <span class="control" id="z9f3y72_474">unboxed representations</span>, which are more performant but often hard or even impossible to use from Java. For example:</p><div class="code-block" data-lang="kotlin">
@JvmInline value class PositiveInt(val number: Int) {
    init { require(number &gt;= 0) }
}
</div><p id="z9f3y72_458">In this case, because the class is unboxed, there is no constructor available for Java to call. There's also no way for Java to trigger the <code class="code" id="z9f3y72_475">init</code> block to ensure that <code class="code" id="z9f3y72_476">number</code> is positive.</p><p id="z9f3y72_459">When you annotate the class with <code class="code" id="z9f3y72_477">@JvmExposeBoxed</code>, Kotlin generates a public constructor that Java can call directly, ensuring that the <code class="code" id="z9f3y72_478">init</code> block also runs.</p><p id="z9f3y72_460">You can apply the <code class="code" id="z9f3y72_479">@JvmExposeBoxed</code> annotation at the class, constructor, or function level to gain fine-grained control over what's exposed to Java.</p><p id="z9f3y72_461">For example, in the following code, the extension function <code class="code" id="z9f3y72_480">.timesTwoBoxed()</code> is <span class="control" id="z9f3y72_481">not</span> accessible from Java:</p><div class="code-block" data-lang="kotlin">
@JvmInline
value class MyInt(val value: Int)

fun MyInt.timesTwoBoxed(): MyInt = MyInt(this.value * 2)
</div><p id="z9f3y72_463">To make it possible to create an instance of the <code class="code" id="z9f3y72_482">MyInt</code> class and call the <code class="code" id="z9f3y72_483">.timesTwoBoxed()</code> function from Java code, add the <code class="code" id="z9f3y72_484">@JvmExposeBoxed</code> annotation to both the class and the function:</p><div class="code-block" data-lang="kotlin">
@JvmExposeBoxed
@JvmInline
value class MyInt(val value: Int)

@JvmExposeBoxed
fun MyInt.timesTwoBoxed(): MyInt = MyInt(this.value * 2)
</div><p id="z9f3y72_465">With these annotations, the Kotlin compiler generates a Java-accessible constructor for the <code class="code" id="z9f3y72_485">MyInt</code> class. It also generates an overload for the extension function that uses the boxed form of the value class. As a result, the following Java code runs successfully:</p><div class="code-block" data-lang="java">
MyInt input = new MyInt(5);
MyInt output = ExampleKt.timesTwoBoxed(input);
</div><p id="z9f3y72_467">If you don't want to annotate every part of the inline value classes that you want to expose, you can effectively apply the annotation to a whole module. To apply this behavior to a module, compile it with the <code class="code" id="z9f3y72_486">-Xjvm-expose-boxed</code> option. Compiling with this option has the same effect as if every declaration in the module had the <code class="code" id="z9f3y72_487">@JvmExposeBoxed</code> annotation.</p><p id="z9f3y72_468">This new annotation does not change how Kotlin compiles or uses value classes internally, and all existing compiled code remains valid. It simply adds new capabilities to improve Java interoperability. The performance of Kotlin code using value classes is not impacted.</p><p id="z9f3y72_469">The <code class="code" id="z9f3y72_488">@JvmExposeBoxed</code> annotation is useful for library authors who want to expose boxed variants of member functions and receive boxed return types. It eliminates the need to choose between an inline value class (efficient but Kotlin-only) and a data class (Java-compatible but always boxed).</p><p id="z9f3y72_470">For a more detailed explanation of how the <code class="code" id="z9f3y72_489">@JvmExposedBoxed</code> annotation works and the problems it solves, see this <a href="https://github.com/Kotlin/KEEP/blob/jvm-expose-boxed/proposals/jvm-expose-boxed.md" id="z9f3y72_490" data-external="true" rel="noopener noreferrer" target="_blank">KEEP</a> proposal.</p></section><section class="chapter"><h3 id="improved-support-for-annotating-jvm-records" data-toc="improved-support-for-annotating-jvm-records">Improved support for annotating JVM records</h3><p id="z9f3y72_491">Kotlin has supported <a href="jvm-records.html" id="z9f3y72_501">JVM records</a> since Kotlin 1.5.0. Now, Kotlin 2.2.0 improves how Kotlin handles annotations on record components, particularly in relation to Java's <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#RECORD_COMPONENT" id="z9f3y72_502" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_503">RECORD_COMPONENT</code></a> target.</p><p id="z9f3y72_492">Firstly, if you want to use a <code class="code" id="z9f3y72_504">RECORD_COMPONENT</code> as an annotation target, you need to manually add annotations for Kotlin (<code class="code" id="z9f3y72_505">@Target</code>) and Java. This is because Kotlin's <code class="code" id="z9f3y72_506">@Target</code> annotation doesn't support <code class="code" id="z9f3y72_507">RECORD_COMPONENT</code>. For example:</p><div class="code-block" data-lang="kotlin">
@Target(AnnotationTarget.CLASS, AnnotationTarget.PROPERTY)
@java.lang.annotation.Target(ElementType.CLASS, ElementType.RECORD_COMPONENT)
annotation class exampleClass
</div><p id="z9f3y72_494">Maintaining both lists manually can be error-prone, so Kotlin 2.2.0 introduces a compiler warning if the Kotlin and Java targets don't match. For instance, if you omit <code class="code" id="z9f3y72_508">ElementType.CLASS</code> in the Java target list, the compiler reports:</p><div class="code-block" data-lang="none">
Incompatible annotation targets: Java target 'CLASS' missing, corresponding to Kotlin targets 'CLASS'.
</div><p id="z9f3y72_496">Secondly, Kotlin's behavior differs from Java when it comes to propagating annotations in records. In Java, annotations on a record component automatically apply to the backing field, getter, and constructor parameter. Kotlin doesn't do this by default, but you can now replicate the behavior using the <a href="#all-meta-target-for-properties" id="z9f3y72_509"><code class="code" id="z9f3y72_510">@all:</code> use-site target</a>.</p><p id="z9f3y72_497">For example:</p><div class="code-block" data-lang="kotlin">
@JvmRecord
data class Person(val name: String, @all:Positive val age: Int)
</div><p id="z9f3y72_499">When you use <code class="code" id="z9f3y72_511">@JvmRecord</code> with <code class="code" id="z9f3y72_512">@all:</code>, Kotlin now:</p><ul class="list _bullet" id="z9f3y72_500"><li class="list__item" id="z9f3y72_513"><p id="z9f3y72_515">Propagates the annotation to the property, backing field, constructor parameter, and getter.</p></li><li class="list__item" id="z9f3y72_514"><p id="z9f3y72_516">Applies the annotation to the record component, as well, if the annotation supports Java's <code class="code" id="z9f3y72_517">RECORD_COMPONENT</code>.</p></li></ul></section></section><section class="chapter"><h2 id="kotlin-native" data-toc="kotlin-native">Kotlin/Native</h2><p id="z9f3y72_518">Starting with 2.2.0, Kotlin/Native uses LLVM 19. This release also brings several experimental features designed to track and adjust memory consumption.</p><section class="chapter"><h3 id="per-object-memory-allocation" data-toc="per-object-memory-allocation" data-label-id="experimental-opt-in">Per-object memory allocation</h3><p id="z9f3y72_525">Kotlin/Native's <a href="https://github.com/JetBrains/kotlin/blob/master/kotlin-native/runtime/src/alloc/custom/README.md" id="z9f3y72_530" data-external="true" rel="noopener noreferrer" target="_blank">memory allocator</a> can now reserve memory on a per-object basis. In some cases, it may help you satisfy strict memory limitations or reduce memory consumption on the application's startup.</p><p id="z9f3y72_526">The new feature is designed to replace the <code class="code" id="z9f3y72_531">-Xallocator=std</code> compiler option, which enabled the system memory allocator instead of the default one. Now, you can disable buffering (paging of allocations) without switching memory allocators.</p><p id="z9f3y72_527">The feature is currently <a href="components-stability.html#stability-levels-explained" id="z9f3y72_532">Experimental</a>. To enable it, set the following option in your <code class="code" id="z9f3y72_533">gradle.properties</code> file:</p><div class="code-block" data-lang="none">
kotlin.native.binary.pagedAllocator=false
</div><p id="z9f3y72_529">Please report any problems to our issue tracker, <a href="https://kotl.in/issue" id="z9f3y72_534" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a>.</p></section><section class="chapter"><h3 id="support-for-latin-1-encoded-strings-at-runtime" data-toc="support-for-latin-1-encoded-strings-at-runtime" data-label-id="experimental-opt-in">Support for Latin-1 encoded strings at runtime</h3><p id="z9f3y72_536">Kotlin now supports Latin-1-encoded strings, similarly to the <a href="https://openjdk.org/jeps/254" id="z9f3y72_541" data-external="true" rel="noopener noreferrer" target="_blank">JVM</a>. This should help reduce the application's binary size and adjust memory consumption.</p><p id="z9f3y72_537">By default, strings in Kotlin are stored using UTF-16 encoding, where each character is represented by two bytes. In some cases, this leads to strings taking up twice as much space in the binary compared to the source code, and reading data from a simple ASCII file can take up twice as much memory as storing the file on disk.</p><p id="z9f3y72_538">In turn, <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" id="z9f3y72_542" data-external="true" rel="noopener noreferrer" target="_blank">Latin-1 (ISO 8859-1)</a> encoding represents each of the first 256 Unicode characters with just one byte. With Latin-1 support enabled, strings are stored in Latin-1 encoding as long as all the characters fall within its range. Otherwise, the default UTF-16 encoding is used.</p><section class="chapter"><h4 id="how-to-enable-latin-1-support" data-toc="how-to-enable-latin-1-support">How to enable Latin-1 support</h4><p id="z9f3y72_543">The feature is currently <a href="components-stability.html#stability-levels-explained" id="z9f3y72_545">Experimental</a>. To enable it, set the following option in your <code class="code" id="z9f3y72_546">gradle.properties</code> file:</p><div class="code-block" data-lang="none">
kotlin.native.binary.latin1Strings=true
</div></section><section class="chapter"><h4 id="known-issues" data-toc="known-issues">Known issues</h4><p id="z9f3y72_547">As long as the feature is Experimental, the cinterop extension functions <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlinx.cinterop/pin.html" id="z9f3y72_550" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_553">String.pin</code></a>, <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlinx.cinterop/use-pinned.html" id="z9f3y72_551" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_554">String.usePinned</code></a>, and <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlinx.cinterop/ref-to.html" id="z9f3y72_552" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_555">String.refTo</code></a> become less efficient. Each call to them may trigger automatic string conversion to UTF-16.</p><p id="z9f3y72_548">The Kotlin team is very grateful to our colleagues at Google and <a href="https://github.com/pyos" id="z9f3y72_556" data-external="true" rel="noopener noreferrer" target="_blank">Sonya Valchuk</a> in particular for implementing this feature.</p><p id="z9f3y72_549">For more information on memory consumption in Kotlin, see the <a href="native-memory-manager.html#memory-consumption" id="z9f3y72_557">documentation</a>.</p></section></section><section class="chapter"><h3 id="improved-tracking-of-memory-consumption-on-apple-platforms" data-toc="improved-tracking-of-memory-consumption-on-apple-platforms">Improved tracking of memory consumption on Apple platforms</h3><p id="z9f3y72_558">Starting with Kotlin 2.2.0, memory allocated by Kotlin code is now tagged. This can help you debug memory issues on Apple platforms.</p><p id="z9f3y72_559">When inspecting your application's high memory usage, you can now identify how much memory is reserved by Kotlin code. Kotlin's share is tagged with an identifier and can be tracked through tools like VM Tracker in Xcode Instruments.</p><p id="z9f3y72_560">This feature is enabled by default but is available only in the Kotlin/Native default memory allocator when <span class="emphasis" id="z9f3y72_563">all</span> the following conditions are met:</p><ul class="list _bullet" id="z9f3y72_561"><li class="list__item" id="z9f3y72_564"><p id="z9f3y72_567"><span class="control" id="z9f3y72_569">Tagging enabled</span>. The memory should be tagged with a valid identifier. Apple recommends numbers between 240 and 255; the default value is 246.</p><p id="z9f3y72_568">If you set up the <code class="code" id="z9f3y72_570">kotlin.native.binary.mmapTag=0</code> Gradle property, tagging is disabled.</p></li><li class="list__item" id="z9f3y72_565"><p id="z9f3y72_571"><span class="control" id="z9f3y72_573">Allocation with mmap</span>. The allocator should use the <code class="code" id="z9f3y72_574">mmap</code> system call to map files into memory.</p><p id="z9f3y72_572">If you set up the <code class="code" id="z9f3y72_575">kotlin.native.binary.disableMmap=true</code> Gradle property, the default allocator uses <code class="code" id="z9f3y72_576">malloc</code> instead of <code class="code" id="z9f3y72_577">mmap</code>.</p></li><li class="list__item" id="z9f3y72_566"><p id="z9f3y72_578"><span class="control" id="z9f3y72_580">Paging enabled</span>. Paging of allocations (buffering) should be enabled.</p><p id="z9f3y72_579">If you set up the <a href="#per-object-memory-allocation" id="z9f3y72_581"><code class="code" id="z9f3y72_582">kotlin.native.binary.pagedAllocator=false</code></a> Gradle property, the memory is reserved on a per-object basis instead.</p></li></ul><p id="z9f3y72_562">For more information on memory consumption in Kotlin, see the <a href="native-memory-manager.html#memory-consumption" id="z9f3y72_583">documentation</a>.</p></section><section class="chapter"><h3 id="llvm-update-from-16-to-19" data-toc="llvm-update-from-16-to-19">LLVM update from 16 to 19</h3><p id="z9f3y72_584">In Kotlin 2.2.0, we updated LLVM from version 16 to 19. The new version includes performance improvements, bug fixes, and security updates.</p><p id="z9f3y72_585">This update shouldn't affect your code, but if you encounter any issues, please report them to our <a href="http://kotl.in/issue" id="z9f3y72_586" data-external="true" rel="noopener noreferrer" target="_blank">issue tracker</a>.</p></section><section class="chapter"><h3 id="windows-7-target-deprecated" data-toc="windows-7-target-deprecated">Windows 7 target deprecated</h3><p id="z9f3y72_587">Starting with Kotlin 2.2.0, the minimal supported Windows version has been raised from Windows 7 to Windows 10. Since Microsoft ended support for Windows 7 in January 2025, we also decided to deprecate this legacy target.</p><p id="z9f3y72_588">For more information, see <a href="native-target-support.html" id="z9f3y72_589">Kotlin/Native target support</a>.</p></section></section><section class="chapter"><h2 id="kotlin-wasm" data-toc="kotlin-wasm">Kotlin/Wasm</h2><p id="z9f3y72_590">In this release, the build infrastructure for the <a href="#build-infrastructure-for-wasm-target-separated-from-javascript-target" id="z9f3y72_593">Wasm target is separated from the JavaScript target</a>. Additionally, now you can configure <a href="#per-project-binaryen-configuration" id="z9f3y72_594">the Binaryen tool per project or module</a>.</p><section class="chapter"><h3 id="build-infrastructure-for-wasm-target-separated-from-javascript-target" data-toc="build-infrastructure-for-wasm-target-separated-from-javascript-target">Build infrastructure for Wasm target separated from JavaScript target</h3><p id="z9f3y72_595">Before, the <code class="code" id="z9f3y72_604">wasmJs</code> target shared the same infrastructure as the <code class="code" id="z9f3y72_605">js</code> target. As a result, both targets were hosted in the same directory (<code class="code" id="z9f3y72_606">build/js</code>) and used the same NPM tasks and configurations.</p><p id="z9f3y72_596">Now, the <code class="code" id="z9f3y72_607">wasmJs</code> target has its own infrastructure separate from the <code class="code" id="z9f3y72_608">js</code> target. This allows Wasm tasks and types to be distinct from JavaScript ones, enabling independent configuration.</p><p id="z9f3y72_597">Additionally, Wasm-related project files and NPM dependencies are now stored in a separate <code class="code" id="z9f3y72_609">build/wasm</code> directory.</p><p id="z9f3y72_598">New NPM-related tasks have been introduced for Wasm, while existing JavaScript tasks are now dedicated only to JavaScript:</p><div class="table-wrapper"><table class="wide" id="z9f3y72_599"><thead><tr class="ijRowHead" id="z9f3y72_610"><th id="z9f3y72_613"><p><span class="control" id="z9f3y72_615">Wasm tasks</span></p></th><th id="z9f3y72_614"><p><span class="control" id="z9f3y72_616">JavaScript tasks</span></p></th></tr></thead><tbody><tr id="z9f3y72_611"><td id="z9f3y72_617"><p><code class="code" id="z9f3y72_619">kotlinWasmNpmInstall</code></p></td><td id="z9f3y72_618"><p><code class="code" id="z9f3y72_620">kotlinNpmInstall</code></p></td></tr><tr id="z9f3y72_612"><td id="z9f3y72_621"><p><code class="code" id="z9f3y72_623">wasmRootPackageJson</code></p></td><td id="z9f3y72_622"><p><code class="code" id="z9f3y72_624">rootPackageJson</code></p></td></tr></tbody></table></div><p id="z9f3y72_600">Similarly, new Wasm-specific declarations have been added:</p><div class="table-wrapper"><table class="wide" id="z9f3y72_601"><thead><tr class="ijRowHead" id="z9f3y72_625"><th id="z9f3y72_632"><p><span class="control" id="z9f3y72_634">Wasm declarations</span></p></th><th id="z9f3y72_633"><p><span class="control" id="z9f3y72_635">JavaScript declarations</span></p></th></tr></thead><tbody><tr id="z9f3y72_626"><td id="z9f3y72_636"><p><code class="code" id="z9f3y72_638">WasmNodeJsRootPlugin</code></p></td><td id="z9f3y72_637"><p><code class="code" id="z9f3y72_639">NodeJsRootPlugin</code></p></td></tr><tr id="z9f3y72_627"><td id="z9f3y72_640"><p><code class="code" id="z9f3y72_642">WasmNodeJsPlugin</code></p></td><td id="z9f3y72_641"><p><code class="code" id="z9f3y72_643">NodeJsPlugin</code></p></td></tr><tr id="z9f3y72_628"><td id="z9f3y72_644"><p><code class="code" id="z9f3y72_646">WasmYarnPlugin</code></p></td><td id="z9f3y72_645"><p><code class="code" id="z9f3y72_647">YarnPlugin</code></p></td></tr><tr id="z9f3y72_629"><td id="z9f3y72_648"><p><code class="code" id="z9f3y72_650">WasmNodeJsRootExtension</code></p></td><td id="z9f3y72_649"><p><code class="code" id="z9f3y72_651">NodeJsRootExtension</code></p></td></tr><tr id="z9f3y72_630"><td id="z9f3y72_652"><p><code class="code" id="z9f3y72_654">WasmNodeJsEnvSpec</code></p></td><td id="z9f3y72_653"><p><code class="code" id="z9f3y72_655">NodeJsEnvSpec</code></p></td></tr><tr id="z9f3y72_631"><td id="z9f3y72_656"><p><code class="code" id="z9f3y72_658">WasmYarnRootEnvSpec</code></p></td><td id="z9f3y72_657"><p><code class="code" id="z9f3y72_659">YarnRootEnvSpec</code></p></td></tr></tbody></table></div><p id="z9f3y72_602">You can now work with the Wasm target independently of the JavaScript target, which simplifies the configuration process.</p><p id="z9f3y72_603">This change is enabled by default and requires no additional setup.</p></section><section class="chapter"><h3 id="per-project-binaryen-configuration" data-toc="per-project-binaryen-configuration">Per-project Binaryen configuration</h3><p id="z9f3y72_660">The Binaryen tool, used in Kotlin/Wasm to <a href="whatsnew20.html#optimized-production-builds-by-default-using-binaryen" id="z9f3y72_664">optimize production builds</a>, was previously configured once in the root project.</p><p id="z9f3y72_661">Now, you can configure the Binaryen tool per project or module. This change aligns with Gradle's best practices and ensures better support for features like <a href="https://docs.gradle.org/current/userguide/isolated_projects.html" id="z9f3y72_665" data-external="true" rel="noopener noreferrer" target="_blank">project isolation</a>, improving build performance and reliability in complex builds.</p><p id="z9f3y72_662">Additionally, you can now configure different versions of Binaryen for different modules, if needed.</p><p id="z9f3y72_663">This feature is enabled by default. However, if you have a custom configuration of Binaryen, you now need to apply it per project, rather than only in the root project.</p></section></section><section class="chapter"><h2 id="kotlin-js" data-toc="kotlin-js">Kotlin/JS</h2><p id="z9f3y72_666">This release improves <a href="#fix-for-copy-in-jsplainobject-interfaces" id="z9f3y72_671">the <code class="code" id="z9f3y72_673">copy()</code> function in <code class="code" id="z9f3y72_674">@JsPlainObject</code> interfaces</a>, <a href="#support-for-type-aliases-in-files-with-jsmodule-annotation" id="z9f3y72_672">type aliases in files with the <code class="code" id="z9f3y72_675">@JsModule</code> annotation</a>, and other Kotlin/JS features.</p><section class="chapter"><h3 id="fix-for-copy-in-jsplainobject-interfaces" data-toc="fix-for-copy-in-jsplainobject-interfaces">Fix for <code class="code" id="z9f3y72_682">copy()</code> in <code class="code" id="z9f3y72_683">@JsPlainObject</code> interfaces</h3><p id="z9f3y72_677">Kotlin/JS has an experimental plugin called <code class="code" id="z9f3y72_684">js-plain-objects</code>, which introduced a <code class="code" id="z9f3y72_685">copy()</code> function for interfaces annotated with <code class="code" id="z9f3y72_686">@JsPlainObject</code>. You can use the <code class="code" id="z9f3y72_687">copy()</code> function to manipulate objects.</p><p id="z9f3y72_678">However, the initial implementation of <code class="code" id="z9f3y72_688">copy()</code> was not compatible with inheritance, and this caused issues when a <code class="code" id="z9f3y72_689">@JsPlainObject</code> interface extended other interfaces.</p><p id="z9f3y72_679">To avoid limitations on plain objects, the <code class="code" id="z9f3y72_690">copy()</code> function has been moved from the object itself to its companion object:</p><div class="code-block" data-lang="kotlin">
@JsPlainObject
external interface User {
    val name: String
    val age: Int
}

fun main() {
    val user = User(name = &quot;SomeUser&quot;, age = 21)
    // This syntax is not valid anymore
    val copy = user.copy(age = 35)      
    // This is the correct syntax
    val copy = User.copy(user, age = 35)
}
</div><p id="z9f3y72_681">This change resolves conflicts in the inheritance hierarchy and eliminates ambiguity. It is enabled by default starting from Kotlin 2.2.0.</p></section><section class="chapter"><h3 id="support-for-type-aliases-in-files-with-jsmodule-annotation" data-toc="support-for-type-aliases-in-files-with-jsmodule-annotation">Support for type aliases in files with <code class="code" id="z9f3y72_697">@JsModule</code> annotation</h3><p id="z9f3y72_692">Previously, files annotated with <code class="code" id="z9f3y72_698">@JsModule</code> to import declarations from JavaScript modules were restricted to external declarations only. This meant that you couldn't declare a <code class="code" id="z9f3y72_699">typealias</code> in such files.</p><p id="z9f3y72_693">Starting with Kotlin 2.2.0, you can declare type aliases inside files marked with <code class="code" id="z9f3y72_700">@JsModule</code>:</p><div class="code-block" data-lang="kotlin">
@file:JsModule(&quot;somepackage&quot;)
package somepackage
typealias SomeClass = Any
</div><p id="z9f3y72_695">This change reduces an aspect of Kotlin/JS interoperability limitations, and more improvements are planned for future releases.</p><p id="z9f3y72_696">Support for type aliases in files with <code class="code" id="z9f3y72_701">@JsModule</code> is enabled by default.</p></section><section class="chapter"><h3 id="support-for-jsexport-in-multiplatform-expect-declarations" data-toc="support-for-jsexport-in-multiplatform-expect-declarations">Support for <code class="code" id="z9f3y72_709">@JsExport</code> in multiplatform <code class="code" id="z9f3y72_710">expect</code> declarations</h3><p id="z9f3y72_703">When working with the <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-expect-actual.html" id="z9f3y72_711" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_714">expect/actual</code> mechanism</a> in Kotlin Multiplatform projects, it was not possible to use the <code class="code" id="z9f3y72_712">@JsExport</code> annotation for <code class="code" id="z9f3y72_713">expect</code> declarations in common code.</p><p id="z9f3y72_704">Starting with this release, you can apply <code class="code" id="z9f3y72_715">@JsExport</code> directly to <code class="code" id="z9f3y72_716">expect</code> declarations:</p><div class="code-block" data-lang="kotlin">
// commonMain

// Produced error, but now works correctly 
@JsExport
expect class WindowManager {
    fun close()
}

@JsExport
fun acceptWindowManager(manager: WindowManager) {
    ...
}

// jsMain

@JsExport
actual class WindowManager {
    fun close() {
        window.close()
    }
}
</div><p id="z9f3y72_706">You must also annotate with <code class="code" id="z9f3y72_717">@JsExport</code> the corresponding <code class="code" id="z9f3y72_718">actual</code> implementation in the JavaScript source set, and it has to use only exportable types.</p><p id="z9f3y72_707">This fix allows shared code defined in <code class="code" id="z9f3y72_719">commonMain</code> to be correctly exported to JavaScript. You can now expose your multiplatform code to JavaScript consumers without having to use manual workarounds.</p><p id="z9f3y72_708">This change is enabled by default.</p></section><section class="chapter"><h3 id="ability-to-use-jsexport-with-the-promise-unit-type" data-toc="ability-to-use-jsexport-with-the-promise-unit-type">Ability to use <code class="code" id="z9f3y72_726">@JsExport</code> with the <code class="code" id="z9f3y72_727">Promise&lt;Unit&gt;</code> type</h3><p id="z9f3y72_721">Previously, when you tried to export a function returning the <code class="code" id="z9f3y72_728">Promise&lt;Unit&gt;</code> type with the <code class="code" id="z9f3y72_729">@JsExport</code> annotation, the Kotlin compiler produced an error.</p><p id="z9f3y72_722">While return types like <code class="code" id="z9f3y72_730">Promise&lt;Int&gt;</code> worked correctly, using <code class="code" id="z9f3y72_731">Promise&lt;Unit&gt;</code> triggered a &quot;non-exportable type&quot; warning, even though it correctly mapped to <code class="code" id="z9f3y72_732">Promise&lt;void&gt;</code> in TypeScript.</p><p id="z9f3y72_723">This restriction has been removed. Now, the following code compiles without error:</p><div class="code-block" data-lang="kotlin">
// Worked correctly before
@JsExport
fun fooInt(): Promise&lt;Int&gt; = GlobalScope.promise {
    delay(100)
    return@promise 42
}

// Produced error, but now works correctly
@JsExport
fun fooUnit(): Promise&lt;Unit&gt; = GlobalScope.promise {
    delay(100)
}
</div><p id="z9f3y72_725">This change removes an unnecessary restriction in the Kotlin/JS interop model. This fix is enabled by default.</p></section></section><section class="chapter"><h2 id="gradle" data-toc="gradle">Gradle</h2><p id="z9f3y72_733">Kotlin 2.2.0 is fully compatible with Gradle 7.6.3 through 8.14. You can also use Gradle versions up to the latest Gradle release. However, be aware that doing so may result in deprecation warnings, and some new Gradle features might not work.</p><p id="z9f3y72_734">In this release, the Kotlin Gradle plugin comes with several improvements to its diagnostics. It also introduces an experimental integration of <a href="#binary-compatibility-validation-included-in-kotlin-gradle-plugin" id="z9f3y72_739">binary compatibility validation</a>, making it easier to work on libraries.</p><section class="chapter"><h3 id="binary-compatibility-validation-included-in-kotlin-gradle-plugin" data-toc="binary-compatibility-validation-included-in-kotlin-gradle-plugin" data-label-id="experimental-general">Binary compatibility validation included in Kotlin Gradle plugin</h3><p id="z9f3y72_741">To make it easier to check for binary compatibility between library versions, we're experimenting with moving the functionality of the <a href="https://github.com/Kotlin/binary-compatibility-validator" id="z9f3y72_752" data-external="true" rel="noopener noreferrer" target="_blank">binary compatibility validator</a> into the Kotlin Gradle plugin (KGP). You can try it out in toy projects, but we don't recommend using it in production yet.</p><p id="z9f3y72_742">The original <a href="https://github.com/Kotlin/binary-compatibility-validator" id="z9f3y72_753" data-external="true" rel="noopener noreferrer" target="_blank">binary compatibility validator</a> continues to be maintained during this experimental phase.</p><p id="z9f3y72_743">Kotlin libraries can use one of two binary formats: JVM class files or <code class="code" id="z9f3y72_754">klib</code>. Since these formats aren't compatible, the KGP works with each of them separately.</p><p id="z9f3y72_744">To enable the binary compatibility validation feature set, add the following to the <code class="code" id="z9f3y72_755">kotlin{}</code> block in your <code class="code" id="z9f3y72_756">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    @OptIn(org.jetbrains.kotlin.gradle.dsl.abi.ExperimentalAbiValidation::class)
    abiValidation {
        // Use the set() function to ensure compatibility with older Gradle versions
        enabled.set(true)
    }
}
</div><p id="z9f3y72_746">If your project has multiple modules where you want to check for binary compatibility, configure the feature in each module separately. Each module can have its own custom configuration.</p><p id="z9f3y72_747">Once enabled, run the <code class="code" id="z9f3y72_757">checkLegacyAbi</code> Gradle task to check for binary compatibility issues. You can run the task in IntelliJ IDEA or from the command line in your project directory:</p><div class="code-block" data-lang="kotlin">
./gradlew checkLegacyAbi
</div><p id="z9f3y72_749">This task generates an application binary interface (ABI) dump from the current code as a UTF-8 text file. The task then compares the new dump with the one from the previous release. If the task finds any differences, it reports them as errors. After reviewing the errors, if you decide the changes are acceptable, you can update the reference ABI dump by running the <code class="code" id="z9f3y72_758">updateLegacyAbi</code> Gradle task.</p><section class="chapter"><h4 id="filter-classes" data-toc="filter-classes">Filter classes</h4><p id="z9f3y72_759">The feature lets you filter classes in the ABI dump. You can include or exclude classes explicitly by name or partial name, or by the annotations (or parts of annotation names) that mark them.</p><p id="z9f3y72_760">For example, this sample excludes all classes in the <code class="code" id="z9f3y72_763">com.company</code> package:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    @OptIn(org.jetbrains.kotlin.gradle.dsl.abi.ExperimentalAbiValidation::class)
    abiValidation {
        filters.excluded.byNames.add(&quot;com.company.**&quot;)
    }
}
</div><p id="z9f3y72_762">Explore the <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.dsl.abi/" id="z9f3y72_764" data-external="true" rel="noopener noreferrer" target="_blank">KGP API reference</a> to learn more about configuring the binary compatibility validator.</p></section><section class="chapter"><h4 id="multiplatform-limitations" data-toc="multiplatform-limitations">Multiplatform limitations</h4><p id="z9f3y72_765">In multiplatform projects, if your host doesn't support cross-compilation for all targets, the KGP tries to infer the ABI changes for unsupported targets by checking the ABI dumps from other ones. This approach helps avoid false validation failures if you later switch to a host that <span class="control" id="z9f3y72_769">can</span> compile all targets.</p><p id="z9f3y72_766">You can change this default behavior so that the KGP doesn't infer ABI changes for unsupported targets by adding the following to your <code class="code" id="z9f3y72_770">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    @OptIn(org.jetbrains.kotlin.gradle.dsl.abi.ExperimentalAbiValidation::class)
    abiValidation {
        klib {
            keepUnsupportedTargets = false
        }
    }
}
</div><p id="z9f3y72_768">However, if you have an unsupported target in your project, running the <code class="code" id="z9f3y72_771">checkLegacyAbi</code> task fails because the task can't create an ABI dump. This behavior may be desirable if it's more important for the check to fail than to miss an incompatible change due to inferred ABI changes from other targets.</p></section></section><section class="chapter"><h3 id="support-for-rich-output-in-console-for-kotlin-gradle-plugin" data-toc="support-for-rich-output-in-console-for-kotlin-gradle-plugin">Support for rich output in console for Kotlin Gradle plugin</h3><p id="z9f3y72_772">In Kotlin 2.2.0, we support color and other rich output in the console during the Gradle build process, making it easier to read and understand the reported diagnostics.</p><p id="z9f3y72_773">Rich output is available in supported terminal emulators for Linux and macOS, and we're working on adding support for Windows.</p><figure id="z9f3y72_774"><img alt="Gradle console" src="images/gradle-console-rich-output.png" title="Gradle console" width="600" height="249"></figure><p id="z9f3y72_775">This feature is enabled by default, but if you want to override it, add the following Gradle property to your <code class="code" id="z9f3y72_778">gradle.properties</code> file:</p><div class="code-block" data-lang="none">
org.gradle.console=plain
</div><p id="z9f3y72_777">For more information about this property and its options, see Gradle's documentation on <a href="https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_customizing_log_format" id="z9f3y72_779" data-external="true" rel="noopener noreferrer" target="_blank">Customizing log format</a>.</p></section><section class="chapter"><h3 id="integration-of-problems-api-within-kgp-diagnostics" data-toc="integration-of-problems-api-within-kgp-diagnostics">Integration of Problems API within KGP diagnostics</h3><p id="z9f3y72_780">Previously, the Kotlin Gradle Plugin (KGP) was only able to report diagnostics such as warnings and errors as plain text output to the console or logs.</p><p id="z9f3y72_781">Starting with 2.2.0, the KGP introduces an additional reporting mechanism: it now uses <a href="https://docs.gradle.org/current/kotlin-dsl/gradle/org.gradle.api.problems/index.html" id="z9f3y72_784" data-external="true" rel="noopener noreferrer" target="_blank">Gradle's Problems API</a>, a standardized way to report rich, structured problem information during the build process.</p><p id="z9f3y72_782">The KGP diagnostics are now easier to read and more consistently displayed across different interfaces, such as the Gradle CLI and IntelliJ IDEA.</p><p id="z9f3y72_783">This integration is enabled by default, starting with Gradle 8.6 or later. As the API is still evolving, use the most recent Gradle version to benefit from the latest improvements.</p></section><section class="chapter"><h3 id="kgp-compatibility-with-warning-mode" data-toc="kgp-compatibility-with-warning-mode">KGP compatibility with <code class="code" id="z9f3y72_793">--warning-mode</code></h3><p id="z9f3y72_786">The Kotlin Gradle Plugin (KGP) diagnostics reported issues using fixed severity levels, meaning Gradle's <a href="https://docs.gradle.org/current/userguide/command_line_interface.html#sec:command_line_warnings" id="z9f3y72_794" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_795">--warning-mode</code> command-line option</a> had no effect on how the KGP displayed errors.</p><p id="z9f3y72_787">Now, the KGP diagnostics are compatible with the <code class="code" id="z9f3y72_796">--warning-mode</code> option, providing more flexibility. For example, you can convert all warnings into errors or disable warnings entirely.</p><p id="z9f3y72_788">With this change, the KGP diagnostics adjust the output based on the selected warning mode:</p><ul class="list _bullet" id="z9f3y72_789"><li class="list__item" id="z9f3y72_797"><p id="z9f3y72_799">When you set <code class="code" id="z9f3y72_800">--warning-mode=fail</code>, diagnostics with <code class="code" id="z9f3y72_801">Severity.Warning</code> are now elevated to <code class="code" id="z9f3y72_802">Severity.Error</code>.</p></li><li class="list__item" id="z9f3y72_798"><p id="z9f3y72_803">When you set <code class="code" id="z9f3y72_804">--warning-mode=none</code>, diagnostics with <code class="code" id="z9f3y72_805">Severity.Warning</code> are not logged.</p></li></ul><p id="z9f3y72_790">This behavior is enabled by default starting with 2.2.0.</p><p id="z9f3y72_791">To ignore the <code class="code" id="z9f3y72_806">--warning-mode</code> option, set the following Gradle property to your <code class="code" id="z9f3y72_807">gradle.properties</code> file:</p><div class="code-block" data-lang="none">
kotlin.internal.diagnostics.ignoreWarningMode=true
</div></section></section><section class="chapter"><h2 id="new-experimental-build-tools-api" data-toc="new-experimental-build-tools-api" data-label-id="experimental-general">New experimental build tools API</h2><p id="z9f3y72_809">You can use Kotlin with various build systems, such as Gradle, Maven, Amper, and others. However, integrating Kotlin into each system to support the full feature set, such as incremental compilation and compatibility with Kotlin compiler plugins, daemons, and Kotlin Multiplatform, requires significant effort.</p><p id="z9f3y72_810">To simplify this process, Kotlin 2.2.0 introduces a new experimental build tools API (BTA). The BTA is a universal API that acts as an abstraction layer between build systems and the Kotlin compiler ecosystem. With this approach, each build system only needs to support a single BTA entry point.</p><p id="z9f3y72_811">Currently, the BTA supports Kotlin/JVM only. The Kotlin team at JetBrains already uses it in the Kotlin Gradle plugin (KGP) and the <code class="code" id="z9f3y72_821">kotlin-maven-plugin</code>. You can try the BTA through these plugins, but the API itself isn't ready yet for general use in your own build tool integrations. If you're curious about the BTA proposal or want to share your feedback, see this <a href="https://github.com/Kotlin/KEEP/issues/421" id="z9f3y72_822" data-external="true" rel="noopener noreferrer" target="_blank">KEEP</a> proposal.</p><p id="z9f3y72_812">To try the BTA in:</p><ul class="list _bullet" id="z9f3y72_813"><li class="list__item" id="z9f3y72_823"><p id="z9f3y72_824">The KGP, add the following property to your <code class="code" id="z9f3y72_825">gradle.properties</code> file:</p></li></ul><div class="code-block" data-lang="kotlin">
kotlin.compiler.runViaBuildToolsApi=true
</div><ul class="list _bullet" id="z9f3y72_815"><li class="list__item" id="z9f3y72_826"><p id="z9f3y72_827">Maven, you don't need to do anything. It's enabled by default.</p></li></ul><p id="z9f3y72_816">The BTA currently has no direct benefits for the Maven plugin, but it lays a solid foundation for the faster delivery of new features, such as <a href="https://youtrack.jetbrains.com/issue/KT-77587/Maven-Introduce-Kotlin-daemon-support-and-make-it-enabled-by-default" id="z9f3y72_828" data-external="true" rel="noopener noreferrer" target="_blank">support for the Kotlin daemon</a> and <a href="https://youtrack.jetbrains.com/issue/KT-77086/Stabilize-incremental-compilation-in-Maven" id="z9f3y72_829" data-external="true" rel="noopener noreferrer" target="_blank">the stabilization of incremental compilation</a>.</p><p id="z9f3y72_817">For the KGP, using the BTA already has the following benefits:</p><ul class="list _bullet" id="z9f3y72_818"><li class="list__item" id="z9f3y72_830"><p id="z9f3y72_832"><a href="#improved-in-process-compiler-execution-strategy" id="z9f3y72_833">Improved &quot;in process&quot; compiler execution strategy</a></p></li><li class="list__item" id="z9f3y72_831"><p id="z9f3y72_834"><a href="#flexibility-to-configure-different-compiler-versions-from-kotlin" id="z9f3y72_835">More flexibility to configure different compiler versions from Kotlin</a></p></li></ul><section class="chapter"><h3 id="improved-in-process-compiler-execution-strategy" data-toc="improved-in-process-compiler-execution-strategy">Improved &quot;in process&quot; compiler execution strategy</h3><p id="z9f3y72_836">The KGP supports three <a href="gradle-compilation-and-caches.html#defining-kotlin-compiler-execution-strategy" id="z9f3y72_839">Kotlin compiler execution strategies</a>. The &quot;in process&quot; strategy, which runs the compiler inside the Gradle daemon process, previously didn't support incremental compilation.</p><p id="z9f3y72_837">Now, using the BTA, the &quot;in-process&quot; strategy <span class="control" id="z9f3y72_840">does</span> support incremental compilation. To use it, add the following property to your <code class="code" id="z9f3y72_841">gradle.properties</code> file:</p><div class="code-block" data-lang="kotlin">
kotlin.compiler.execution.strategy=in-process
</div></section><section class="chapter"><h3 id="flexibility-to-configure-different-compiler-versions-from-kotlin" data-toc="flexibility-to-configure-different-compiler-versions-from-kotlin">Flexibility to configure different compiler versions from Kotlin</h3><p id="z9f3y72_842">Sometimes you might want to use a newer Kotlin compiler version in your code while keeping the KGP on an older one &ndash; for example, to try new language features while still working through build script deprecations. Or you might want to update the version of the KGP but keep an older Kotlin compiler version.</p><p id="z9f3y72_843">The BTA makes this possible. Here's how you can configure it in your <code class="code" id="z9f3y72_848">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
import org.jetbrains.kotlin.buildtools.api.ExperimentalBuildToolsApi
import org.jetbrains.kotlin.gradle.ExperimentalKotlinGradlePluginApi

plugins { 
    kotlin(&quot;jvm&quot;) version &quot;2.2.0&quot;
}

group = &quot;org.jetbrains.example&quot;
version = &quot;1.0-SNAPSHOT&quot;

repositories { 
    mavenCentral()
}

kotlin { 
    jvmToolchain(8)
    @OptIn(ExperimentalBuildToolsApi::class, ExperimentalKotlinGradlePluginApi::class) 
    compilerVersion.set(&quot;2.1.21&quot;) // Different version than 2.2.0
}

</div><p id="z9f3y72_845">The BTA supports configuring the KGP and Kotlin compiler versions with the three previous major versions and one subsequent major version. So in KGP 2.2.0, Kotlin compiler versions 2.1.x, 2.0.x, and 1.9.25 are supported. KGP 2.2.0 is also compatible with future Kotlin compiler versions 2.2.x and 2.3.x.</p><p id="z9f3y72_846">However, keep in mind that using different compiler versions together with compiler plugins may lead to Kotlin compiler exceptions. The Kotlin team plans to address these kinds of problems in future releases.</p><p id="z9f3y72_847">Try out the BTA with these plugins and send us your feedback in the dedicated YouTrack tickets for the <a href="https://youtrack.jetbrains.com/issue/KT-56574" id="z9f3y72_849" data-external="true" rel="noopener noreferrer" target="_blank">KGP</a> and the <a href="https://youtrack.jetbrains.com/issue/KT-73012" id="z9f3y72_850" data-external="true" rel="noopener noreferrer" target="_blank">Maven plugin</a>.</p></section></section><section class="chapter"><h2 id="kotlin-standard-library" data-toc="kotlin-standard-library">Kotlin standard library</h2><p id="z9f3y72_851">In Kotlin 2.2.0, the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.io.encoding/-base64/" id="z9f3y72_854" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_857">Base64</code> API</a> and <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.text/-hex-format/" id="z9f3y72_855" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_858">HexFormat</code> API</a> are now <a href="components-stability.html#stability-levels-explained" id="z9f3y72_856">Stable</a>.</p><section class="chapter"><h3 id="stable-base64-encoding-and-decoding" data-toc="stable-base64-encoding-and-decoding">Stable Base64 encoding and decoding</h3><p id="z9f3y72_859">Kotlin 1.8.20 introduced <a href="whatsnew1820.html#support-for-base64-encoding" id="z9f3y72_866">Experimental support for Base64 encoding and decoding</a>. In Kotlin 2.2.0, the <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.io.encoding/-base64/" id="z9f3y72_867" data-external="true" rel="noopener noreferrer" target="_blank">Base64 API</a> is now <a href="components-stability.html#stability-levels-explained" id="z9f3y72_868">Stable</a> and includes four encoding schemes, with the new <code class="code" id="z9f3y72_869">Base64.Pem</code> added in this release:</p><ul class="list _bullet" id="z9f3y72_860"><li class="list__item" id="z9f3y72_870"><p id="z9f3y72_874"><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.io.encoding/-base64/-default/" id="z9f3y72_877" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_879">Base64.Default</code></a> uses the standard <a href="https://www.rfc-editor.org/rfc/rfc4648#section-4" id="z9f3y72_878" data-external="true" rel="noopener noreferrer" target="_blank">Base64 encoding scheme</a>.</p><aside class="prompt" data-type="tip" data-title="" id="z9f3y72_875"><p id="z9f3y72_880">The <code class="code" id="z9f3y72_881">Base64.Default</code> is the companion object of the <code class="code" id="z9f3y72_882">Base64</code> class. As a result, you can call its functions with <code class="code" id="z9f3y72_883">Base64.encode()</code> and <code class="code" id="z9f3y72_884">Base64.decode()</code> instead of <code class="code" id="z9f3y72_885">Base64.Default.encode()</code> and <code class="code" id="z9f3y72_886">Base64.Default.decode()</code>.</p></aside><p id="z9f3y72_876"></p></li><li class="list__item" id="z9f3y72_871"><p id="z9f3y72_887"><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.io.encoding/-base64/-default/-url-safe.html" id="z9f3y72_888" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_890">Base64.UrlSafe</code></a> uses the <a href="https://www.rfc-editor.org/rfc/rfc4648#section-5" id="z9f3y72_889" data-external="true" rel="noopener noreferrer" target="_blank">&quot;URL and Filename safe&quot;</a> encoding scheme.</p></li><li class="list__item" id="z9f3y72_872"><p id="z9f3y72_891"><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.io.encoding/-base64/-default/-mime.html" id="z9f3y72_892" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_894">Base64.Mime</code></a> uses the <a href="https://www.rfc-editor.org/rfc/rfc2045#section-6.8" id="z9f3y72_893" data-external="true" rel="noopener noreferrer" target="_blank">MIME</a> encoding scheme, inserting a line separator every 76 characters during encoding and skipping illegal characters during decoding.</p></li><li class="list__item" id="z9f3y72_873"><p id="z9f3y72_895"><code class="code" id="z9f3y72_896">Base64.Pem</code> encodes data like <code class="code" id="z9f3y72_897">Base64.Mime</code> but limits the line length to 64 characters.</p></li></ul><p id="z9f3y72_861">You can use the Base64 API to encode binary data into a Base64 string and decode it back into bytes.</p><p id="z9f3y72_862">Here's an example:</p><div class="code-block" data-lang="kotlin">
val foBytes = &quot;fo&quot;.map { it.code.toByte() }.toByteArray()
Base64.Default.encode(foBytes) // &quot;Zm8=&quot;
// Alternatively:
// Base64.encode(foBytes)

val foobarBytes = &quot;foobar&quot;.map { it.code.toByte() }.toByteArray()
Base64.UrlSafe.encode(foobarBytes) // &quot;Zm9vYmFy&quot;

Base64.Default.decode(&quot;Zm8=&quot;) // foBytes
// Alternatively:
// Base64.decode(&quot;Zm8=&quot;)

Base64.UrlSafe.decode(&quot;Zm9vYmFy&quot;) // foobarBytes
</div><p id="z9f3y72_864">On the JVM, use the <code class="code" id="z9f3y72_898">.encodingWith()</code> and <code class="code" id="z9f3y72_899">.decodingWith()</code> extension functions to encode and decode Base64 with input and output streams:</p><div class="code-block" data-lang="kotlin">
import kotlin.io.encoding.*
import java.io.ByteArrayOutputStream

fun main() {
    val output = ByteArrayOutputStream()
    val base64Output = output.encodingWith(Base64.Default)

    base64Output.use { stream -&gt;
        stream.write(&quot;Hello World!!&quot;.encodeToByteArray()) 
    }

    println(output.toString())
    // SGVsbG8gV29ybGQhIQ==
}
</div></section><section class="chapter"><h3 id="stable-hexadecimal-parsing-and-formatting-with-the-hexformat-api" data-toc="stable-hexadecimal-parsing-and-formatting-with-the-hexformat-api">Stable Hexadecimal parsing and formatting with the <code class="code" id="z9f3y72_905">HexFormat</code> API</h3><p id="z9f3y72_901">The <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.text/-hex-format/" id="z9f3y72_906" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_909">HexFormat</code> API</a> introduced in <a href="whatsnew19.html#new-hexformat-class-to-format-and-parse-hexadecimals" id="z9f3y72_907">Kotlin 1.9.0</a> is now <a href="components-stability.html#stability-levels-explained" id="z9f3y72_908">Stable</a>. You can use it to convert between numerical values and hexadecimal strings.</p><p id="z9f3y72_902">For example:</p><div class="code-block" data-lang="kotlin" data-runnable="true">
fun main() {
    //sampleStart
    println(93.toHexString())
    //sampleEnd
}
</div><p id="z9f3y72_904">For more information, see <a href="whatsnew19.html#new-hexformat-class-to-format-and-parse-hexadecimals" id="z9f3y72_910">New HexFormat class to format and parse hexadecimals</a>.</p></section></section><section class="chapter"><h2 id="compose-compiler" data-toc="compose-compiler">Compose compiler</h2><p id="z9f3y72_911">In this release, the Compose compiler introduces support for composable function references and changes defaults for several feature flags.</p><section class="chapter"><h3 id="support-for-composable-function-references" data-toc="support-for-composable-function-references">Support for <code class="code" id="z9f3y72_920">@Composable</code> function references</h3><p id="z9f3y72_917">The Compose compiler supports the declaration and usage of composable function references starting from the Kotlin 2.2.0 release:</p><div class="code-block" data-lang="kotlin">
val content: @Composable (String) -&gt; Unit = ::Text

@Composable fun App() {
    content(&quot;My App&quot;)
}
</div><p id="z9f3y72_919">Composable function references behave slightly differently from composable lambda objects at runtime. In particular, composable lambdas allow for finer control over skipping by extending the <code class="code" id="z9f3y72_921">ComposableLambda</code> class. Function references are expected to implement the <code class="code" id="z9f3y72_922">KCallable</code> interface, so the same optimization cannot be applied to them.</p></section><section class="chapter"><h3 id="pausablecomposition-feature-flag-enabled-by-default" data-toc="pausablecomposition-feature-flag-enabled-by-default"><code class="code" id="z9f3y72_927">PausableComposition</code> feature flag enabled by default</h3><p id="z9f3y72_924">The <code class="code" id="z9f3y72_928">PausableComposition</code> feature flag is enabled by default starting from Kotlin 2.2.0. This flag adjusts the Compose compiler output for restartable functions, allowing runtime to force skipping behavior and therefore effectively pause composition by skipping each function. This allows heavy compositions to be split between frames, which will be used by prefetching in a future release.</p><p id="z9f3y72_925">To disable this feature flag, add the following to your Gradle configuration:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
composeCompiler {
    featureFlag = setOf(ComposeFeatureFlag.PausableComposition.disabled())
}
</div></section><section class="chapter"><h3 id="optimizenonskippinggroups-feature-flag-enabled-by-default" data-toc="optimizenonskippinggroups-feature-flag-enabled-by-default"><code class="code" id="z9f3y72_934">OptimizeNonSkippingGroups</code> feature flag enabled by default</h3><p id="z9f3y72_930">The <code class="code" id="z9f3y72_935">OptimizeNonSkippingGroups</code> feature flag is enabled by default starting from Kotlin 2.2.0. This optimization improves runtime performance by removing group calls generated for non-skipping composable functions. It should not result in any observable behavior changes at runtime.</p><p id="z9f3y72_931">If you encounter any issues, you can validate that this change causes the issue by disabling the feature flag. Please report any issues to the <a href="https://issuetracker.google.com/issues/new?component=610764&amp;template=1424126" id="z9f3y72_936" data-external="true" rel="noopener noreferrer" target="_blank">Jetpack Compose issue tracker</a>.</p><p id="z9f3y72_932">To disable the <code class="code" id="z9f3y72_937">OptimizeNonSkippingGroups</code> flag, add the following to your Gradle configuration:</p><div class="code-block" data-lang="kotlin">
composeCompiler {
    featureFlag = setOf(ComposeFeatureFlag.OptimizeNonSkippingGroups.disabled())
}
</div></section><section class="chapter"><h3 id="deprecated-feature-flags" data-toc="deprecated-feature-flags">Deprecated feature flags</h3><p id="z9f3y72_938">The <code class="code" id="z9f3y72_939">StrongSkipping</code> and <code class="code" id="z9f3y72_940">IntrinsicRemember</code> feature flags are now deprecated and will be removed in a future release. If you encounter any issues that make you disable these feature flags, please report them to the <a href="https://issuetracker.google.com/issues/new?component=610764&amp;template=1424126" id="z9f3y72_941" data-external="true" rel="noopener noreferrer" target="_blank">Jetpack Compose issue tracker</a>.</p></section></section><section class="chapter"><h2 id="breaking-changes-and-deprecations" data-toc="breaking-changes-and-deprecations">Breaking changes and deprecations</h2><p id="z9f3y72_942">This section highlights important breaking changes and deprecations worth noting. See our <a href="compatibility-guide-22.html" id="z9f3y72_944">Compatibility guide</a> for a complete overview of all breaking changes and deprecations in this release.</p><ul class="list _bullet" id="z9f3y72_943"><li class="list__item" id="z9f3y72_945"><p id="z9f3y72_958">Starting with Kotlin 2.2.0, support for the <a href="ant.html" id="z9f3y72_960">Ant</a> build system is deprecated. Kotlin support for Ant hasn't been in active development for a long time, and there are no plans to maintain it further due to its relatively small user base.</p><p id="z9f3y72_959">We plan to remove Ant support in 2.3.0. However, Kotlin remains open to <a href="contribute.html" id="z9f3y72_961">contribution</a>. If you're interested in becoming an external maintainer for Ant, leave a comment with the &quot;jetbrains-team&quot; visibility setting in <a href="https://youtrack.jetbrains.com/issue/KT-75875/" id="z9f3y72_962" data-external="true" rel="noopener noreferrer" target="_blank">this YouTrack issue</a>.</p></li><li class="list__item" id="z9f3y72_946"><p id="z9f3y72_963">Kotlin 2.2.0 raises the deprecation level of the <a href="compatibility-guide-22.html#deprecate-kotlinoptions-dsl" id="z9f3y72_964"><code class="code" id="z9f3y72_967">kotlinOptions{}</code> block in Gradle to error</a>. Use the <code class="code" id="z9f3y72_965">compilerOptions{}</code> block instead. For guidance on updating your build scripts, see <a href="gradle-compiler-options.html#migrate-from-kotlinoptions-to-compileroptions" id="z9f3y72_966">Migrate from <code class="code" id="z9f3y72_968">kotlinOptions{}</code> to <code class="code" id="z9f3y72_969">compilerOptions{}</code></a>.</p></li><li class="list__item" id="z9f3y72_947"><p id="z9f3y72_970">Kotlin scripting remains an important part of Kotlin's ecosystem, but we're focusing on specific use cases such as custom scripting, as well as <code class="code" id="z9f3y72_972">gradle.kts</code> and <code class="code" id="z9f3y72_973">main.kts</code> scripts, to provide a better experience. To learn more, see our updated <a href="https://blog.jetbrains.com/kotlin/2024/11/state-of-kotlin-scripting-2024/" id="z9f3y72_974" data-external="true" rel="noopener noreferrer" target="_blank">blog post</a>. As a result, Kotlin 2.2.0 deprecates support for:</p><ul class="list _bullet" id="z9f3y72_971"><li class="list__item" id="z9f3y72_975"><p id="z9f3y72_978">REPL: To continue to use REPL via <code class="code" id="z9f3y72_979">kotlinc</code>, opt in with the <code class="code" id="z9f3y72_980">-Xrepl</code> compiler option.</p></li><li class="list__item" id="z9f3y72_976"><p id="z9f3y72_981">JSR-223: Since this <a href="https://jcp.org/en/jsr/detail?id=223" id="z9f3y72_982" data-external="true" rel="noopener noreferrer" target="_blank">JSR</a> is in the <span class="control" id="z9f3y72_983">Withdrawn</span> state, the JSR-223 implementation continues to work with language version 1.9 but won't be migrated to use the K2 compiler in the future.</p></li><li class="list__item" id="z9f3y72_977"><p id="z9f3y72_984">The <code class="code" id="z9f3y72_985">KotlinScriptMojo</code> Maven plugin: We didn't see enough traction with this plugin. You will see compiler warnings if you continue to use it.</p></li></ul></li><li class="list__item" id="z9f3y72_948"></li><li class="list__item" id="z9f3y72_949"><p id="z9f3y72_986">In Kotlin 2.2.0, the <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-kotlin-compile-tool/set-source.html#" id="z9f3y72_987" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_991">setSource()</code></a> function in <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-kotlin-compile-tool/#" id="z9f3y72_988" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_992">KotlinCompileTool</code></a> now <a href="compatibility-guide-22.html#correct-setsource-function-in-kotlincompiletool-to-replace-sources" id="z9f3y72_989">replaces configured sources instead of adding to them</a>. If you want to add sources without replacing existing ones, use the <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-kotlin-compile-tool/source.html#" id="z9f3y72_990" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_993">source()</code></a> function.</p></li><li class="list__item" id="z9f3y72_950"><p id="z9f3y72_994">The type of <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-base-kapt/annotation-processor-option-providers.html#" id="z9f3y72_995" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_1000">annotationProcessorOptionProviders</code></a> in <code class="code" id="z9f3y72_996">BaseKapt</code> has been <a href="compatibility-guide-22.html#deprecate-basekapt-annotationprocessoroptionproviders-property" id="z9f3y72_997">changed from <code class="code" id="z9f3y72_1001">MutableList&lt;Any&gt;</code> to <code class="code" id="z9f3y72_1002">MutableList&lt;CommandLineArgumentProvider&gt;</code></a>. If your code currently adds a list as a single element, use the <code class="code" id="z9f3y72_998">addAll()</code> function instead of the <code class="code" id="z9f3y72_999">add()</code> function.</p></li><li class="list__item" id="z9f3y72_951"><p id="z9f3y72_1003">Following the deprecation of the dead code elimination (DCE) tool used in the legacy Kotlin/JS backend, the remaining DSLs related to DCE are now removed from the Kotlin Gradle plugin:</p><ul class="list _bullet" id="z9f3y72_1004"><li class="list__item" id="z9f3y72_1006"><p id="z9f3y72_1010">The <code class="code" id="z9f3y72_1011">org.jetbrains.kotlin.gradle.dsl.KotlinJsDce</code> interface</p></li><li class="list__item" id="z9f3y72_1007"><p id="z9f3y72_1012">The <code class="code" id="z9f3y72_1013">org.jetbrains.kotlin.gradle.targets.js.dsl.KotlinJsBrowserDsl.dceTask(body: Action&lt;KotlinJsDce&gt;)</code> function</p></li><li class="list__item" id="z9f3y72_1008"><p id="z9f3y72_1014">The <code class="code" id="z9f3y72_1015">org.jetbrains.kotlin.gradle.dsl.KotlinJsDceCompilerToolOptions</code> interface</p></li><li class="list__item" id="z9f3y72_1009"><p id="z9f3y72_1016">The <code class="code" id="z9f3y72_1017">org.jetbrains.kotlin.gradle.dsl.KotlinJsDceOptions</code> interface</p></li></ul><p id="z9f3y72_1005">The current <a href="js-ir-compiler.html" id="z9f3y72_1018">JS IR compiler</a> supports DCE out of the box, and the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-js-export/" id="z9f3y72_1019" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="z9f3y72_1020">@JsExport</code></a> annotation allows specifying which Kotlin functions and classes to retain during DCE.</p></li><li class="list__item" id="z9f3y72_952"><p id="z9f3y72_1021">The deprecated <code class="code" id="z9f3y72_1022">kotlin-android-extensions</code> plugin is <a href="compatibility-guide-22.html#deprecate-kotlin-android-extensions-plugin" id="z9f3y72_1023">removed in Kotlin 2.2.0</a>. Use the <code class="code" id="z9f3y72_1024">kotlin-parcelize</code> plugin for the <code class="code" id="z9f3y72_1025">Parcelable</code> implementation generator and the Android Jetpack's <a href="https://developer.android.com/topic/libraries/view-binding" id="z9f3y72_1026" data-external="true" rel="noopener noreferrer" target="_blank">view bindings</a> for synthetic views instead.</p></li><li class="list__item" id="z9f3y72_953"><p id="z9f3y72_1027">Experimental <code class="code" id="z9f3y72_1028">kotlinArtifacts</code> API is <a href="compatibility-guide-22.html#deprecate-kotlinartifacts-api" id="z9f3y72_1029">deprecated in Kotlin 2.2.0</a>. Use the current DSL available in the Kotlin Gradle plugin to <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-build-native-binaries.html" id="z9f3y72_1030" data-external="true" rel="noopener noreferrer" target="_blank">build final native binaries</a>. If it's not sufficient for migration, leave a comment in <a href="https://youtrack.jetbrains.com/issue/KT-74953" id="z9f3y72_1031" data-external="true" rel="noopener noreferrer" target="_blank">this YT issue</a>.</p></li><li class="list__item" id="z9f3y72_954"><p id="z9f3y72_1032"><code class="code" id="z9f3y72_1033">KotlinCompilation.source</code>, deprecated in Kotlin 1.9.0, is now <a href="compatibility-guide-22.html#deprecate-kotlincompilation-source-api" id="z9f3y72_1034">removed from the Kotlin Gradle plugin</a>.</p></li><li class="list__item" id="z9f3y72_955"><p id="z9f3y72_1035">The parameters for experimental commonization modes are <a href="compatibility-guide-22.html#deprecate-commonization-parameters" id="z9f3y72_1036">deprecated in Kotlin 2.2.0</a>. Clear the commonization cache to delete invalid compilation artifacts.</p></li><li class="list__item" id="z9f3y72_956"><p id="z9f3y72_1037">The deprecated <code class="code" id="z9f3y72_1038">konanVersion</code> property is now <a href="compatibility-guide-22.html#deprecate-konanversion-in-cinteropprocess" id="z9f3y72_1039">removed from the <code class="code" id="z9f3y72_1041">CInteropProcess</code> task</a>. Use <code class="code" id="z9f3y72_1040">CInteropProcess.kotlinNativeVersion</code> instead.</p></li><li class="list__item" id="z9f3y72_957"><p id="z9f3y72_1042">Usage of the deprecated <code class="code" id="z9f3y72_1043">destinationDir</code> property will now <a href="compatibility-guide-22.html#deprecate-destinationdir-in-cinteropprocess" id="z9f3y72_1044">lead to an error</a>. Use <code class="code" id="z9f3y72_1045">CInteropProcess.destinationDirectory.set()</code> instead.</p></li></ul></section><section class="chapter"><h2 id="documentation-updates" data-toc="documentation-updates">Documentation updates</h2><p id="z9f3y72_1046">This release brings notable documentation changes, including the migration of Kotlin Multiplatform documentation to the <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/get-started.html" id="z9f3y72_1051" data-external="true" rel="noopener noreferrer" target="_blank">KMP portal</a>.</p><p id="z9f3y72_1047">Additionally, we launched a documentation survey, created new pages and tutorials, and revamped existing ones.</p><section class="chapter"><h3 id="kotlin-s-documentation-survey" data-toc="kotlin-s-documentation-survey">Kotlin's documentation survey</h3><p id="z9f3y72_1052">We're looking for genuine feedback to make the Kotlin documentation better.</p><p id="z9f3y72_1053">The survey takes around 15 minutes to complete, and your input will help shape the future of Kotlin docs.</p><p id="z9f3y72_1054"><a href="https://surveys.jetbrains.com/s3/Kotlin-Docs-2025" id="z9f3y72_1055" data-external="true" rel="noopener noreferrer" target="_blank">Take the survey here</a>.</p></section><section class="chapter"><h3 id="new-and-revamped-tutorials" data-toc="new-and-revamped-tutorials">New and revamped tutorials</h3><ul class="list _bullet" id="z9f3y72_1056"><li class="list__item" id="z9f3y72_1057"><p id="z9f3y72_1065"><a href="kotlin-tour-welcome.html" id="z9f3y72_1066">Kotlin intermediate tour</a> &ndash; Take your understanding of Kotlin to the next level. Learn when to use extension functions, interfaces, classes, and more.</p></li><li class="list__item" id="z9f3y72_1058"><p id="z9f3y72_1067"><a href="spring-ai-guide.html" id="z9f3y72_1068">Build a Kotlin app that uses Spring AI</a> &ndash; Learn how to create a Kotlin app that answers questions using OpenAI and a vector database.</p></li><li class="list__item" id="z9f3y72_1059"><p id="z9f3y72_1069"><a href="jvm-create-project-with-spring-boot.html" id="z9f3y72_1070">Create a Spring Boot project with Kotlin</a> &ndash; Learn how to create a Spring Boot project with Gradle using IntelliJ IDEA's <span class="control" id="z9f3y72_1071">New Project</span> wizard.</p></li><li class="list__item" id="z9f3y72_1060"><p id="z9f3y72_1072"><a href="mapping-primitive-data-types-from-c.html" id="z9f3y72_1073">Mapping Kotlin and C tutorial series</a> &ndash; Learn how different types and constructs are mapped between Kotlin and C.</p></li><li class="list__item" id="z9f3y72_1061"><p id="z9f3y72_1074"><a href="native-app-with-c-and-libcurl.html" id="z9f3y72_1075">Create an app using C interop and libcurl</a> &ndash; Create a simple HTTP client that can run natively using the libcurl C library.</p></li><li class="list__item" id="z9f3y72_1062"><p id="z9f3y72_1076"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/create-kotlin-multiplatform-library.html" id="z9f3y72_1077" data-external="true" rel="noopener noreferrer" target="_blank">Create your Kotlin Multiplatform library</a> &ndash; Learn how to create and publish a multiplatform library using IntelliJ IDEA.</p></li><li class="list__item" id="z9f3y72_1063"><p id="z9f3y72_1078"><a href="https://ktor.io/docs/full-stack-development-with-kotlin-multiplatform.html" id="z9f3y72_1079" data-external="true" rel="noopener noreferrer" target="_blank">Build a full-stack application with Ktor and Kotlin Multiplatform</a> &ndash; This tutorial now uses IntelliJ IDEA instead of Fleet, along with Material 3 and the latest versions of Ktor and Kotlin.</p></li><li class="list__item" id="z9f3y72_1064"><p id="z9f3y72_1080"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-resource-environment.html" id="z9f3y72_1081" data-external="true" rel="noopener noreferrer" target="_blank">Manage local resource environment in your Compose Multiplatform app</a> &ndash; Learn how to manage the application's resource environment, like in-app theme and language.</p></li></ul></section><section class="chapter"><h3 id="new-and-revamped-pages" data-toc="new-and-revamped-pages">New and revamped pages</h3><ul class="list _bullet" id="z9f3y72_1082"><li class="list__item" id="z9f3y72_1083"><p id="z9f3y72_1090"><a href="kotlin-ai-apps-development-overview.html" id="z9f3y72_1091">Kotlin for AI overview</a> &ndash; Discover Kotlin's capabilities for building AI-powered applications.</p></li><li class="list__item" id="z9f3y72_1084"><p id="z9f3y72_1092"><a href="https://kotlinlang.org/docs/dokka-migration.html" id="z9f3y72_1093" data-external="true" rel="noopener noreferrer" target="_blank">Dokka migration guide</a> &ndash; Learn how to migrate to v2 of the Dokka Gradle plugin.</p></li><li class="list__item" id="z9f3y72_1085"><p id="z9f3y72_1094"><a href="metadata-jvm.html" id="z9f3y72_1095">Kotlin Metadata JVM library</a> &ndash; Explore guidance on reading, modifying, and generating metadata for Kotlin classes compiled for the JVM.</p></li><li class="list__item" id="z9f3y72_1086"><p id="z9f3y72_1096"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-cocoapods-overview.html" id="z9f3y72_1097" data-external="true" rel="noopener noreferrer" target="_blank">CocoaPods integration</a> &ndash; Learn how to set up the environment, add Pod dependencies, or use a Kotlin project as a CocoaPod dependency through tutorials and sample projects.</p></li><li class="list__item" id="z9f3y72_1087"><p id="z9f3y72_1098">New pages for Compose Multiplatform to support the iOS stable release:</p><ul class="list _bullet" id="z9f3y72_1099"><li class="list__item" id="z9f3y72_1100"><p id="z9f3y72_1103"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-navigation.html" id="z9f3y72_1104" data-external="true" rel="noopener noreferrer" target="_blank">Navigation</a> and <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-navigation-deep-links.html" id="z9f3y72_1105" data-external="true" rel="noopener noreferrer" target="_blank">Deep linking</a> in particular.</p></li><li class="list__item" id="z9f3y72_1101"><p id="z9f3y72_1106"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-layout.html" id="z9f3y72_1107" data-external="true" rel="noopener noreferrer" target="_blank">Implementing layouts in Compose</a>.</p></li><li class="list__item" id="z9f3y72_1102"><p id="z9f3y72_1108"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-localize-strings.html" id="z9f3y72_1109" data-external="true" rel="noopener noreferrer" target="_blank">Localizing strings</a> and other i18n pages like support for RTL languages.</p></li></ul></li><li class="list__item" id="z9f3y72_1088"><p id="z9f3y72_1110"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/compose-hot-reload.html" id="z9f3y72_1111" data-external="true" rel="noopener noreferrer" target="_blank">Compose Hot Reload</a> &ndash; Learn how to use Compose Hot Reload with your desktop targets and how to add it to an existing project.</p></li><li class="list__item" id="z9f3y72_1089"><p id="z9f3y72_1112"><a href="https://www.jetbrains.com/help/exposed/migrations.html" id="z9f3y72_1113" data-external="true" rel="noopener noreferrer" target="_blank">Exposed migrations</a> &ndash; Learn about the tools Exposed provides for managing database schema changes.</p></li></ul></section></section><section class="chapter"><h2 id="how-to-update-to-kotlin-2-2-0" data-toc="how-to-update-to-kotlin-2-2-0">How to update to Kotlin 2.2.0</h2><p id="z9f3y72_1114">The Kotlin plugin is distributed as a bundled plugin in IntelliJ IDEA and Android Studio.</p><p id="z9f3y72_1115">To update to the new Kotlin version, <a href="releases.html#update-to-a-new-kotlin-version" id="z9f3y72_1116">change the Kotlin version</a> to 2.2.0 in your build scripts.</p></section><div class="last-modified">24 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="competitive-programming.html" class="navigation-links__prev">Kotlin for competitive programming</a><a href="whatsnew-eap.html" class="navigation-links__next">What's new in Kotlin 2.2.20-Beta1</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>