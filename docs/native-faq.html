<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-16T16:35:58.383494113"><link rel="canonical" href="https://kotlinlang.org/docs/native-faq.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Kotlin/Native FAQ | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"how-do-i-run-my-program","level":0,"title":"How do I run my program?","anchor":"#how-do-i-run-my-program"},{"id":"what-is-kotlin-native-memory-management-model","level":0,"title":"What is Kotlin/Native memory management model?","anchor":"#what-is-kotlin-native-memory-management-model"},{"id":"how-do-i-create-a-shared-library","level":0,"title":"How do I create a shared library?","anchor":"#how-do-i-create-a-shared-library"},{"id":"how-do-i-create-a-static-library-or-an-object-file","level":0,"title":"How do I create a static library or an object file?","anchor":"#how-do-i-create-a-static-library-or-an-object-file"},{"id":"how-do-i-run-kotlin-native-behind-a-corporate-proxy","level":0,"title":"How do I run Kotlin/Native behind a corporate proxy?","anchor":"#how-do-i-run-kotlin-native-behind-a-corporate-proxy"},{"id":"how-do-i-specify-a-custom-objective-c-prefix-name-for-my-kotlin-framework","level":0,"title":"How do I specify a custom Objective-C prefix/name for my Kotlin framework?","anchor":"#how-do-i-specify-a-custom-objective-c-prefix-name-for-my-kotlin-framework"},{"id":"how-do-i-rename-the-ios-framework","level":0,"title":"How do I rename the iOS framework?","anchor":"#how-do-i-rename-the-ios-framework"},{"id":"how-do-i-enable-bitcode-for-my-kotlin-framework","level":0,"title":"How do I enable bitcode for my Kotlin framework?","anchor":"#how-do-i-enable-bitcode-for-my-kotlin-framework"},{"id":"how-do-i-reference-objects-safely-from-different-coroutines","level":0,"title":"How do I reference objects safely from different coroutines?","anchor":"#how-do-i-reference-objects-safely-from-different-coroutines"},{"id":"how-can-i-compile-my-project-with-unreleased-versions-of-kotlin-native","level":0,"title":"How can I compile my project with unreleased versions of Kotlin/Native?","anchor":"#how-can-i-compile-my-project-with-unreleased-versions-of-kotlin-native"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Kotlin/Native FAQ | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/native-faq.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Kotlin/Native FAQ | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/native-faq.html#webpage",
    "url": "https://kotlinlang.org/docs/native-faq.html",
    "name": "Kotlin/Native FAQ | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="native-faq" data-main-title="Kotlin/Native FAQ" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Platforms///Native///Reference and tips" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/native/native-faq.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="native-faq" id="native-faq.md">Kotlin/Native FAQ</h1><section class="chapter"><h2 id="how-do-i-run-my-program" data-toc="how-do-i-run-my-program">How do I run my program?</h2><p id="-96x2p_12">Define a top-level function <code class="code" id="-96x2p_13">fun main(args: Array&lt;String&gt;)</code> or just <code class="code" id="-96x2p_14">fun main()</code> if you are not interested in passed arguments, please ensure it's not in a package. Also, compiler switch <code class="code" id="-96x2p_15">-entry</code> could be used to make any function taking <code class="code" id="-96x2p_16">Array&lt;String&gt;</code> or no arguments and return <code class="code" id="-96x2p_17">Unit</code> as an entry point.</p></section><section class="chapter"><h2 id="what-is-kotlin-native-memory-management-model" data-toc="what-is-kotlin-native-memory-management-model">What is Kotlin/Native memory management model?</h2><p id="-96x2p_18">Kotlin/Native uses an automated memory management scheme that is similar to what Java or Swift provide.</p><p id="-96x2p_19"><a href="native-memory-manager.html" id="-96x2p_20">Learn about the Kotlin/Native memory manager</a></p></section><section class="chapter"><h2 id="how-do-i-create-a-shared-library" data-toc="how-do-i-create-a-shared-library">How do I create a shared library?</h2><p id="-96x2p_21">Use the <code class="code" id="-96x2p_25">-produce dynamic</code> compiler option or <code class="code" id="-96x2p_26">binaries.sharedLib()</code> in your Gradle build file:</p><div class="code-block" data-lang="kotlin">
kotlin {
    iosArm64(&quot;mylib&quot;) {
        binaries.sharedLib()
    }
}
</div><p id="-96x2p_23">It produces a platform-specific shared object (<code class="code" id="-96x2p_27">.so</code> on Linux, <code class="code" id="-96x2p_28">.dylib</code> on macOS, and <code class="code" id="-96x2p_29">.dll</code> on Windows targets) and a C language header, allowing the use of all public APIs available in your Kotlin/Native program from C/C++ code.</p><p id="-96x2p_24"><a href="native-dynamic-libraries.html" id="-96x2p_30">Complete the Kotlin/Native as a dynamic library tutorial</a></p></section><section class="chapter"><h2 id="how-do-i-create-a-static-library-or-an-object-file" data-toc="how-do-i-create-a-static-library-or-an-object-file">How do I create a static library or an object file?</h2><p id="-96x2p_31">Use the <code class="code" id="-96x2p_34">-produce static</code> compiler option or <code class="code" id="-96x2p_35">binaries.staticLib()</code> in your Gradle build file:</p><div class="code-block" data-lang="kotlin">
kotlin {
    iosArm64(&quot;mylib&quot;) {
        binaries.staticLib()
    }
}
</div><p id="-96x2p_33">It produces a platform-specific static object (<code class="code" id="-96x2p_36">.a</code> library format) and a C language header, allowing you to use all the public APIs available in your Kotlin/Native program from C/C++ code.</p></section><section class="chapter"><h2 id="how-do-i-run-kotlin-native-behind-a-corporate-proxy" data-toc="how-do-i-run-kotlin-native-behind-a-corporate-proxy">How do I run Kotlin/Native behind a corporate proxy?</h2><p id="-96x2p_37">As Kotlin/Native needs to download a platform specific toolchain, you need to specify <code class="code" id="-96x2p_38">-Dhttp.proxyHost=xxx -Dhttp.proxyPort=xxx</code> as the compiler's or <code class="code" id="-96x2p_39">gradlew</code> arguments, or set it via the <code class="code" id="-96x2p_40">JAVA_OPTS</code> environment variable.</p></section><section class="chapter"><h2 id="how-do-i-specify-a-custom-objective-c-prefix-name-for-my-kotlin-framework" data-toc="how-do-i-specify-a-custom-objective-c-prefix-name-for-my-kotlin-framework">How do I specify a custom Objective-C prefix/name for my Kotlin framework?</h2><p id="-96x2p_41">Use the <code class="code" id="-96x2p_43">-module-name</code> compiler option or matching Gradle DSL statement.</p><div class="tabs" id="-96x2p_42" data-group="build-script" data-anchors="[-96x2p_44,-96x2p_45]"><div class="tabs__content" data-gtm="tab" id="-96x2p_44" data-sync-tabs="kotlin" data-title="Kotlin"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
kotlin {
    iosArm64(&quot;myapp&quot;) {
        binaries.framework {
            freeCompilerArgs += listOf(&quot;-module-name&quot;, &quot;TheName&quot;)
        }
    }
}
</div></div><div class="tabs__content" data-gtm="tab" id="-96x2p_45" data-sync-tabs="groovy" data-title="Groovy"><div class="code-block" data-lang="groovy" data-title="Groovy">
kotlin {
    iosArm64(&quot;myapp&quot;) {
        binaries.framework {
            freeCompilerArgs += [&quot;-module-name&quot;, &quot;TheName&quot;]
        }
    }
}
</div></div></div></section><section class="chapter"><h2 id="how-do-i-rename-the-ios-framework" data-toc="how-do-i-rename-the-ios-framework">How do I rename the iOS framework?</h2><p id="-96x2p_48">The default name is for an iOS framework is <code class="code" id="-96x2p_50">&lt;project name&gt;.framework</code>. To set a custom name, use the <code class="code" id="-96x2p_51">baseName</code> option. This will also set the module name.</p><div class="code-block" data-lang="kotlin">
kotlin {
    iosArm64(&quot;myapp&quot;) {
       binaries {
          framework {
              baseName = &quot;TheName&quot;
          }
       }
    }
}
</div></section><section class="chapter"><h2 id="how-do-i-enable-bitcode-for-my-kotlin-framework" data-toc="how-do-i-enable-bitcode-for-my-kotlin-framework">How do I enable bitcode for my Kotlin framework?</h2><p id="-96x2p_52">Bitcode embedding was deprecated in Xcode 14 and removed in Xcode 15 for all Apple targets. The Kotlin/Native compiler does not support bitcode embedding since Kotlin 2.0.20.</p><p id="-96x2p_53">If you're using earlier versions of Xcode but want to upgrade to Kotlin 2.0.20 or later versions, disable bitcode embedding in your Xcode projects.</p></section><section class="chapter"><h2 id="how-do-i-reference-objects-safely-from-different-coroutines" data-toc="how-do-i-reference-objects-safely-from-different-coroutines">How do I reference objects safely from different coroutines?</h2><p id="-96x2p_54">To safely access or update an object across multiple coroutines in Kotlin/Native, consider using concurrency-safe constructs, such as <code class="code" id="-96x2p_58">@Volatile</code> and <code class="code" id="-96x2p_59">AtomicReference</code>.</p><p id="-96x2p_55">Use <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.concurrent/-volatile/" id="-96x2p_60" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-96x2p_62">@Volatile</code></a> to annotate a <code class="code" id="-96x2p_61">var</code> property. This makes all reads and writes to the property's backing field atomic. In addition, writes become immediately visible to other threads. When another thread accesses this property, it observes not only the updated value but also the changes that happened before the update.</p><p id="-96x2p_56">Alternatively, use <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.concurrent.atomics/-atomic-reference/" id="-96x2p_63" data-external="true" rel="noopener noreferrer" target="_blank">AtomicReference</a>, which supports atomic reads and updates. On Kotlin/Native, it wraps a volatile variable and performs atomic operations. Kotlin also provides a set of types for atomic operations tailored to specific data types. You can use <code class="code" id="-96x2p_64">AtomicInt</code>, <code class="code" id="-96x2p_65">AtomicLong</code>, <code class="code" id="-96x2p_66">AtomicBoolean</code>, <code class="code" id="-96x2p_67">AtomicArray</code>, as well as <code class="code" id="-96x2p_68">AtomicIntArray</code> and <code class="code" id="-96x2p_69">AtomicLongArray</code>.</p><p id="-96x2p_57">For more information about access to shared mutable state, see the <span id="-96x2p_70">Coroutines documentation</span>.</p></section><section class="chapter"><h2 id="how-can-i-compile-my-project-with-unreleased-versions-of-kotlin-native" data-toc="how-can-i-compile-my-project-with-unreleased-versions-of-kotlin-native">How can I compile my project with unreleased versions of Kotlin/Native?</h2><p id="-96x2p_71">First, please consider trying <a href="eap.html" id="-96x2p_73">preview versions</a>.</p><p id="-96x2p_72">In case you need an even more recent development version, you can build Kotlin/Native from source code: clone <a href="https://github.com/JetBrains/kotlin" id="-96x2p_74" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin repository</a> and follow <a href="https://github.com/JetBrains/kotlin/blob/master/kotlin-native/README.md#building-from-source" id="-96x2p_75" data-external="true" rel="noopener noreferrer" target="_blank">these steps</a>.</p></section><div class="last-modified">16 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="native-binary-licenses.html" class="navigation-links__prev">License files for the Kotlin/Native binaries</a><a href="wasm-get-started.html" class="navigation-links__next">Get started with Kotlin/Wasm and Compose Multiplatform</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>