<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-15T17:12:02.827959972"><link rel="canonical" href="https://kotlinlang.org/docs/native-c-interop-stability.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Stability of C and Objective-C library import | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"platform-libraries","level":0,"title":"Platform libraries","anchor":"#platform-libraries"},{"id":"using-new-objective-c-classes-from-platform-libraries","level":1,"title":"Using new Objective-C classes from platform libraries","anchor":"#using-new-objective-c-classes-from-platform-libraries"},{"id":"third-party-libraries","level":0,"title":"Third-party libraries","anchor":"#third-party-libraries"},{"id":"importing-libraries-with-mismatched-xcode-version","level":1,"title":"Importing libraries with mismatched Xcode version","anchor":"#importing-libraries-with-mismatched-xcode-version"},{"id":"using-a-transitive-third-party-native-dependency","level":1,"title":"Using a transitive third-party native dependency","anchor":"#using-a-transitive-third-party-native-dependency"},{"id":"using-native-types-in-library-api","level":1,"title":"Using native types in library API","anchor":"#using-native-types-in-library-api"},{"id":"publishing-a-library-that-uses-third-party-library","level":1,"title":"Publishing a library that uses third-party library","anchor":"#publishing-a-library-that-uses-third-party-library"},{"id":"evolution-of-native-library-support","level":0,"title":"Evolution of native library support","anchor":"#evolution-of-native-library-support"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Stability of C and Objective-C library import | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/native-c-interop-stability.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Stability of C and Objective-C library import | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/native-c-interop-stability.html#webpage",
    "url": "https://kotlinlang.org/docs/native-c-interop-stability.html",
    "name": "Stability of C and Objective-C library import | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="native-c-interop-stability" data-main-title="Stability of C and Objective-C library import" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Platforms///Native" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/native/native-c-interop-stability.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="native-c-interop-stability" data-label-id="beta" id="native-c-interop-stability.md">Stability of C and Objective-C library import</h1><p id="jx4rc4_3">Kotlin/Native provides <a href="native-c-interop.html" id="jx4rc4_11">the ability to import C</a> and <a href="native-objc-interop.html" id="jx4rc4_12">Objective-C</a> libraries. Support for these libraries is currently <a href="components-stability.html#kotlin-native" id="jx4rc4_13">in Beta</a>.</p><p id="jx4rc4_4">One of the main reasons for the Beta status is that using C and Objective-C libraries might affect the compatibility of your code with different versions of Kotlin, dependencies, and Xcode. This guide lists compatibility problems that happen often in practice, problems that occur only in some cases, and hypothetical potential issues as well.</p><p id="jx4rc4_5">In this guide, C and Objective-C libraries, or <span class="emphasis" id="jx4rc4_14">native libraries</span> for simplicity, are divided into:</p><ul class="list _bullet" id="jx4rc4_6"><li class="list__item" id="jx4rc4_15"><p id="jx4rc4_17"><a href="#platform-libraries" id="jx4rc4_18">Platform libraries</a>, which Kotlin provides by default to access the &quot;system&quot; native libraries on each platform.</p></li><li class="list__item" id="jx4rc4_16"><p id="jx4rc4_19"><a href="#third-party-libraries" id="jx4rc4_20">Third-party libraries</a>, all other native libraries that require additional configuration for Kotlin use.</p></li></ul><p id="jx4rc4_7">These two kinds of native libraries have different compatibility specifics.</p><section class="chapter"><h2 id="platform-libraries" data-toc="platform-libraries">Platform libraries</h2><p id="jx4rc4_21"><a href="native-platform-libs.html" id="jx4rc4_28"><span class="emphasis" id="jx4rc4_29">Platform libraries</span></a> are shipped with the Kotlin/Native compiler. So, using different versions of Kotlin in the project results in getting different versions of platform libraries. For Apple targets (like iOS), platform libraries are generated based on the Xcode version supported by the particular compiler version.</p><p id="jx4rc4_22">Native library APIs shipped with Xcode SDKs change with every Xcode version. Even when such changes are source- and binary-compatible within the native language, they might become breaking for Kotlin due to the interoperability implementation.</p><p id="jx4rc4_23">As a result, updating the Kotlin version in a project might bring a breaking change in platform libraries. This might matter in two cases:</p><ul class="list _bullet" id="jx4rc4_24"><li class="list__item" id="jx4rc4_30"><p id="jx4rc4_32">There is a source breaking change in platform libraries that affects the compilation of the source code in your project. Usually, it's easy to fix.</p></li><li class="list__item" id="jx4rc4_31"><p id="jx4rc4_33">There is a binary breaking change in platform libraries that affects some of your dependencies. There is typically no easy workaround, and you'll need to wait until the library developer fixes this on their side, for example, by updating the Kotlin version.</p><aside class="prompt" data-type="note" data-title="" id="jx4rc4_34"><p id="jx4rc4_36">Such binary incompatibilities manifest as linkage warnings and runtime exceptions. If you prefer to detect them at compilation time, raise warnings to errors with the <a href="whatsnew19.html#library-linkage-in-kotlin-native" id="jx4rc4_37"><code class="code" id="jx4rc4_38">-Xpartial-linkage-loglevel=ERROR</code></a> compiler option.</p></aside><p id="jx4rc4_35"></p></li></ul><p id="jx4rc4_25">When the JetBrains team updates the Xcode version used to generate the platform libraries, it makes a reasonable effort to avoid breaking changes in platform libraries. Whenever a breaking change might occur, the team conducts impact analysis, and either decides to ignore a particular change (because the affected API is not commonly used) or applies an ad hoc fix.</p><p id="jx4rc4_26">Another potential reason for breaking changes in platform libraries is changes in the algorithm that translates native APIs to Kotlin. The JetBrains team makes reasonable efforts to avoid breaking changes in such cases as well.</p><section class="chapter"><h3 id="using-new-objective-c-classes-from-platform-libraries" data-toc="using-new-objective-c-classes-from-platform-libraries">Using new Objective-C classes from platform libraries</h3><p id="jx4rc4_39">The Kotlin compiler doesn't prevent you from using Objective-C classes that are not available with your deployment target.</p><p id="jx4rc4_40">For example, if your deployment target is iOS 17.0, and you use a class that appeared only in iOS 18.0, the compiler doesn't warn you, and your application might crash during launch on a device with iOS 17.0. Moreover, such a crash happens even when the execution never reaches those usages, so guarding them with version checks is not enough.</p><p id="jx4rc4_41">For more details, see <a href="native-objc-interop.html#strong-linking" id="jx4rc4_42">Strong linking</a>.</p></section></section><section class="chapter"><h2 id="third-party-libraries" data-toc="third-party-libraries">Third-party libraries</h2><p id="jx4rc4_43">Apart from system platform libraries, Kotlin/Native allows importing third-party native libraries. For example, you can use <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-cocoapods-overview.html" id="jx4rc4_48" data-external="true" rel="noopener noreferrer" target="_blank">CocoaPods integration</a> or set up a <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-dsl-reference.html#cinterops" id="jx4rc4_49" data-external="true" rel="noopener noreferrer" target="_blank">cinterops configuration</a>.</p><section class="chapter"><h3 id="importing-libraries-with-mismatched-xcode-version" data-toc="importing-libraries-with-mismatched-xcode-version">Importing libraries with mismatched Xcode version</h3><p id="jx4rc4_50">Importing third-party native libraries can lead to compatibility issues with different Xcode versions.</p><p id="jx4rc4_51">When processing a native library, the compiler typically uses header files from the locally installed Xcode because almost all native library headers import &quot;standard&quot; headers (for example, <code class="code" id="jx4rc4_57">stdint.h</code>) that come from Xcode.</p><p id="jx4rc4_52">That's why the Xcode version affects the import of native libraries to Kotlin. This is also one of the reasons why <a href="whatsnew21.html#ability-to-publish-kotlin-libraries-from-any-host" id="jx4rc4_58">cross-compilation of Apple targets from a non-Mac host</a> is still impossible when using third-party native libraries.</p><p id="jx4rc4_53">Every Kotlin version is compatible the most with a single Xcode version. This is the recommended version, which is tested the most against the corresponding Kotlin version. Check the compatibility with a particular Xcode version <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-compatibility-guide.html#version-compatibility" id="jx4rc4_59" data-external="true" rel="noopener noreferrer" target="_blank">in the compatibility table</a>.</p><p id="jx4rc4_54">Using newer or older Xcode versions is often possible but might lead to problems, usually affecting the import of third-party native libraries.</p><section class="chapter"><h4 id="xcode-version-is-newer-than-recommended" data-toc="xcode-version-is-newer-than-recommended">Xcode version is newer than recommended</h4><p id="jx4rc4_60">Using an Xcode version newer than recommended might break some Kotlin features. Importing third-party native libraries is most affected by this . It often doesn't work at all with an unsupported version of Xcode.</p></section><section class="chapter"><h4 id="xcode-version-is-older-than-recommended" data-toc="xcode-version-is-older-than-recommended">Xcode version is older than recommended</h4><p id="jx4rc4_61">Typically, Kotlin works well with older Xcode versions. There might be occasional issues that most often result in:</p><ul class="list _bullet" id="jx4rc4_62"><li class="list__item" id="jx4rc4_64"><p id="jx4rc4_66">The Kotlin API referring to a non-existent type as in <a href="https://youtrack.jetbrains.com/issue/KT-71694" id="jx4rc4_67" data-external="true" rel="noopener noreferrer" target="_blank">KT-71694</a>.</p></li><li class="list__item" id="jx4rc4_65"><p id="jx4rc4_68">A type from a system library is included in the Kotlin API of the native library. In this case, the project compiles successfully, but a system native type is added to your native library package. For example, you can then see this type unexpectedly in IDE autocompletion.</p></li></ul><p id="jx4rc4_63">If your Kotlin library successfully compiles with an older Xcode version, it's safe to publish unless you <a href="#using-native-types-in-library-api" id="jx4rc4_69">use types from a third-party library in your Kotlin library API</a>.</p></section></section><section class="chapter"><h3 id="using-a-transitive-third-party-native-dependency" data-toc="using-a-transitive-third-party-native-dependency">Using a transitive third-party native dependency</h3><p id="jx4rc4_70">When a Kotlin library in your project imports a third-party native library as part of its implementation, your project also gets access to that native library. This happens because Kotlin/Native doesn't distinguish between <code class="code" id="jx4rc4_73">api</code> and <code class="code" id="jx4rc4_74">implementation</code> dependency types, so native libraries always end up being <code class="code" id="jx4rc4_75">api</code> dependencies.</p><p id="jx4rc4_71">Using such a transitive native dependency is prone to more compatibility issues. For example, a change made by the Kotlin library developer might make the Kotlin representation of the native library incompatible, leading to compatibility issues when you update the Kotlin library.</p><p id="jx4rc4_72">So, instead of relying on a transitive dependency, configure interoperability with the same native library directly. To do that, use another package name for the native library, similar to <a href="#use-custom-package-name" id="jx4rc4_76">using custom package name</a> to prevent compatibility issues.</p></section><section class="chapter"><h3 id="using-native-types-in-library-api" data-toc="using-native-types-in-library-api">Using native types in library API</h3><p id="jx4rc4_77">If you publish a Kotlin library, be careful with native types in your library API. Such usages are expected to be broken in the future to fix compatibility and other issues, which will affect your library users.</p><p id="jx4rc4_78">There are cases when using native types in a library API is necessary because it's required for the library's purpose, for example, when a Kotlin library basically provides extensions to the native library. If that's not your case, avoid or limit using native types in the library API.</p><p id="jx4rc4_79">This recommendation only applies to usages of native types in library APIs and is not related to the application code. It also doesn't apply to library implementations, for example:</p><div class="code-block" data-lang="kotlin">
// Be extra careful! Native types are used in the library API:
public fun createUIView(): UIView
public fun handleThirdPartyNativeType(c: ThirdPartyNativeType)

// Be careful as usual; native types are not used in the library API:
internal fun createUIViewController(): UIViewController
public fun getDate(): String = NSDate().toString()
</div></section><section class="chapter"><h3 id="publishing-a-library-that-uses-third-party-library" data-toc="publishing-a-library-that-uses-third-party-library">Publishing a library that uses third-party library</h3><p id="jx4rc4_81">If you publish a Kotlin library that uses third-party native libraries, there are a few things you can do to avoid compatibility issues.</p><section class="chapter"><h4 id="use-custom-package-name" data-toc="use-custom-package-name">Use custom package name</h4><p id="jx4rc4_85">Using custom package names for third-party native libraries might help prevent compatibility issues.</p><p id="jx4rc4_86">When a native library is imported to Kotlin, it gets a Kotlin package name. If it's not unique, library users might get a clash. For example, if a native library is imported with the same package name elsewhere in the user's project or other dependencies, those two usages will clash.</p><p id="jx4rc4_87">In such a case, the compilation might fail with the <code class="code" id="jx4rc4_90">Linking globals named '...': symbol multiply defined!</code> error. However, there might be other errors or even a successful compilation.</p><p id="jx4rc4_88">To use a custom name for third-party native libraries:</p><ul class="list _bullet" id="jx4rc4_89"><li class="list__item" id="jx4rc4_91"><p id="jx4rc4_93">When importing a native library through the CocoaPods integration, use the <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-cocoapods-dsl-reference.html#pod-function" id="jx4rc4_94" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jx4rc4_96">packageName</code></a> property in the <code class="code" id="jx4rc4_95">pod {}</code> block of your Gradle build script.</p></li><li class="list__item" id="jx4rc4_92"><p id="jx4rc4_97">When importing a native library with a <code class="code" id="jx4rc4_98">cinterops</code> configuration, use the <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-dsl-reference.html#cinterops" id="jx4rc4_99" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jx4rc4_100">packageName</code></a> property in the configuration block.</p></li></ul></section><section class="chapter"><h4 id="check-compatibility-with-older-kotlin-versions" data-toc="check-compatibility-with-older-kotlin-versions">Check compatibility with older Kotlin versions</h4><p id="jx4rc4_101">When publishing a Kotlin library, the usage of a third-party native library might affect library compatibility with other Kotlin versions, specifically:</p><ul class="list _bullet" id="jx4rc4_102"><li class="list__item" id="jx4rc4_103"><p id="jx4rc4_105">Kotlin Multiplatform libraries don't guarantee forward compatibility (when an older compiler can use a library compiled with a newer compiler).</p><p id="jx4rc4_106">In practice, it works in some cases; however, using native libraries might further limit forward compatibility.</p></li><li class="list__item" id="jx4rc4_104"><p id="jx4rc4_107">Kotlin Multiplatform libraries provide backward compatibility (when a newer compiler can use libraries produced with an older version).</p><p id="jx4rc4_108">Using a native library in the Kotlin library normally shouldn't affect its backward compatibility. But it opens the possibility of more compiler bugs affecting compatibility.</p></li></ul></section><section class="chapter"><h4 id="avoid-embedding-static-libraries" data-toc="avoid-embedding-static-libraries">Avoid embedding static libraries</h4><p id="jx4rc4_109">When importing a native library, it's possible to include the associated <a href="native-definition-file.html#include-a-static-library" id="jx4rc4_111">static library</a> (<code class="code" id="jx4rc4_112">.a</code> file) using the <code class="code" id="jx4rc4_113">-staticLibrary</code> compiler option or the <code class="code" id="jx4rc4_114">staticLibraries</code> property in a <code class="code" id="jx4rc4_115">.def</code> file. In that case, your library users don't need to deal with native dependencies and linker options.</p><p id="jx4rc4_110">However, it's impossible to configure the usage of the included static library in any way: neither exclude nor replace (substitute) it. So, users won't be able to resolve potential clashes with other Kotlin libraries that include the same static library or adjust its version.</p></section></section></section><section class="chapter"><h2 id="evolution-of-native-library-support" data-toc="evolution-of-native-library-support">Evolution of native library support</h2><p id="jx4rc4_116">Currently, using C and Objective-C in Kotlin projects can lead to compatibility issues; some of which are listed in this guide. To fix them, some breaking changes might be necessary in the future, which itself contributes to the compatibility problem.</p></section><div class="last-modified">15 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="native-definition-file.html" class="navigation-links__prev">Definition file</a><a href="native-c-interop.html" class="navigation-links__next">Interoperability with C</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>