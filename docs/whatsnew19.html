<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-10T23:10:41.482599336"><link rel="canonical" href="https://kotlinlang.org/docs/whatsnew19.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>What's new in Kotlin 1.9.0 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"ide-support","level":0,"title":"IDE support","anchor":"#ide-support"},{"id":"new-kotlin-k2-compiler-updates","level":0,"title":"New Kotlin K2 compiler updates","anchor":"#new-kotlin-k2-compiler-updates"},{"id":"compatibility-of-the-kapt-compiler-plugin-with-the-k2-compiler","level":1,"title":"Compatibility of the kapt compiler plugin with the K2 compiler","anchor":"#compatibility-of-the-kapt-compiler-plugin-with-the-k2-compiler"},{"id":"try-the-k2-compiler-in-your-project","level":1,"title":"Try the K2 compiler in your project","anchor":"#try-the-k2-compiler-in-your-project"},{"id":"gradle-build-reports","level":1,"title":"Gradle build reports","anchor":"#gradle-build-reports"},{"id":"current-k2-compiler-limitations","level":1,"title":"Current K2 compiler limitations","anchor":"#current-k2-compiler-limitations"},{"id":"leave-your-feedback-on-the-new-k2-compiler","level":1,"title":"Leave your feedback on the new K2 compiler","anchor":"#leave-your-feedback-on-the-new-k2-compiler"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"stable-replacement-of-the-enum-class-values-function","level":1,"title":"Stable replacement of the enum class values function","anchor":"#stable-replacement-of-the-enum-class-values-function"},{"id":"stable-data-objects-for-symmetry-with-data-classes","level":1,"title":"Stable data objects for symmetry with data classes","anchor":"#stable-data-objects-for-symmetry-with-data-classes"},{"id":"support-for-secondary-constructors-with-bodies-in-inline-value-classes","level":1,"title":"Support for secondary constructors with bodies in inline value classes","anchor":"#support-for-secondary-constructors-with-bodies-in-inline-value-classes"},{"id":"kotlin-jvm","level":0,"title":"Kotlin/JVM","anchor":"#kotlin-jvm"},{"id":"deprecation-of-jvmdefault-annotation-and-legacy-xjvm-default-modes","level":1,"title":"Deprecation of JvmDefault annotation and legacy -Xjvm-default modes","anchor":"#deprecation-of-jvmdefault-annotation-and-legacy-xjvm-default-modes"},{"id":"kotlin-native","level":0,"title":"Kotlin/Native","anchor":"#kotlin-native"},{"id":"preview-of-custom-memory-allocator","level":1,"title":"Preview of custom memory allocator","anchor":"#preview-of-custom-memory-allocator"},{"id":"objective-c-or-swift-object-deallocation-hook-on-the-main-thread","level":1,"title":"Objective-C or Swift object deallocation hook on the main thread","anchor":"#objective-c-or-swift-object-deallocation-hook-on-the-main-thread"},{"id":"no-object-initialization-when-accessing-constant-values-in-kotlin-native","level":1,"title":"No object initialization when accessing constant values in Kotlin/Native","anchor":"#no-object-initialization-when-accessing-constant-values-in-kotlin-native"},{"id":"ability-to-configure-standalone-mode-for-ios-simulator-tests-in-kotlin-native","level":1,"title":"Ability to configure standalone mode for iOS simulator tests in Kotlin/Native","anchor":"#ability-to-configure-standalone-mode-for-ios-simulator-tests-in-kotlin-native"},{"id":"library-linkage-in-kotlin-native","level":1,"title":"Library linkage in Kotlin/Native","anchor":"#library-linkage-in-kotlin-native"},{"id":"compiler-option-for-c-interop-implicit-integer-conversions","level":1,"title":"Compiler option for C interop implicit integer conversions","anchor":"#compiler-option-for-c-interop-implicit-integer-conversions"},{"id":"kotlin-multiplatform","level":0,"title":"Kotlin Multiplatform","anchor":"#kotlin-multiplatform"},{"id":"changes-to-android-target-support","level":1,"title":"Changes to Android target support","anchor":"#changes-to-android-target-support"},{"id":"new-android-source-set-layout-enabled-by-default","level":1,"title":"New Android source set layout enabled by default","anchor":"#new-android-source-set-layout-enabled-by-default"},{"id":"preview-of-the-gradle-configuration-cache","level":1,"title":"Preview of the Gradle configuration cache","anchor":"#preview-of-the-gradle-configuration-cache"},{"id":"kotlin-wasm","level":0,"title":"Kotlin/Wasm","anchor":"#kotlin-wasm"},{"id":"size-related-optimizations","level":1,"title":"Size-related optimizations","anchor":"#size-related-optimizations"},{"id":"updates-in-javascript-interop","level":1,"title":"Updates in JavaScript interop","anchor":"#updates-in-javascript-interop"},{"id":"kotlin-wasm-in-kotlin-playground","level":1,"title":"Kotlin/Wasm in Kotlin Playground","anchor":"#kotlin-wasm-in-kotlin-playground"},{"id":"kotlin-js","level":0,"title":"Kotlin/JS","anchor":"#kotlin-js"},{"id":"removal-of-the-old-kotlin-js-compiler","level":1,"title":"Removal of the old Kotlin/JS compiler","anchor":"#removal-of-the-old-kotlin-js-compiler"},{"id":"deprecation-of-the-kotlin-js-gradle-plugin","level":1,"title":"Deprecation of the Kotlin/JS Gradle plugin","anchor":"#deprecation-of-the-kotlin-js-gradle-plugin"},{"id":"deprecation-of-external-enum","level":1,"title":"Deprecation of external enum","anchor":"#deprecation-of-external-enum"},{"id":"experimental-support-for-es2015-classes-and-modules","level":1,"title":"Experimental support for ES2015 classes and modules","anchor":"#experimental-support-for-es2015-classes-and-modules"},{"id":"changed-default-destination-of-js-production-distribution","level":1,"title":"Changed default destination of JS production distribution","anchor":"#changed-default-destination-of-js-production-distribution"},{"id":"extract-org-w3c-declarations-from-stdlib-js","level":1,"title":"Extract org.w3c declarations from stdlib-js","anchor":"#extract-org-w3c-declarations-from-stdlib-js"},{"id":"gradle","level":0,"title":"Gradle","anchor":"#gradle"},{"id":"removed-classpath-property","level":1,"title":"Removed classpath property","anchor":"#removed-classpath-property"},{"id":"new-compiler-options","level":1,"title":"New compiler options","anchor":"#new-compiler-options"},{"id":"project-level-compiler-options-for-kotlin-jvm","level":1,"title":"Project-level compiler options for Kotlin/JVM","anchor":"#project-level-compiler-options-for-kotlin-jvm"},{"id":"compiler-option-for-kotlin-native-module-name","level":1,"title":"Compiler option for Kotlin/Native module name","anchor":"#compiler-option-for-kotlin-native-module-name"},{"id":"separate-compiler-plugins-for-official-kotlin-libraries","level":1,"title":"Separate compiler plugins for official Kotlin libraries","anchor":"#separate-compiler-plugins-for-official-kotlin-libraries"},{"id":"incremented-minimum-supported-version","level":1,"title":"Incremented minimum supported version","anchor":"#incremented-minimum-supported-version"},{"id":"kapt-doesn-t-cause-eager-task-creation-in-gradle","level":1,"title":"kapt doesn\u0027t cause eager task creation in Gradle","anchor":"#kapt-doesn-t-cause-eager-task-creation-in-gradle"},{"id":"programmatic-configuration-of-the-jvm-target-validation-mode","level":1,"title":"Programmatic configuration of the JVM target validation mode","anchor":"#programmatic-configuration-of-the-jvm-target-validation-mode"},{"id":"standard-library","level":0,"title":"Standard library","anchor":"#standard-library"},{"id":"stable-operator-for-open-ended-ranges","level":1,"title":"Stable ..\u003c operator for open-ended ranges","anchor":"#stable-operator-for-open-ended-ranges"},{"id":"stable-time-api","level":1,"title":"Stable time API","anchor":"#stable-time-api"},{"id":"the-kotlin-native-standard-library-s-journey-towards-stabilization","level":1,"title":"The Kotlin/Native standard library\u0027s journey towards stabilization","anchor":"#the-kotlin-native-standard-library-s-journey-towards-stabilization"},{"id":"stable-volatile-annotation","level":1,"title":"Stable @Volatile annotation","anchor":"#stable-volatile-annotation"},{"id":"new-common-function-to-get-regex-capture-group-by-name","level":1,"title":"New common function to get regex capture group by name","anchor":"#new-common-function-to-get-regex-capture-group-by-name"},{"id":"new-path-utility-to-create-parent-directories","level":1,"title":"New path utility to create parent directories","anchor":"#new-path-utility-to-create-parent-directories"},{"id":"new-hexformat-class-to-format-and-parse-hexadecimals","level":1,"title":"New HexFormat class to format and parse hexadecimals","anchor":"#new-hexformat-class-to-format-and-parse-hexadecimals"},{"id":"documentation-updates","level":0,"title":"Documentation updates","anchor":"#documentation-updates"},{"id":"install-kotlin-1-9-0","level":0,"title":"Install Kotlin 1.9.0","anchor":"#install-kotlin-1-9-0"},{"id":"check-the-ide-version","level":1,"title":"Check the IDE version","anchor":"#check-the-ide-version"},{"id":"configure-gradle-settings","level":1,"title":"Configure Gradle settings","anchor":"#configure-gradle-settings"},{"id":"compatibility-guide-for-kotlin-1-9-0","level":0,"title":"Compatibility guide for Kotlin 1.9.0","anchor":"#compatibility-guide-for-kotlin-1-9-0"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="What's new in Kotlin 1.9.0 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/whatsnew19.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="What's new in Kotlin 1.9.0 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/whatsnew19.html#webpage",
    "url": "https://kotlinlang.org/docs/whatsnew19.html",
    "name": "What's new in Kotlin 1.9.0 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="whatsnew19" data-main-title="What's new in Kotlin 1.9.0" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="What's new in Kotlin///Earlier versions" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/whatsnew/whatsnew19.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="whatsnew19" id="whatsnew19.md">What's new in Kotlin 1.9.0</h1><p id="-telrni_2"><span class="emphasis" id="-telrni_20"><a href="releases.html#release-details" id="-telrni_21">Release date: July 6, 2023</a></span></p><p id="-telrni_3">The Kotlin 1.9.0 release is out and the K2 compiler for the JVM is now in <span class="control" id="-telrni_22">Beta</span>. Additionally, here are some of the main highlights:</p><ul class="list _bullet" id="-telrni_4"><li class="list__item" id="-telrni_23"><p id="-telrni_33"><a href="#new-kotlin-k2-compiler-updates" id="-telrni_34">New Kotlin K2 compiler updates</a></p></li><li class="list__item" id="-telrni_24"><p id="-telrni_35"><a href="#stable-replacement-of-the-enum-class-values-function" id="-telrni_36">Stable replacement of the enum class values function</a></p></li><li class="list__item" id="-telrni_25"><p id="-telrni_37"><a href="#stable-operator-for-open-ended-ranges" id="-telrni_38">Stable <code class="code" id="-telrni_39">..&lt;</code> operator for open-ended ranges</a></p></li><li class="list__item" id="-telrni_26"><p id="-telrni_40"><a href="#new-common-function-to-get-regex-capture-group-by-name" id="-telrni_41">New common function to get regex capture group by name</a></p></li><li class="list__item" id="-telrni_27"><p id="-telrni_42"><a href="#new-path-utility-to-create-parent-directories" id="-telrni_43">New path utility to create parent directories</a></p></li><li class="list__item" id="-telrni_28"><p id="-telrni_44"><a href="#preview-of-the-gradle-configuration-cache" id="-telrni_45">Preview of the Gradle configuration cache in Kotlin Multiplatform</a></p></li><li class="list__item" id="-telrni_29"><p id="-telrni_46"><a href="#changes-to-android-target-support" id="-telrni_47">Changes to Android target support in Kotlin Multiplatform</a></p></li><li class="list__item" id="-telrni_30"><p id="-telrni_48"><a href="#preview-of-custom-memory-allocator" id="-telrni_49">Preview of custom memory allocator in Kotlin/Native</a></p></li><li class="list__item" id="-telrni_31"><p id="-telrni_50"><a href="#library-linkage-in-kotlin-native" id="-telrni_51">Library linkage in Kotlin/Native</a></p></li><li class="list__item" id="-telrni_32"><p id="-telrni_52"><a href="#size-related-optimizations" id="-telrni_53">Size-related optimizations in Kotlin/Wasm</a></p></li></ul><p id="-telrni_5">You can also find a short overview of the updates in this video:</p><div class="video-player" id="-telrni_6"><object class="article__bordered-element" width="560" height="315" data-theme="light" type="application/x-shockwave-flash" data="https://www.youtube.com/v/fvwTZc-dxsM?color2=FBE9EC&amp;rel=0&amp;hd=1&amp;autoplay=0&amp;version=3&amp;modestbranding=1&amp;fs=1"></object></div><section class="chapter"><h2 id="ide-support" data-toc="ide-support">IDE support</h2><p id="-telrni_54">The Kotlin plugins that support 1.9.0 are available for:</p><div class="table-wrapper"><table class="wide" id="-telrni_55"><thead><tr class="ijRowHead" id="-telrni_59"><th id="-telrni_62"><p>IDE</p></th><th id="-telrni_63"><p>Supported versions</p></th></tr></thead><tbody><tr id="-telrni_60"><td id="-telrni_64"><p>IntelliJ IDEA</p></td><td id="-telrni_65"><p>2022.3.x, 2023.1.x</p></td></tr><tr id="-telrni_61"><td id="-telrni_66"><p>Android Studio</p></td><td id="-telrni_67"><p>Giraffe (223), Hedgehog (231)*</p></td></tr></tbody></table></div><p id="-telrni_56">*The Kotlin 1.9.0 plugin will be included with Android Studio Giraffe (223) and Hedgehog (231) in their upcoming releases.</p><p id="-telrni_57">The Kotlin 1.9.0 plugin will be included with IntelliJ IDEA 2023.2 in the upcoming releases.</p><aside class="prompt" data-type="warning" data-title="" id="-telrni_58"><p id="-telrni_68">To download Kotlin artifacts and dependencies, <a href="#configure-gradle-settings" id="-telrni_69">configure your Gradle settings</a> to use the Maven Central Repository.</p></aside></section><section class="chapter"><h2 id="new-kotlin-k2-compiler-updates" data-toc="new-kotlin-k2-compiler-updates">New Kotlin K2 compiler updates</h2><p id="-telrni_70">The Kotlin team at JetBrains continues to stabilize the K2 compiler, and the 1.9.0 release introduces further advancements. The K2 compiler for the JVM is now in <span class="control" id="-telrni_77">Beta</span>.</p><p id="-telrni_71">There's now also basic support for Kotlin/Native and multiplatform projects.</p><section class="chapter"><h3 id="compatibility-of-the-kapt-compiler-plugin-with-the-k2-compiler" data-toc="compatibility-of-the-kapt-compiler-plugin-with-the-k2-compiler">Compatibility of the kapt compiler plugin with the K2 compiler</h3><p id="-telrni_78">You can use the <a href="kapt.html" id="-telrni_83">kapt plugin</a> in your project along with the K2 compiler, but with some restrictions. Despite setting <code class="code" id="-telrni_84">languageVersion</code> to <code class="code" id="-telrni_85">2.0</code>, the kapt compiler plugin still utilizes the old compiler.</p><p id="-telrni_79">If you execute the kapt compiler plugin within a project where <code class="code" id="-telrni_86">languageVersion</code> is set to <code class="code" id="-telrni_87">2.0</code>, kapt will automatically switch to <code class="code" id="-telrni_88">1.9</code> and disable specific version compatibility checks. This behavior is equivalent to including the following command arguments:</p><ul class="list _bullet" id="-telrni_80"><li class="list__item" id="-telrni_89"><p id="-telrni_92"><code class="code" id="-telrni_93">-Xskip-metadata-version-check</code></p></li><li class="list__item" id="-telrni_90"><p id="-telrni_94"><code class="code" id="-telrni_95">-Xskip-prerelease-check</code></p></li><li class="list__item" id="-telrni_91"><p id="-telrni_96"><code class="code" id="-telrni_97">-Xallow-unstable-dependencies</code></p></li></ul><p id="-telrni_81">These checks are exclusively disabled for kapt tasks. All other compilation tasks will continue to utilize the new K2 compiler.</p><p id="-telrni_82">If you encounter any issues when using kapt with the K2 compiler, please report them to our <a href="http://kotl.in/issue" id="-telrni_98" data-external="true" rel="noopener noreferrer" target="_blank">issue tracker</a>.</p></section><section class="chapter"><h3 id="try-the-k2-compiler-in-your-project" data-toc="try-the-k2-compiler-in-your-project">Try the K2 compiler in your project</h3><p id="-telrni_99">Starting with 1.9.0 and until the release of Kotlin 2.0, you can easily test the K2 compiler by adding the <code class="code" id="-telrni_103">kotlin.experimental.tryK2=true</code> Gradle property to your <code class="code" id="-telrni_104">gradle.properties</code> file. You can also run the following command:</p><div class="code-block" data-lang="bash">
./gradlew assemble -Pkotlin.experimental.tryK2=true
</div><p id="-telrni_101">This Gradle property automatically sets the language version to 2.0 and updates the build report with the number of Kotlin tasks compiled using the K2 compiler compared to the current compiler:</p><div class="code-block" data-lang="none">
##### 'kotlin.experimental.tryK2' results (Kotlin/Native not checked) #####
:lib:compileKotlin: 2.0 language version
:app:compileKotlin: 2.0 language version
##### 100% (2/2) tasks have been compiled with Kotlin 2.0 #####
</div></section><section class="chapter"><h3 id="gradle-build-reports" data-toc="gradle-build-reports">Gradle build reports</h3><p id="-telrni_105"><a href="gradle-compilation-and-caches.html#build-reports" id="-telrni_111">Gradle build reports</a> now show whether the current or the K2 compiler was used to compile the code. In Kotlin 1.9.0, you can see this information in your <a href="https://scans.gradle.com/" id="-telrni_112" data-external="true" rel="noopener noreferrer" target="_blank">Gradle build scans</a>:</p><figure id="-telrni_106"><img alt="Gradle build scan - K1" src="images/gradle-build-scan-k1.png" title="Gradle build scan - K1" width="700" height="196"></figure><figure id="-telrni_107"><img alt="Gradle build scan - K2" src="images/gradle-build-scan-k2.png" title="Gradle build scan - K2" width="700" height="274"></figure><p id="-telrni_108">You can also find the Kotlin version used in the project right in the build report:</p><div class="code-block" data-lang="none">
Task info:
  Kotlin language version: 1.9
</div><aside class="prompt" data-type="note" data-title="" id="-telrni_110"><p id="-telrni_113">If you use Gradle 8.0, you might come across some problems with build reports, especially when Gradle configuration caching is enabled. This is a known issue, fixed in Gradle 8.1 and later.</p></aside></section><section class="chapter"><h3 id="current-k2-compiler-limitations" data-toc="current-k2-compiler-limitations">Current K2 compiler limitations</h3><p id="-telrni_114">Enabling K2 in your Gradle project comes with certain limitations that can affect projects using Gradle versions below 8.3 in the following cases:</p><ul class="list _bullet" id="-telrni_115"><li class="list__item" id="-telrni_120"><p id="-telrni_124">Compilation of source code from <code class="code" id="-telrni_125">buildSrc</code>.</p></li><li class="list__item" id="-telrni_121"><p id="-telrni_126">Compilation of Gradle plugins in included builds.</p></li><li class="list__item" id="-telrni_122"><p id="-telrni_127">Compilation of other Gradle plugins if they are used in projects with Gradle versions below 8.3.</p></li><li class="list__item" id="-telrni_123"><p id="-telrni_128">Building Gradle plugin dependencies.</p></li></ul><p id="-telrni_116">If you encounter any of the problems mentioned above, you can take the following steps to address them:</p><ul class="list _bullet" id="-telrni_117"><li class="list__item" id="-telrni_129"><p id="-telrni_130">Set the language version for <code class="code" id="-telrni_131">buildSrc</code>, any Gradle plugins, and their dependencies:</p></li></ul><div class="code-block" data-lang="kotlin">
kotlin {
    compilerOptions {
        languageVersion.set(org.jetbrains.kotlin.gradle.dsl.KotlinVersion.KOTLIN_1_9)
        apiVersion.set(org.jetbrains.kotlin.gradle.dsl.KotlinVersion.KOTLIN_1_9)
    }
}
</div><ul class="list _bullet" id="-telrni_119"><li class="list__item" id="-telrni_132"><p id="-telrni_133">Update the Gradle version in your project to 8.3 when it becomes available.</p></li></ul></section><section class="chapter"><h3 id="leave-your-feedback-on-the-new-k2-compiler" data-toc="leave-your-feedback-on-the-new-k2-compiler">Leave your feedback on the new K2 compiler</h3><p id="-telrni_134">We'd appreciate any feedback you may have!</p><ul class="list _bullet" id="-telrni_135"><li class="list__item" id="-telrni_136"><p id="-telrni_139">Provide your feedback directly to K2 developers Kotlin's Slack &ndash; <a href="https://surveys.jetbrains.com/s3/kotlin-slack-sign-up" id="-telrni_140" data-external="true" rel="noopener noreferrer" target="_blank">get an invite</a> and join the <a href="https://kotlinlang.slack.com/archives/C03PK0PE257" id="-telrni_141" data-external="true" rel="noopener noreferrer" target="_blank">#k2-early-adopters</a> channel.</p></li><li class="list__item" id="-telrni_137"><p id="-telrni_142">Report any problems you've faced with the new K2 compiler on <a href="https://kotl.in/issue" id="-telrni_143" data-external="true" rel="noopener noreferrer" target="_blank">our issue tracker</a>.</p></li><li class="list__item" id="-telrni_138"><p id="-telrni_144"><a href="https://www.jetbrains.com/help/idea/settings-usage-statistics.html" id="-telrni_145" data-external="true" rel="noopener noreferrer" target="_blank">Enable the <span class="control" id="-telrni_146">Send usage statistics</span> option</a> to allow JetBrains to collect anonymous data about K2 usage.</p></li></ul></section></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><p id="-telrni_147">In Kotlin 1.9.0, we're stabilizing some new language features that were introduced earlier:</p><ul class="list _bullet" id="-telrni_148"><li class="list__item" id="-telrni_152"><p id="-telrni_155"><a href="#stable-replacement-of-the-enum-class-values-function" id="-telrni_156">Replacement of the enum class values function</a></p></li><li class="list__item" id="-telrni_153"><p id="-telrni_157"><a href="#stable-data-objects-for-symmetry-with-data-classes" id="-telrni_158">Data object symmetry with data classes</a></p></li><li class="list__item" id="-telrni_154"><p id="-telrni_159"><a href="#support-for-secondary-constructors-with-bodies-in-inline-value-classes" id="-telrni_160">Support for secondary constructors with bodies in inline value classes</a></p></li></ul><section class="chapter"><h3 id="stable-replacement-of-the-enum-class-values-function" data-toc="stable-replacement-of-the-enum-class-values-function">Stable replacement of the enum class values function</h3><p id="-telrni_161">In 1.8.20, the <code class="code" id="-telrni_165">entries</code> property for enum classes was introduced as an Experimental feature. The <code class="code" id="-telrni_166">entries</code> property is a modern and performant replacement for the synthetic <code class="code" id="-telrni_167">values()</code> function. In 1.9.0, the <code class="code" id="-telrni_168">entries</code> property is Stable.</p><aside class="prompt" data-type="tip" data-title="" id="-telrni_162"><p id="-telrni_169">The <code class="code" id="-telrni_170">values()</code> function is still supported, but we recommend that you use the <code class="code" id="-telrni_171">entries</code> property instead.</p></aside><div class="code-block" data-lang="kotlin">
enum class Color(val colorName: String, val rgb: String) {
    RED(&quot;Red&quot;, &quot;#FF0000&quot;),
    ORANGE(&quot;Orange&quot;, &quot;#FF7F00&quot;),
    YELLOW(&quot;Yellow&quot;, &quot;#FFFF00&quot;)
}

fun findByRgb(rgb: String): Color? = Color.entries.find { it.rgb == rgb }
</div><p id="-telrni_164">For more information about the <code class="code" id="-telrni_172">entries</code> property for enum classes, see <a href="whatsnew1820.html#a-modern-and-performant-replacement-of-the-enum-class-values-function" id="-telrni_173">What's new in Kotlin 1.8.20</a>.</p></section><section class="chapter"><h3 id="stable-data-objects-for-symmetry-with-data-classes" data-toc="stable-data-objects-for-symmetry-with-data-classes">Stable data objects for symmetry with data classes</h3><p id="-telrni_174">Data object declarations, which were introduced in <a href="whatsnew1820.html#preview-of-data-objects-for-symmetry-with-data-classes" id="-telrni_178">Kotlin 1.8.20</a>, are now Stable. This includes the functions added for symmetry with data classes: <code class="code" id="-telrni_179">toString()</code>, <code class="code" id="-telrni_180">equals()</code>, and <code class="code" id="-telrni_181">hashCode()</code>.</p><p id="-telrni_175">This feature is particularly useful with <code class="code" id="-telrni_182">sealed</code> hierarchies (like a <code class="code" id="-telrni_183">sealed class</code> or <code class="code" id="-telrni_184">sealed interface</code> hierarchy), because <code class="code" id="-telrni_185">data object</code> declarations can be used conveniently alongside <code class="code" id="-telrni_186">data class</code> declarations. In this example, declaring <code class="code" id="-telrni_187">EndOfFile</code> as a <code class="code" id="-telrni_188">data object</code> instead of a plain <code class="code" id="-telrni_189">object</code> means that it automatically has a <code class="code" id="-telrni_190">toString()</code> function without the need to override it manually. This maintains symmetry with the accompanying data class definitions.</p><div class="code-block" data-lang="kotlin">
sealed interface ReadResult
data class Number(val number: Int) : ReadResult
data class Text(val text: String) : ReadResult
data object EndOfFile : ReadResult

fun main() {
    println(Number(7)) // Number(number=7)
    println(EndOfFile) // EndOfFile
}
</div><p id="-telrni_177">For more information, see <a href="whatsnew1820.html#preview-of-data-objects-for-symmetry-with-data-classes" id="-telrni_191">What's new in Kotlin 1.8.20</a>.</p></section><section class="chapter"><h3 id="support-for-secondary-constructors-with-bodies-in-inline-value-classes" data-toc="support-for-secondary-constructors-with-bodies-in-inline-value-classes">Support for secondary constructors with bodies in inline value classes</h3><p id="-telrni_192">Starting with Kotlin 1.9.0, the use of secondary constructors with bodies in <a href="inline-classes.html" id="-telrni_196">inline value classes</a> is available by default:</p><div class="code-block" data-lang="kotlin">
@JvmInline
value class Person(private val fullName: String) {
    // Allowed since Kotlin 1.4.30:
    init {
        check(fullName.isNotBlank()) {
            &quot;Full name shouldn't be empty&quot;
        }
    }
    // Allowed by default since Kotlin 1.9.0:
    constructor(name: String, lastName: String) : this(&quot;$name $lastName&quot;) {
        check(lastName.isNotBlank()) {
            &quot;Last name shouldn't be empty&quot;
        }
    }
}
</div><p id="-telrni_194">Previously, Kotlin allowed only public primary constructors in inline classes. As a result, it was impossible to encapsulate underlying values or create an inline class that would represent some constrained values.</p><p id="-telrni_195">As Kotlin developed, these issues were fixed. Kotlin 1.4.30 lifted restrictions on <code class="code" id="-telrni_197">init</code> blocks and then Kotlin 1.8.20 came with a preview of secondary constructors with bodies. They are now available by default. Learn more about the development of Kotlin inline classes in <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/inline-classes.md" id="-telrni_198" data-external="true" rel="noopener noreferrer" target="_blank">this KEEP</a>.</p></section></section><section class="chapter"><h2 id="kotlin-jvm" data-toc="kotlin-jvm">Kotlin/JVM</h2><p id="-telrni_199">Starting with version 1.9.0, the compiler can generate classes with a bytecode version corresponding to JVM 20. In addition, the deprecation of the <code class="code" id="-telrni_201">JvmDefault</code> annotation and legacy <code class="code" id="-telrni_202">-Xjvm-default</code> modes continues.</p><section class="chapter"><h3 id="deprecation-of-jvmdefault-annotation-and-legacy-xjvm-default-modes" data-toc="deprecation-of-jvmdefault-annotation-and-legacy-xjvm-default-modes">Deprecation of JvmDefault annotation and legacy -Xjvm-default modes</h3><p id="-telrni_203">Starting from Kotlin 1.5, the usage of the <code class="code" id="-telrni_205">JvmDefault</code> annotation has been deprecated in favor of the newer <code class="code" id="-telrni_206">-Xjvm-default</code> modes: <code class="code" id="-telrni_207">all</code> and <code class="code" id="-telrni_208">all-compatibility</code>. With the introduction of <code class="code" id="-telrni_209">JvmDefaultWithoutCompatibility</code> in Kotlin 1.4 and <code class="code" id="-telrni_210">JvmDefaultWithCompatibility</code> in Kotlin 1.6, these modes offer comprehensive control over the generation of <code class="code" id="-telrni_211">DefaultImpls</code> classes, ensuring seamless compatibility with older Kotlin code.</p><p id="-telrni_204">Consequently in Kotlin 1.9.0, the <code class="code" id="-telrni_212">JvmDefault</code> annotation no longer holds any significance and has been marked as deprecated, resulting in an error. It will eventually be removed from Kotlin.</p></section></section><section class="chapter"><h2 id="kotlin-native" data-toc="kotlin-native">Kotlin/Native</h2><p id="-telrni_213">Among other improvements, this release brings further advancements to the <a href="native-memory-manager.html" id="-telrni_221">Kotlin/Native memory manager</a> that should enhance its robustness and performance:</p><ul class="list _bullet" id="-telrni_214"><li class="list__item" id="-telrni_222"><p id="-telrni_227"><a href="#preview-of-custom-memory-allocator" id="-telrni_228">Preview of custom memory allocator</a></p></li><li class="list__item" id="-telrni_223"><p id="-telrni_229"><a href="#objective-c-or-swift-object-deallocation-hook-on-the-main-thread" id="-telrni_230">Objective-C or Swift object deallocation hook on the main thread</a></p></li><li class="list__item" id="-telrni_224"><p id="-telrni_231"><a href="#no-object-initialization-when-accessing-constant-values-in-kotlin-native" id="-telrni_232">No object initialization when accessing constant values in Kotlin/Native</a></p></li><li class="list__item" id="-telrni_225"><p id="-telrni_233"><a href="#ability-to-configure-standalone-mode-for-ios-simulator-tests-in-kotlin-native" id="-telrni_234">Ability to configure standalone mode for iOS simulator tests</a></p></li><li class="list__item" id="-telrni_226"><p id="-telrni_235"><a href="#library-linkage-in-kotlin-native" id="-telrni_236">Library linkage in Kotlin/Native</a></p></li></ul><section class="chapter"><h3 id="preview-of-custom-memory-allocator" data-toc="preview-of-custom-memory-allocator">Preview of custom memory allocator</h3><p id="-telrni_237">Kotlin 1.9.0 introduces the preview of a custom memory allocator. Its allocation system improves the runtime performance of the <a href="native-memory-manager.html" id="-telrni_246">Kotlin/Native memory manager</a>.</p><p id="-telrni_238">The current object allocation system in Kotlin/Native uses a general-purpose allocator that doesn't have the functionality for efficient garbage collection. To compensate, it maintains thread-local linked lists of all allocated objects before the garbage collector (GC) merges them into a single list, which can be iterated during sweeping. This approach comes with several performance downsides:</p><ul class="list _bullet" id="-telrni_239"><li class="list__item" id="-telrni_247"><p id="-telrni_250">The sweeping order lacks memory locality and often results in scattered memory access patterns, leading to potential performance issues.</p></li><li class="list__item" id="-telrni_248"><p id="-telrni_251">Linked lists require additional memory for each object, increasing memory usage, particularly when dealing with many small objects.</p></li><li class="list__item" id="-telrni_249"><p id="-telrni_252">The single list of allocated objects makes it challenging to parallelize sweeping, which can cause memory usage problems when mutator threads allocate objects faster than the GC thread can collect them.</p></li></ul><p id="-telrni_240">To address these issues, Kotlin 1.9.0 introduces a preview of the custom allocator. It divides system memory into pages, allowing independent sweeping in consecutive order. Each allocation becomes a memory block within a page, and the page keeps track of block sizes. Different page types are optimized for various allocation sizes. The consecutive arrangement of memory blocks ensures efficient iteration through all allocated blocks.</p><p id="-telrni_241">When a thread allocates memory, it searches for a suitable page based on the allocation size. Threads maintain a set of pages for different size categories. Typically, the current page for a given size can accommodate the allocation. If not, the thread requests a different page from the shared allocation space. This page may already be available, require sweeping, or should be created first.</p><p id="-telrni_242">The new allocator allows having multiple independent allocation spaces simultaneously, which will allow the Kotlin team to experiment with different page layouts to improve performance even further.</p><p id="-telrni_243">For more information on the design of the new allocator, see this <a href="https://github.com/JetBrains/kotlin/blob/master/kotlin-native/runtime/src/alloc/custom/README.md" id="-telrni_253" data-external="true" rel="noopener noreferrer" target="_blank">README</a>.</p><section class="chapter"><h4 id="how-to-enable" data-toc="how-to-enable">How to enable</h4><p id="-telrni_254">Add the <code class="code" id="-telrni_256">-Xallocator=custom</code> compiler option:</p><div class="code-block" data-lang="kotlin">
kotlin {
    macosX64(&quot;native&quot;) {
        binaries.executable()

        compilations.configureEach {
            compilerOptions.configure {
                freeCompilerArgs.add(&quot;-Xallocator=custom&quot;)
            }
        }
    }
}
</div></section><section class="chapter"><h4 id="leave-feedback" data-toc="leave-feedback">Leave feedback</h4><p id="-telrni_257">We would appreciate your feedback in <a href="https://youtrack.jetbrains.com/issue/KT-55364/Implement-custom-allocator-for-Kotlin-Native" id="-telrni_258" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack</a> to improve the custom allocator.</p></section></section><section class="chapter"><h3 id="objective-c-or-swift-object-deallocation-hook-on-the-main-thread" data-toc="objective-c-or-swift-object-deallocation-hook-on-the-main-thread">Objective-C or Swift object deallocation hook on the main thread</h3><p id="-telrni_259">Starting with Kotlin 1.9.0, the Objective-C or Swift object deallocation hook is called on the main thread if the object is passed to Kotlin there. The way the <a href="native-memory-manager.html" id="-telrni_264">Kotlin/Native memory manager</a> previously handled references to Objective-C objects could lead to memory leaks. We believe the new behavior should improve the robustness of the memory manager.</p><p id="-telrni_260">Consider an Objective-C object that is referenced in Kotlin code, for example, when passed as an argument, returned by a function, or retrieved from a collection. In this case, Kotlin creates its own object that holds the reference to the Objective-C object. When the Kotlin object gets deallocated, the Kotlin/Native runtime calls the <code class="code" id="-telrni_265">objc_release</code> function that releases that Objective-C reference.</p><p id="-telrni_261">Previously, the Kotlin/Native memory manager ran <code class="code" id="-telrni_266">objc_release</code> on a special GC thread. If it's the last object reference, the object gets deallocated. Issues could come up when Objective-C objects have custom deallocation hooks like the <code class="code" id="-telrni_267">dealloc</code> method in Objective-C or the <code class="code" id="-telrni_268">deinit</code> block in Swift, and these hooks expect to be called on a specific thread.</p><p id="-telrni_262">Since hooks for objects on the main thread usually expect to be called there, Kotlin/Native runtime now calls <code class="code" id="-telrni_269">objc_release</code> on the main thread as well. It should cover the cases when the Objective-C object was passed to Kotlin on the main thread, creating a Kotlin peer object there. This only works if the main dispatch queue is processed, which is the case for regular UI applications. When it's not the main queue or the object was passed to Kotlin on a thread other than main, the <code class="code" id="-telrni_270">objc_release</code> is called on a special GC thread as before.</p><section class="chapter"><h4 id="how-to-opt-out" data-toc="how-to-opt-out">How to opt out</h4><p id="-telrni_271">In case you face issues, you can disable this behavior in your <code class="code" id="-telrni_274">gradle.properties</code> file with the following option:</p><div class="code-block" data-lang="none">
kotlin.native.binary.objcDisposeOnMain=false
</div><p id="-telrni_273">Don't hesitate to report such cases to <a href="https://kotl.in/issue" id="-telrni_275" data-external="true" rel="noopener noreferrer" target="_blank">our issue tracker</a>.</p></section></section><section class="chapter"><h3 id="no-object-initialization-when-accessing-constant-values-in-kotlin-native" data-toc="no-object-initialization-when-accessing-constant-values-in-kotlin-native">No object initialization when accessing constant values in Kotlin/Native</h3><p id="-telrni_276">Starting with Kotlin 1.9.0, the Kotlin/Native backend doesn't initialize objects when accessing <code class="code" id="-telrni_279">const val</code> fields:</p><div class="code-block" data-lang="kotlin">
object MyObject {
    init {
        println(&quot;side effect!&quot;)
    }

    const val y = 1
}

fun main() {
    println(MyObject.y) // No initialization at first
    val x = MyObject    // Initialization occurs
    println(x.y)
}
</div><p id="-telrni_278">The behavior is now unified with Kotlin/JVM, where the implementation is consistent with Java and objects are never initialized in this case. You can also expect some performance improvements in your Kotlin/Native projects thanks to this change.</p></section><section class="chapter"><h3 id="ability-to-configure-standalone-mode-for-ios-simulator-tests-in-kotlin-native" data-toc="ability-to-configure-standalone-mode-for-ios-simulator-tests-in-kotlin-native">Ability to configure standalone mode for iOS simulator tests in Kotlin/Native</h3><p id="-telrni_280">By default, when running iOS simulator tests for Kotlin/Native, the <code class="code" id="-telrni_284">--standalone</code> flag is used to avoid manual simulator booting and shutdown. In 1.9.0, you can now configure whether this flag is used in a Gradle task via the <code class="code" id="-telrni_285">standalone</code> property. By default, the <code class="code" id="-telrni_286">--standalone</code> flag is used so standalone mode is enabled.</p><p id="-telrni_281">Here is an example of how to disable standalone mode in your <code class="code" id="-telrni_287">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
tasks.withType&lt;org.jetbrains.kotlin.gradle.targets.native.tasks.KotlinNativeSimulatorTest&gt;().configureEach {
    standalone.set(false)
}
</div><aside class="prompt" data-type="warning" data-title="" id="-telrni_283"><p id="-telrni_288">If you disable standalone mode, you must boot the simulator manually. To boot your simulator from CLI, you can use the following command:</p><div class="code-block" data-lang="bash">
/usr/bin/xcrun simctl boot &lt;DeviceId&gt;
</div></aside></section><section class="chapter"><h3 id="library-linkage-in-kotlin-native" data-toc="library-linkage-in-kotlin-native">Library linkage in Kotlin/Native</h3><p id="-telrni_290">Starting with Kotlin 1.9.0, the Kotlin/Native compiler treats linkage issues in Kotlin libraries the same way as Kotlin/JVM. You might face such issues if the author of one third-party Kotlin library makes an incompatible change in experimental APIs that another third-party Kotlin library consumes.</p><p id="-telrni_291">Now builds don't fail during compilation in case of linkage issues between third-party Kotlin libraries. Instead, you'll only encounter these errors in run time, exactly as on the JVM.</p><p id="-telrni_292">The Kotlin/Native compiler reports warnings every time it detects issues with library linkage. You can find such warnings in your compilation logs, for example:</p><div class="code-block" data-lang="none">
No function found for symbol 'org.samples/MyRemovedClass.doSomething|3657632771909858561[0]'

Can not get instance of singleton 'MyEnumClass.REMOVED_ENTRY': No enum entry found for symbol 'org.samples/MyEnumClass.REMOVED_ENTRY|null[0]'

Function 'getMyRemovedClass' can not be called: Function uses unlinked class symbol 'org.samples/MyRemovedClass|null[0]'
</div><p id="-telrni_294">You can further configure or even disable this behavior in your projects:</p><ul class="list _bullet" id="-telrni_295"><li class="list__item" id="-telrni_297"><p id="-telrni_300">If you don't want to see these warnings in your compilation logs, suppress them with the <code class="code" id="-telrni_301">-Xpartial-linkage-loglevel=INFO</code> compiler option.</p></li><li class="list__item" id="-telrni_298"><p id="-telrni_302">It's also possible to raise the severity of reported warnings to compilation errors with <code class="code" id="-telrni_303">-Xpartial-linkage-loglevel=ERROR</code>. In this case, the compilation fails and you'll see all the errors in the compilation log. Use this option to examine the linkage issues more closely.</p></li><li class="list__item" id="-telrni_299"><p id="-telrni_304">If you face unexpected problems with this feature, you can always opt out with the <code class="code" id="-telrni_305">-Xpartial-linkage=disable</code> compiler option. Don't hesitate to report such cases to <a href="https://kotl.in/issue" id="-telrni_306" data-external="true" rel="noopener noreferrer" target="_blank">our issue tracker</a>.</p></li></ul><div class="code-block" data-lang="kotlin">
// An example of passing compiler options via Gradle build file.
kotlin {
    macosX64(&quot;native&quot;) {
        binaries.executable()

        compilations.configureEach {
            compilerOptions.configure {
                // To suppress linkage warnings:
                freeCompilerArgs.add(&quot;-Xpartial-linkage-loglevel=INFO&quot;)

                // To raise linkage warnings to errors:
                freeCompilerArgs.add(&quot;-Xpartial-linkage-loglevel=ERROR&quot;)

                // To disable the feature completely:
                freeCompilerArgs.add(&quot;-Xpartial-linkage=disable&quot;)
            }
        }
    }
}
</div></section><section class="chapter"><h3 id="compiler-option-for-c-interop-implicit-integer-conversions" data-toc="compiler-option-for-c-interop-implicit-integer-conversions">Compiler option for C interop implicit integer conversions</h3><p id="-telrni_307">We have introduced a compiler option for C interop that allows you to use implicit integer conversions. After careful consideration, we've introduced this compiler option to prevent unintentional use as this feature still has room for improvement and our aim is to have an API of the highest quality.</p><p id="-telrni_308">In this code sample an implicit integer conversion allows <code class="code" id="-telrni_313">options = 0</code> even though <a href="https://developer.apple.com/documentation/foundation/nscalendar/options" id="-telrni_314" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_317">options</code></a> has unsigned type <code class="code" id="-telrni_315">UInt</code> and <code class="code" id="-telrni_316">0</code> is signed.</p><div class="code-block" data-lang="kotlin">
val today = NSDate()
val tomorrow = NSCalendar.currentCalendar.dateByAddingUnit(
    unit = NSCalendarUnitDay,
    value = 1,
    toDate = today,
    options = 0
)
</div><p id="-telrni_310">To use implicit conversions with native interop libraries, use the <code class="code" id="-telrni_318">-XXLanguage:+ImplicitSignedToUnsignedIntegerConversion</code> compiler option.</p><p id="-telrni_311">You can configure this in your Gradle <code class="code" id="-telrni_319">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
tasks.withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinNativeCompile&gt;().configureEach {
    compilerOptions.freeCompilerArgs.addAll(
        &quot;-XXLanguage:+ImplicitSignedToUnsignedIntegerConversion&quot;
    )
}
</div></section></section><section class="chapter"><h2 id="kotlin-multiplatform" data-toc="kotlin-multiplatform">Kotlin Multiplatform</h2><p id="-telrni_320">Kotlin Multiplatform has received some notable updates in 1.9.0 designed to improve your developer experience:</p><ul class="list _bullet" id="-telrni_321"><li class="list__item" id="-telrni_325"><p id="-telrni_328"><a href="#changes-to-android-target-support" id="-telrni_329">Changes to Android target support</a></p></li><li class="list__item" id="-telrni_326"><p id="-telrni_330"><a href="#new-android-source-set-layout-enabled-by-default" id="-telrni_331">New Android source set layout enabled by default</a></p></li><li class="list__item" id="-telrni_327"><p id="-telrni_332"><a href="#preview-of-the-gradle-configuration-cache" id="-telrni_333">Preview of the Gradle configuration cache in multiplatform projects</a></p></li></ul><section class="chapter"><h3 id="changes-to-android-target-support" data-toc="changes-to-android-target-support">Changes to Android target support</h3><p id="-telrni_334">We continue our efforts to stabilize Kotlin Multiplatform. An essential step is to provide first-class support for the Android target. We're excited to announce that in the future, the Android team from Google will provide its own Gradle plugin to support Android in Kotlin Multiplatform.</p><p id="-telrni_335">To open the way for this new solution from Google, we're renaming the <code class="code" id="-telrni_337">android</code> block in the current Kotlin DSL in 1.9.0. Please change all the occurrences of the <code class="code" id="-telrni_338">android</code> block to <code class="code" id="-telrni_339">androidTarget</code> in your build scripts. This is a temporary change that is necessary to free the <code class="code" id="-telrni_340">android</code> name for the upcoming DSL from Google.</p><p id="-telrni_336">The Google plugin will be the preferred way of working with Android in multiplatform projects. When it's ready, we'll provide the necessary migration instructions so that you'll be able to use the short <code class="code" id="-telrni_341">android</code> name as before.</p></section><section class="chapter"><h3 id="new-android-source-set-layout-enabled-by-default" data-toc="new-android-source-set-layout-enabled-by-default">New Android source set layout enabled by default</h3><p id="-telrni_342">Starting with Kotlin 1.9.0, the new Android source set layout is the default. It replaced the previous naming schema for directories, which was confusing in multiple ways. The new layout has a number of advantages:</p><ul class="list _bullet" id="-telrni_343"><li class="list__item" id="-telrni_345"><p id="-telrni_348">Simplified type semantics &ndash; The new Android source layout provides clear and consistent naming conventions that help to distinguish between different types of source sets.</p></li><li class="list__item" id="-telrni_346"><p id="-telrni_349">Improved source directory layout &ndash; With the new layout, the <code class="code" id="-telrni_350">SourceDirectories</code> arrangement becomes more coherent, making it easier to organize code and locate source files.</p></li><li class="list__item" id="-telrni_347"><p id="-telrni_351">Clear naming schema for Gradle configurations &ndash; The schema is now more consistent and predictable in both <code class="code" id="-telrni_352">KotlinSourceSets</code> and <code class="code" id="-telrni_353">AndroidSourceSets</code>.</p></li></ul><p id="-telrni_344">The new layout requires the Android Gradle plugin version 7.0 or later and is supported in Android Studio 2022.3 and later. See our <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-android-layout.html" id="-telrni_354" data-external="true" rel="noopener noreferrer" target="_blank">migration guide</a> to make the necessary changes in your <code class="code" id="-telrni_355">build.gradle(.kts)</code> file.</p></section><section class="chapter"><h3 id="preview-of-the-gradle-configuration-cache" data-toc="preview-of-the-gradle-configuration-cache">Preview of the Gradle configuration cache</h3><a name="preview-of-gradle-configuration-cache"></a><p id="-telrni_357">Kotlin 1.9.0 comes with support for the <a href="https://docs.gradle.org/current/userguide/configuration_cache.html" id="-telrni_360" data-external="true" rel="noopener noreferrer" target="_blank">Gradle configuration cache</a> in multiplatform libraries. If you're a library author, you can already benefit from the improved build performance.</p><p id="-telrni_358">The Gradle configuration cache speeds up the build process by reusing the results of the configuration phase for subsequent builds. The feature has become Stable since Gradle 8.1. To enable it, follow the instructions in the <a href="https://docs.gradle.org/current/userguide/configuration_cache.html#config_cache:usage" id="-telrni_361" data-external="true" rel="noopener noreferrer" target="_blank">Gradle documentation</a>.</p><aside class="prompt" data-type="note" data-title="" id="-telrni_359"><p id="-telrni_362">The Kotlin Multiplatform plugin still doesn't support the Gradle configuration cache with Xcode integration tasks or the <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-cocoapods-dsl-reference.html" id="-telrni_363" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin CocoaPods Gradle plugin</a>. We expect to add this feature in future Kotlin releases.</p></aside></section></section><section class="chapter"><h2 id="kotlin-wasm" data-toc="kotlin-wasm">Kotlin/Wasm</h2><p id="-telrni_364">The Kotlin team continues to experiment with the new Kotlin/Wasm target. This release introduces several performance and <a href="#size-related-optimizations" id="-telrni_368">size-related optimizations</a>, along with <a href="#updates-in-javascript-interop" id="-telrni_369">updates in JavaScript interop</a>.</p><section class="chapter"><h3 id="size-related-optimizations" data-toc="size-related-optimizations">Size-related optimizations</h3><p id="-telrni_370">Kotlin 1.9.0 introduces significant size improvements for WebAssembly (Wasm) projects. Comparing two &quot;Hello World&quot; projects, the code footprint for Wasm in Kotlin 1.9.0 is now over 10 times smaller than in Kotlin 1.8.20.</p><figure id="-telrni_371"><img alt="Kotlin/Wasm size-related optimizations" src="images/wasm-1-9-0-size-improvements.png" title="Kotlin/Wasm size-related optimizations" width="700" height="394"></figure><p id="-telrni_372">These size optimizations result in more efficient resource utilization and improved performance when targeting Wasm platforms with Kotlin code.</p></section><section class="chapter"><h3 id="updates-in-javascript-interop" data-toc="updates-in-javascript-interop">Updates in JavaScript interop</h3><p id="-telrni_373">This Kotlin update introduces changes to the interoperability between Kotlin and JavaScript for Kotlin/Wasm. As Kotlin/Wasm is an <a href="components-stability.html#stability-levels-explained" id="-telrni_376">Experimental</a> feature, certain limitations apply to its interoperability.</p><section class="chapter"><h4 id="restriction-of-dynamic-types" data-toc="restriction-of-dynamic-types">Restriction of Dynamic types</h4><p id="-telrni_377">Starting with version 1.9.0, Kotlin no longer supports the use of <code class="code" id="-telrni_379">Dynamic</code> types in Kotlin/Wasm. This is now deprecated in favor of the new universal <code class="code" id="-telrni_380">JsAny</code> type, which facilitates JavaScript interoperability.</p><p id="-telrni_378">For more details, see the <a href="wasm-js-interop.html" id="-telrni_381">Kotlin/Wasm interoperability with JavaScript</a> documentation.</p></section><section class="chapter"><h4 id="restriction-of-non-external-types" data-toc="restriction-of-non-external-types">Restriction of non-external types</h4><p id="-telrni_382">Kotlin/Wasm supports conversions for specific Kotlin static types when passing values to and from JavaScript. These supported types include:</p><ul class="list _bullet" id="-telrni_383"><li class="list__item" id="-telrni_387"><p id="-telrni_390">Primitives, such as signed numbers, <code class="code" id="-telrni_391">Boolean</code>, and <code class="code" id="-telrni_392">Char</code>.</p></li><li class="list__item" id="-telrni_388"><p id="-telrni_393"><code class="code" id="-telrni_394">String</code>.</p></li><li class="list__item" id="-telrni_389"><p id="-telrni_395">Function types.</p></li></ul><p id="-telrni_384">Other types were passed without conversion as opaque references, leading to inconsistencies between JavaScript and Kotlin subtyping.</p><p id="-telrni_385">To address this, Kotlin restricts JavaScript interop to a well-supported set of types. Starting from Kotlin 1.9.0, only external, primitive, string, and function types are supported in Kotlin/Wasm JavaScript interop. Furthermore, a separate explicit type called <code class="code" id="-telrni_396">JsReference</code> has been introduced to represent handles to Kotlin/Wasm objects that can be used in JavaScript interop.</p><p id="-telrni_386">For more details, refer to the <a href="wasm-js-interop.html" id="-telrni_397">Kotlin/Wasm interoperability with JavaScript</a> documentation.</p></section></section><section class="chapter"><h3 id="kotlin-wasm-in-kotlin-playground" data-toc="kotlin-wasm-in-kotlin-playground">Kotlin/Wasm in Kotlin Playground</h3><p id="-telrni_398">Kotlin Playground supports the Kotlin/Wasm target. You can write, run, and share your Kotlin code that targets the Kotlin/Wasm. <a href="https://pl.kotl.in/HDFAvimga" id="-telrni_401" data-external="true" rel="noopener noreferrer" target="_blank">Check it out!</a></p><aside class="prompt" data-type="note" data-title="" id="-telrni_399"><p id="-telrni_402">Using Kotlin/Wasm requires enabling experimental features in your browser.</p><p id="-telrni_403"><a href="wasm-troubleshooting.html" id="-telrni_404">Learn more about how to enable these features</a>.</p></aside><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-whats-new-1-9-0-kotlin-wasm-playground">
import kotlin.time.*
import kotlin.time.measureTime

fun main() {
    println(&quot;Hello from Kotlin/Wasm!&quot;)
    computeAck(3, 10)
}

tailrec fun ack(m: Int, n: Int): Int = when {
    m == 0 -&gt; n + 1
    n == 0 -&gt; ack(m - 1, 1)
    else -&gt; ack(m - 1, ack(m, n - 1))
}

fun computeAck(m: Int, n: Int) {
    var res = 0
    val t = measureTime {
        res = ack(m, n)
    }
    println()
    println(&quot;ack($m, $n) = ${res}&quot;)
    println(&quot;duration: ${t.inWholeNanoseconds / 1e6} ms&quot;)
}
</div></section></section><section class="chapter"><h2 id="kotlin-js" data-toc="kotlin-js">Kotlin/JS</h2><p id="-telrni_405">This release introduces updates for Kotlin/JS, including the removal of the old Kotlin/JS compiler, Kotlin/JS Gradle plugin deprecation and Experimental support for ES2015:</p><ul class="list _bullet" id="-telrni_406"><li class="list__item" id="-telrni_414"><p id="-telrni_420"><a href="#removal-of-the-old-kotlin-js-compiler" id="-telrni_421">Removal of the old Kotlin/JS compiler</a></p></li><li class="list__item" id="-telrni_415"><p id="-telrni_422"><a href="#deprecation-of-the-kotlin-js-gradle-plugin" id="-telrni_423">Deprecation of the Kotlin/JS Gradle plugin</a></p></li><li class="list__item" id="-telrni_416"><p id="-telrni_424"><a href="#deprecation-of-external-enum" id="-telrni_425">Deprecation of external enum</a></p></li><li class="list__item" id="-telrni_417"><p id="-telrni_426"><a href="#experimental-support-for-es2015-classes-and-modules" id="-telrni_427">Experimental support for ES2015 classes and modules</a></p></li><li class="list__item" id="-telrni_418"><p id="-telrni_428"><a href="#changed-default-destination-of-js-production-distribution" id="-telrni_429">Changed default destination of JS production distribution</a></p></li><li class="list__item" id="-telrni_419"><p id="-telrni_430"><a href="#extract-org-w3c-declarations-from-stdlib-js" id="-telrni_431">Extract org.w3c declarations from stdlib-js</a></p></li></ul><aside class="prompt" data-type="note" data-title="" id="-telrni_407"><p id="-telrni_432">Starting from version 1.9.0, <a href="#library-linkage-in-kotlin-native" id="-telrni_433">partial library linkage</a> is also enabled for Kotlin/JS.</p></aside><section class="chapter"><h3 id="removal-of-the-old-kotlin-js-compiler" data-toc="removal-of-the-old-kotlin-js-compiler">Removal of the old Kotlin/JS compiler</h3><p id="-telrni_434">In Kotlin 1.8.0, we <a href="whatsnew18.html#stable-js-ir-compiler-backend" id="-telrni_436">announced</a> that the IR-based backend became <a href="components-stability.html" id="-telrni_437">Stable</a>. Since then, not specifying the compiler has become an error, and using the old compiler leads to warnings.</p><p id="-telrni_435">In Kotlin 1.9.0, using the old backend results in an error. Please migrate to the IR compiler by following our <a href="js-ir-migration.html" id="-telrni_438">migration guide</a>.</p></section><section class="chapter"><h3 id="deprecation-of-the-kotlin-js-gradle-plugin" data-toc="deprecation-of-the-kotlin-js-gradle-plugin">Deprecation of the Kotlin/JS Gradle plugin</h3><p id="-telrni_439">Starting with Kotlin 1.9.0, the <code class="code" id="-telrni_442">kotlin-js</code> Gradle plugin is deprecated. We encourage you to use the <code class="code" id="-telrni_443">kotlin-multiplatform</code> Gradle plugin with the <code class="code" id="-telrni_444">js()</code> target instead.</p><p id="-telrni_440">The functionality of the Kotlin/JS Gradle plugin essentially duplicated the <code class="code" id="-telrni_445">kotlin-multiplatform</code> plugin and shared the same implementation under the hood. This overlap created confusion and increased maintenance load on the Kotlin team.</p><p id="-telrni_441">Refer to our <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-compatibility-guide.html#migration-from-kotlin-js-gradle-plugin-to-kotlin-multiplatform-gradle-plugin" id="-telrni_446" data-external="true" rel="noopener noreferrer" target="_blank">Compatibility guide for Kotlin Multiplatform</a> for migration instructions. If you find any issues that aren't covered in the guide, please report them to our <a href="http://kotl.in/issue" id="-telrni_447" data-external="true" rel="noopener noreferrer" target="_blank">issue tracker</a>.</p></section><section class="chapter"><h3 id="deprecation-of-external-enum" data-toc="deprecation-of-external-enum">Deprecation of external enum</h3><p id="-telrni_448">In Kotlin 1.9.0, the use of external enums will be deprecated due to issues with static enum members like <code class="code" id="-telrni_452">entries</code>, that can't exist outside Kotlin. We recommend using an external sealed class with object subclasses instead:</p><div class="code-block" data-lang="kotlin">
// Before
external enum class ExternalEnum { A, B }

// After
external sealed class ExternalEnum {
    object A: ExternalEnum
    object B: ExternalEnum
}
</div><p id="-telrni_450">By switching to an external sealed class with object subclasses, you can achieve similar functionality to external enums while avoiding the problems associated with default methods.</p><p id="-telrni_451">Starting from Kotlin 1.9.0, the use of external enums will be marked as deprecated. We encourage you to update your code to utilize the suggested external sealed class implementation for compatibility and future maintenance.</p></section><section class="chapter"><h3 id="experimental-support-for-es2015-classes-and-modules" data-toc="experimental-support-for-es2015-classes-and-modules">Experimental support for ES2015 classes and modules</h3><p id="-telrni_453">This release introduces <a href="components-stability.html#stability-levels-explained" id="-telrni_458">Experimental</a> support for ES2015 modules and generation of ES2015 classes:</p><ul class="list _bullet" id="-telrni_454"><li class="list__item" id="-telrni_459"><p id="-telrni_461">Modules offer a way to simplify your codebase and improve maintainability.</p></li><li class="list__item" id="-telrni_460"><p id="-telrni_462">Classes allow you to incorporate object-oriented programming (OOP) principles, resulting in cleaner and more intuitive code.</p></li></ul><p id="-telrni_455">To enable these features, update your <code class="code" id="-telrni_463">build.gradle.kts</code> file accordingly:</p><div class="code-block" data-lang="kotlin">
// build.gradle.kts
kotlin {
    js(IR) {
        useEsModules() // Enables ES2015 modules
        browser()
    }
}

// Enables ES2015 classes generation
tasks.withType&lt;KotlinJsCompile&gt;().configureEach {
    kotlinOptions {
        useEsClasses = true
    }
}
</div><p id="-telrni_457"><a href="https://262.ecma-international.org/6.0/" id="-telrni_464" data-external="true" rel="noopener noreferrer" target="_blank">Learn more about ES2015 (ECMAScript 2015, ES6) in the official documentation</a>.</p></section><section class="chapter"><h3 id="changed-default-destination-of-js-production-distribution" data-toc="changed-default-destination-of-js-production-distribution">Changed default destination of JS production distribution</h3><p id="-telrni_465">Prior to Kotlin 1.9.0, the distribution target directory was <code class="code" id="-telrni_468">build/distributions</code>. However, this is a common directory for Gradle archives. To resolve this issue, we've changed the default distribution target directory in Kotlin 1.9.0 to: <code class="code" id="-telrni_469">build/dist/&lt;targetName&gt;/&lt;binaryName&gt;</code>.</p><p id="-telrni_466">For example, <code class="code" id="-telrni_470">productionExecutable</code> was in <code class="code" id="-telrni_471">build/distributions</code>. In Kotlin 1.9.0, it's in <code class="code" id="-telrni_472">build/dist/js/productionExecutable</code>.</p><aside class="prompt" data-type="warning" data-title="" id="-telrni_467"><p id="-telrni_473">If you have a pipeline in place that uses the results of these builds, make sure to update the directory.</p></aside></section><section class="chapter"><h3 id="extract-org-w3c-declarations-from-stdlib-js" data-toc="extract-org-w3c-declarations-from-stdlib-js">Extract org.w3c declarations from stdlib-js</h3><p id="-telrni_474">Since Kotlin 1.9.0, the <code class="code" id="-telrni_476">stdlib-js</code> no longer includes <code class="code" id="-telrni_477">org.w3c</code> declarations. Instead, these declarations have been moved to a separate Gradle dependency. When you add the Kotlin Multiplatform Gradle plugin to your <code class="code" id="-telrni_478">build.gradle.kts</code> file, these declarations will be automatically included in your project, similar to the standard library.</p><p id="-telrni_475">There is no need for any manual action or migration. The necessary adjustments will be handled automatically.</p></section></section><section class="chapter"><h2 id="gradle" data-toc="gradle">Gradle</h2><p id="-telrni_479">Kotlin 1.9.0 comes with new Gradle compiler options and a lot more:</p><ul class="list _bullet" id="-telrni_480"><li class="list__item" id="-telrni_489"><p id="-telrni_497"><a href="#removed-classpath-property" id="-telrni_498">Removed classpath property</a></p></li><li class="list__item" id="-telrni_490"><p id="-telrni_499"><a href="#new-compiler-options" id="-telrni_500">New Gradle compiler options</a></p></li><li class="list__item" id="-telrni_491"><p id="-telrni_501"><a href="#project-level-compiler-options-for-kotlin-jvm" id="-telrni_502">Project-level compiler options for Kotlin/JVM</a></p></li><li class="list__item" id="-telrni_492"><p id="-telrni_503"><a href="#compiler-option-for-kotlin-native-module-name" id="-telrni_504">Compiler option for Kotlin/Native module name</a></p></li><li class="list__item" id="-telrni_493"><p id="-telrni_505"><a href="#separate-compiler-plugins-for-official-kotlin-libraries" id="-telrni_506">Separate compiler plugins for official Kotlin libraries</a></p></li><li class="list__item" id="-telrni_494"><p id="-telrni_507"><a href="#incremented-minimum-supported-version" id="-telrni_508">Incremented minimum supported version</a></p></li><li class="list__item" id="-telrni_495"><p id="-telrni_509"><a href="#kapt-doesn-t-cause-eager-task-creation-in-gradle" id="-telrni_510">kapt doesn't cause eager task creation</a></p></li><li class="list__item" id="-telrni_496"><p id="-telrni_511"><a href="#programmatic-configuration-of-the-jvm-target-validation-mode" id="-telrni_512">Programmatic configuration of the JVM target validation mode</a></p></li></ul><section class="chapter"><h3 id="removed-classpath-property" data-toc="removed-classpath-property">Removed classpath property</h3><p id="-telrni_513">In Kotlin 1.7.0, we announced the start of a deprecation cycle for the <code class="code" id="-telrni_514">KotlinCompile</code> task's property: <code class="code" id="-telrni_515">classpath</code>. The deprecation level was raised to <code class="code" id="-telrni_516">ERROR</code> in Kotlin 1.8.0. In this release, we've finally removed the <code class="code" id="-telrni_517">classpath</code> property. All compile tasks should now use the <code class="code" id="-telrni_518">libraries</code> input for a list of libraries required for compilation.</p></section><section class="chapter"><h3 id="new-compiler-options" data-toc="new-compiler-options">New compiler options</h3><p id="-telrni_519">The Kotlin Gradle plugin now provides new properties for opt-ins and the compiler's progressive mode.</p><ul class="list _bullet" id="-telrni_520"><li class="list__item" id="-telrni_521"><p id="-telrni_523">To opt in to new APIs, you can now use the <code class="code" id="-telrni_524">optIn</code> property and pass a list of strings like: <code class="code" id="-telrni_525">optIn.set(listOf(a, b, c))</code>.</p></li><li class="list__item" id="-telrni_522"><p id="-telrni_526">To enable progressive mode, use <code class="code" id="-telrni_527">progressiveMode.set(true)</code>.</p></li></ul></section><section class="chapter"><h3 id="project-level-compiler-options-for-kotlin-jvm" data-toc="project-level-compiler-options-for-kotlin-jvm">Project-level compiler options for Kotlin/JVM</h3><p id="-telrni_528">Starting with Kotlin 1.9.0, a new <code class="code" id="-telrni_534">compilerOptions</code> block is available inside the <code class="code" id="-telrni_535">kotlin</code> configuration block:</p><div class="code-block" data-lang="kotlin">
kotlin {
    compilerOptions {
        jvmTarget.set(JVM.Target_11)
    }
}
</div><p id="-telrni_530">It makes configuring compiler options much easier. However, it is important to note some important details:</p><ul class="list _bullet" id="-telrni_531"><li class="list__item" id="-telrni_536"><p id="-telrni_538">This configuration only works on the project level.</p></li><li class="list__item" id="-telrni_537"><p id="-telrni_539">For the Android plugin, this block configures the same object as:</p></li></ul><div class="code-block" data-lang="kotlin">
android {
    kotlinOptions {}
}
</div><ul class="list _bullet" id="-telrni_533"><li class="list__item" id="-telrni_540"><p id="-telrni_543">The <code class="code" id="-telrni_544">android.kotlinOptions</code> and <code class="code" id="-telrni_545">kotlin.compilerOptions</code> configuration blocks override each other. The last (lowest) block in the build file always takes effect.</p></li><li class="list__item" id="-telrni_541"><p id="-telrni_546">If <code class="code" id="-telrni_547">moduleName</code> is configured on the project level, its value could be changed when passed to the compiler. It's not the case for the <code class="code" id="-telrni_548">main</code> compilation, but for other types, for example, test sources, the Kotlin Gradle plugin will add the <code class="code" id="-telrni_549">_test</code> suffix.</p></li><li class="list__item" id="-telrni_542"><p id="-telrni_550">The configuration inside the <code class="code" id="-telrni_551">tasks.withType&lt;KotlinJvmCompile&gt;().configureEach {}</code> (or <code class="code" id="-telrni_552">tasks.named&lt;KotlinJvmCompile&gt;(&quot;compileKotlin&quot;) { }</code>) overrides both <code class="code" id="-telrni_553">kotlin.compilerOptions</code> and <code class="code" id="-telrni_554">android.kotlinOptions</code>.</p></li></ul></section><section class="chapter"><h3 id="compiler-option-for-kotlin-native-module-name" data-toc="compiler-option-for-kotlin-native-module-name">Compiler option for Kotlin/Native module name</h3><p id="-telrni_555">The Kotlin/Native <a href="compiler-reference.html#module-name-name-native" id="-telrni_559"><code class="code" id="-telrni_560">module-name</code></a> compiler option is now easily available in the Kotlin Gradle plugin.</p><p id="-telrni_556">This option specifies a name for the compilation module and can also be used for adding a name prefix for declarations exported to Objective-C.</p><p id="-telrni_557">You can now set the module name directly in the <code class="code" id="-telrni_561">compilerOptions</code> block of your Gradle build files:</p><div class="tabs" id="-telrni_558" data-group="build-script" data-anchors="[-telrni_562,-telrni_563]"><div class="tabs__content" data-gtm="tab" id="-telrni_562" data-sync-tabs="kotlin" data-title="Kotlin"><div class="code-block" data-lang="kotlin" data-title="Kotlin">
tasks.named&lt;org.jetbrains.kotlin.gradle.tasks.KotlinNativeCompile&gt;(&quot;compileKotlinLinuxX64&quot;) {
    compilerOptions {
        moduleName.set(&quot;my-module-name&quot;)
    }
}
</div></div><div class="tabs__content" data-gtm="tab" id="-telrni_563" data-sync-tabs="groovy" data-title="Groovy"><div class="code-block" data-lang="groovy" data-title="Groovy">
tasks.named(&quot;compileKotlinLinuxX64&quot;, org.jetbrains.kotlin.gradle.tasks.KotlinNativeCompile.class) {
    compilerOptions {
        moduleName = &quot;my-module-name&quot;
    }
}
</div></div></div></section><section class="chapter"><h3 id="separate-compiler-plugins-for-official-kotlin-libraries" data-toc="separate-compiler-plugins-for-official-kotlin-libraries">Separate compiler plugins for official Kotlin libraries</h3><p id="-telrni_566">Kotlin 1.9.0 introduces separate compiler plugins for its official libraries. Previously, compiler plugins were embedded into their corresponding Gradle plugins. This could cause compatibility issues in case the compiler plugin was compiled against a Kotlin version higher than the Gradle build's Kotlin runtime version.</p><p id="-telrni_567">Now compiler plugins are added as separate dependencies, so you'll no longer face compatibility issues with older Gradle versions. Another major advantage of the new approach is that new compiler plugins can be used with other build systems like <a href="https://bazel.build/" id="-telrni_572" data-external="true" rel="noopener noreferrer" target="_blank">Bazel</a>.</p><p id="-telrni_568">Here's the list of new compiler plugins we're now publishing to Maven Central:</p><ul class="list _bullet" id="-telrni_569"><li class="list__item" id="-telrni_573"><p id="-telrni_579">kotlin-atomicfu-compiler-plugin</p></li><li class="list__item" id="-telrni_574"><p id="-telrni_580">kotlin-allopen-compiler-plugin</p></li><li class="list__item" id="-telrni_575"><p id="-telrni_581">kotlin-lombok-compiler-plugin</p></li><li class="list__item" id="-telrni_576"><p id="-telrni_582">kotlin-noarg-compiler-plugin</p></li><li class="list__item" id="-telrni_577"><p id="-telrni_583">kotlin-sam-with-receiver-compiler-plugin</p></li><li class="list__item" id="-telrni_578"><p id="-telrni_584">kotlinx-serialization-compiler-plugin</p></li></ul><p id="-telrni_570">Every plugin has its <code class="code" id="-telrni_585">-embeddable</code> counterpart, for example, <code class="code" id="-telrni_586">kotlin-allopen-compiler-plugin-embeddable</code> is designed for working with the <code class="code" id="-telrni_587">kotlin-compiler-embeddable</code> artifact, the default option for scripting artifacts.</p><p id="-telrni_571">Gradle adds these plugins as compiler arguments. You don't need to make any changes to your existing projects.</p></section><section class="chapter"><h3 id="incremented-minimum-supported-version" data-toc="incremented-minimum-supported-version">Incremented minimum supported version</h3><p id="-telrni_588">Starting with Kotlin 1.9.0, the minimum supported Android Gradle plugin version is 4.2.2.</p><p id="-telrni_589">See the <a href="gradle-configure-project.html#apply-the-plugin" id="-telrni_590">Kotlin Gradle plugin's compatibility with available Gradle versions in our documentation</a>.</p></section><section class="chapter"><h3 id="kapt-doesn-t-cause-eager-task-creation-in-gradle" data-toc="kapt-doesn-t-cause-eager-task-creation-in-gradle">kapt doesn't cause eager task creation in Gradle</h3><p id="-telrni_591">Prior to 1.9.0, the <a href="kapt.html" id="-telrni_594">kapt compiler plugin</a> caused eager task creation by requesting the configured instance of the Kotlin compilation task. This behavior has been fixed in Kotlin 1.9.0. If you use the default configuration for your <code class="code" id="-telrni_595">build.gradle.kts</code> file then your setup is not affected by this change.</p><aside class="prompt" data-type="warning" data-title="" id="-telrni_592"><p id="-telrni_596">If you use a custom configuration, your setup will be adversely affected. For example, if you have modified the <code class="code" id="-telrni_601">KotlinJvmCompile</code> task using Gradle's tasks API, you must similarly modify the <code class="code" id="-telrni_602">KaptGenerateStubs</code> task in your build script.</p><p id="-telrni_597">For example, if your script has the following configuration for the <code class="code" id="-telrni_603">KotlinJvmCompile</code> task:</p><div class="code-block" data-lang="kotlin">
tasks.named&lt;KotlinJvmCompile&gt;(&quot;compileKotlin&quot;) { // Your custom configuration }
</div><p id="-telrni_599">In this case, you need to make sure that the same modification is included as part of the <code class="code" id="-telrni_604">KaptGenerateStubs</code> task:</p><div class="code-block" data-lang="kotlin">
tasks.named&lt;KaptGenerateStubs&gt;(&quot;kaptGenerateStubs&quot;) { // Your custom configuration }
</div></aside><p id="-telrni_593">For more information, see our <a href="https://youtrack.jetbrains.com/issue/KT-54468/KAPT-Gradle-plugin-causes-eager-task-creation" id="-telrni_605" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack ticket</a>.</p></section><section class="chapter"><h3 id="programmatic-configuration-of-the-jvm-target-validation-mode" data-toc="programmatic-configuration-of-the-jvm-target-validation-mode">Programmatic configuration of the JVM target validation mode</h3><p id="-telrni_606">Before Kotlin 1.9.0, there was only one way to adjust the detection of JVM target incompatibility between Kotlin and Java. You had to set <code class="code" id="-telrni_609">kotlin.jvm.target.validation.mode=ERROR</code> in your <code class="code" id="-telrni_610">gradle.properties</code> for the whole project.</p><p id="-telrni_607">You can now also configure it on the task level in your <code class="code" id="-telrni_611">build.gradle.kts</code> file:</p><div class="code-block" data-lang="kotlin">
tasks.named&lt;org.jetbrains.kotlin.gradle.tasks.KotlinJvmCompile&gt;(&quot;compileKotlin&quot;) {
    jvmTargetValidationMode.set(org.jetbrains.kotlin.gradle.dsl.jvm.JvmTargetValidationMode.WARNING)
}
</div></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2><p id="-telrni_612">Kotlin 1.9.0 has some great improvements for the standard library:</p><ul class="list _bullet" id="-telrni_613"><li class="list__item" id="-telrni_621"><p id="-telrni_626">The <a href="#stable-operator-for-open-ended-ranges" id="-telrni_627"><code class="code" id="-telrni_629">..&lt;</code> operator</a> and <a href="#stable-time-api" id="-telrni_628">time API</a> are Stable.</p></li><li class="list__item" id="-telrni_622"><p id="-telrni_630"><a href="#the-kotlin-native-standard-library-s-journey-towards-stabilization" id="-telrni_631">The Kotlin/Native standard library has been thoroughly reviewed and updated</a></p></li><li class="list__item" id="-telrni_623"><p id="-telrni_632"><a href="#stable-volatile-annotation" id="-telrni_633">The <code class="code" id="-telrni_634">@Volatile</code> annotation can be used on more platforms</a></p></li><li class="list__item" id="-telrni_624"><p id="-telrni_635"><a href="#new-common-function-to-get-regex-capture-group-by-name" id="-telrni_636">There's a <span class="control" id="-telrni_637">common</span> function to get a regex capture group by name</a></p></li><li class="list__item" id="-telrni_625"><p id="-telrni_638"><a href="#new-hexformat-class-to-format-and-parse-hexadecimals" id="-telrni_639">The <code class="code" id="-telrni_640">HexFormat</code> class has been introduced to format and parse hexadecimals</a></p></li></ul><section class="chapter"><h3 id="stable-operator-for-open-ended-ranges" data-toc="stable-operator-for-open-ended-ranges">Stable ..&lt; operator for open-ended ranges</h3><p id="-telrni_641">The new <code class="code" id="-telrni_649">..&lt;</code> operator for open-ended ranges that was introduced in <a href="whatsnew1720.html#preview-of-the-operator-for-creating-open-ended-ranges" id="-telrni_650">Kotlin 1.7.20</a> and became Stable in 1.8.0. In 1.9.0, the standard library API for working with open-ended ranges is also Stable.</p><p id="-telrni_642">Our research shows that the new <code class="code" id="-telrni_651">..&lt;</code> operator makes it easier to understand when an open-ended range is declared. If you use the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/until.html" id="-telrni_652" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_653">until</code></a> infix function, it's easy to make the mistake of assuming that the upper bound is included.</p><p id="-telrni_643">Here is an example using the <code class="code" id="-telrni_654">until</code> function:</p><div class="code-block" data-lang="kotlin">
fun main() {
    for (number in 2 until 10) {
        if (number % 2 == 0) {
            print(&quot;$number &quot;)
        }
    }
    // 2 4 6 8
}
</div><p id="-telrni_645">And here is an example using the new <code class="code" id="-telrni_655">..&lt;</code> operator:</p><div class="code-block" data-lang="kotlin">
fun main() {
    for (number in 2..&lt;10) {
        if (number % 2 == 0) {
            print(&quot;$number &quot;)
        }
    }
    // 2 4 6 8
}
</div><aside class="prompt" data-type="note" data-title="" id="-telrni_647"><p id="-telrni_656">From IntelliJ IDEA version 2023.1.1, a new code inspection is available that highlights when you can use the <code class="code" id="-telrni_657">..&lt;</code> operator.</p></aside><p id="-telrni_648">For more information about what you can do with this operator, see <a href="whatsnew1720.html#preview-of-the-operator-for-creating-open-ended-ranges" id="-telrni_658">What's new in Kotlin 1.7.20</a>.</p></section><section class="chapter"><h3 id="stable-time-api" data-toc="stable-time-api">Stable time API</h3><p id="-telrni_659">Since 1.3.50, we have previewed a new time measurement API. The duration part of the API became Stable in 1.6.0. In 1.9.0, the remaining time measurement API is Stable.</p><p id="-telrni_660">The old time API provided the <code class="code" id="-telrni_665">measureTimeMillis</code> and <code class="code" id="-telrni_666">measureNanoTime</code> functions, which aren't intuitive to use. Although it is clear that they both measure time in different units, it isn't clear that <code class="code" id="-telrni_667">measureTimeMillis</code>uses a <a href="https://en.wikipedia.org/wiki/Elapsed_real_time" id="-telrni_668" data-external="true" rel="noopener noreferrer" target="_blank">wall clock</a> to measure time, whereas <code class="code" id="-telrni_669">measureNanoTime</code> uses a monotonic time source. The new time API resolves this and other issues to make the API more user friendly.</p><p id="-telrni_661">With the new time API, you can easily:</p><ul class="list _bullet" id="-telrni_662"><li class="list__item" id="-telrni_670"><p id="-telrni_675">Measure the time taken to execute some code using a monotonic time source with your desired time unit.</p></li><li class="list__item" id="-telrni_671"><p id="-telrni_676">Mark a moment in time.</p></li><li class="list__item" id="-telrni_672"><p id="-telrni_677">Compare and find the difference between two moments in time.</p></li><li class="list__item" id="-telrni_673"><p id="-telrni_678">Check how much time has passed since a specific moment in time.</p></li><li class="list__item" id="-telrni_674"><p id="-telrni_679">Check whether the current time has passed a specific moment in time.</p></li></ul><section class="chapter"><h4 id="measure-code-execution-time" data-toc="measure-code-execution-time">Measure code execution time</h4><p id="-telrni_680">To measure the time taken to execute a block of code, use the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/measure-time.html" id="-telrni_684" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_685">measureTime</code></a> inline function.</p><p id="-telrni_681">To measure the time taken to execute a block of code <span class="control" id="-telrni_686">and</span> return the result of the block of code, use the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/measure-timed-value.html" id="-telrni_687" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_688">measureTimedValue</code></a> inline function.</p><p id="-telrni_682">By default, both functions use a monotonic time source. However, if you want to use an elapsed real-time source, you can. For example, on Android the default time source <code class="code" id="-telrni_689">System.nanoTime()</code> only counts time while the device is active. It loses track of time when the device enters deep sleep. To keep track of time while the device is in deep sleep, you can create a time source that uses <a href="https://developer.android.com/reference/android/os/SystemClock#elapsedRealtimeNanos()" id="-telrni_690" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_691">SystemClock.elapsedRealtimeNanos()</code></a> instead:</p><div class="code-block" data-lang="kotlin">
object RealtimeMonotonicTimeSource : AbstractLongTimeSource(DurationUnit.NANOSECONDS) {
    override fun read(): Long = SystemClock.elapsedRealtimeNanos()
}
</div></section><section class="chapter"><h4 id="mark-and-measure-differences-in-time" data-toc="mark-and-measure-differences-in-time">Mark and measure differences in time</h4><p id="-telrni_692">To mark a specific moment in time, use the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/-time-source/" id="-telrni_696" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_701">TimeSource</code></a> interface and the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/-time-source/mark-now.html" id="-telrni_697" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_702">markNow()</code></a> function to create a <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/-time-mark/" id="-telrni_698" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_703">TimeMark</code></a>. To measure differences between <code class="code" id="-telrni_699">TimeMarks</code> from the same time source, use the subtraction operator (<code class="code" id="-telrni_700">-</code>):</p><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-whats-new-time-elapsed">
import kotlin.time.*

fun main() {
    val timeSource = TimeSource.Monotonic
    val mark1 = timeSource.markNow()
    Thread.sleep(500) // Sleep 0.5 seconds.
    val mark2 = timeSource.markNow()

    repeat(4) { n -&gt;
        val mark3 = timeSource.markNow()
        val elapsed1 = mark3 - mark1
        val elapsed2 = mark3 - mark2

        println(&quot;Measurement 1.${n + 1}: elapsed1=$elapsed1, elapsed2=$elapsed2, diff=${elapsed1 - elapsed2}&quot;)
    }
    // It's also possible to compare time marks with each other.
    println(mark2 &gt; mark1) // This is true, as mark2 was captured later than mark1.
}
</div><p id="-telrni_694">To check if a deadline has passed or a timeout has been reached, use the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/-time-mark/has-passed-now.html" id="-telrni_704" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_706">hasPassedNow()</code></a> and <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.time/-time-mark/has-not-passed-now.html" id="-telrni_705" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_707">hasNotPassedNow()</code></a> extension functions:</p><div class="code-block" data-lang="kotlin" data-runnable="true" data-min-compiler-version="1.3" id="kotlin-whats-new-time-passednow">
import kotlin.time.*
import kotlin.time.Duration.Companion.seconds

fun main() {
    val timeSource = TimeSource.Monotonic
    val mark1 = timeSource.markNow()
    val fiveSeconds: Duration = 5.seconds
    val mark2 = mark1 + fiveSeconds

    // It hasn't been 5 seconds yet
    println(mark2.hasPassedNow())
    // false

    // Wait six seconds
    Thread.sleep(6000)
    println(mark2.hasPassedNow())
    // true
}
</div></section></section><section class="chapter"><h3 id="the-kotlin-native-standard-library-s-journey-towards-stabilization" data-toc="the-kotlin-native-standard-library-s-journey-towards-stabilization">The Kotlin/Native standard library's journey towards stabilization</h3><p id="-telrni_708">As our standard library for Kotlin/Native continues to grow, we decided that it was time for a complete review to ensure that it meets our high standards. As part of this, we carefully reviewed <span class="control" id="-telrni_716">every</span> existing public signature. For each signature, we considered whether it:</p><ul class="list _bullet" id="-telrni_709"><li class="list__item" id="-telrni_717"><p id="-telrni_721">Has a unique purpose.</p></li><li class="list__item" id="-telrni_718"><p id="-telrni_722">Is consistent with other Kotlin APIs.</p></li><li class="list__item" id="-telrni_719"><p id="-telrni_723">Has similar behavior to its counterpart for the JVM.</p></li><li class="list__item" id="-telrni_720"><p id="-telrni_724">Is future-proof.</p></li></ul><p id="-telrni_710">Based on these considerations, we made one of the following decisions:</p><ul class="list _bullet" id="-telrni_711"><li class="list__item" id="-telrni_725"><p id="-telrni_732">Made it Stable.</p></li><li class="list__item" id="-telrni_726"><p id="-telrni_733">Made it Experimental.</p></li><li class="list__item" id="-telrni_727"><p id="-telrni_734">Marked it as <code class="code" id="-telrni_735">private</code>.</p></li><li class="list__item" id="-telrni_728"><p id="-telrni_736">Modified its behavior.</p></li><li class="list__item" id="-telrni_729"><p id="-telrni_737">Moved it to a different location.</p></li><li class="list__item" id="-telrni_730"><p id="-telrni_738">Deprecated it.</p></li><li class="list__item" id="-telrni_731"><p id="-telrni_739">Marked it as obsolete.</p></li></ul><aside class="prompt" data-type="note" data-title="" id="-telrni_712"><p id="-telrni_740">If an existing signature has been:</p><ul class="list _bullet" id="-telrni_741"><li class="list__item" id="-telrni_742"><p id="-telrni_745">Moved to another package, then the signature still exists in the original package but it's now deprecated with deprecation level: <code class="code" id="-telrni_746">WARNING</code>. IntelliJ IDEA will automatically suggest replacements upon code inspection.</p></li><li class="list__item" id="-telrni_743"><p id="-telrni_747">Deprecated, then it's been deprecated with deprecation level: <code class="code" id="-telrni_748">WARNING</code>.</p></li><li class="list__item" id="-telrni_744"><p id="-telrni_749">Marked as obsolete, then you can keep using it, but it will be replaced in future.</p></li></ul></aside><p id="-telrni_713">We won't list all of the results of the review here, but here are some of the highlights:</p><ul class="list _bullet" id="-telrni_714"><li class="list__item" id="-telrni_750"><p id="-telrni_755">We stabilized the Atomics API.</p></li><li class="list__item" id="-telrni_751"><p id="-telrni_756">We made <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlinx.cinterop/" id="-telrni_757" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_759">kotlinx.cinterop</code></a> Experimental and now require different opt-ins for the package to be used. For more information, see <a href="#explicit-c-interoperability-stability-guarantees" id="-telrni_758">Explicit C-interoperability stability guarantees</a>.</p></li><li class="list__item" id="-telrni_752"><p id="-telrni_760">We marked the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/-worker/" id="-telrni_761" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_762">Worker</code></a> class and its related APIs as obsolete.</p></li><li class="list__item" id="-telrni_753"><p id="-telrni_763">We marked the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native/-bit-set/" id="-telrni_764" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_765">BitSet</code></a> class as obsolete.</p></li><li class="list__item" id="-telrni_754"><p id="-telrni_766">We marked all <code class="code" id="-telrni_767">public</code> APIs in the <code class="code" id="-telrni_768">kotlin.native.internal</code> package as <code class="code" id="-telrni_769">private</code> or moved them to other packages.</p></li></ul><section class="chapter"><h4 id="explicit-c-interoperability-stability-guarantees" data-toc="explicit-c-interoperability-stability-guarantees">Explicit C-interoperability stability guarantees</h4><p id="-telrni_770">To maintain the high quality of our API, we decided to make <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlinx.cinterop/" id="-telrni_776" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_778">kotlinx.cinterop</code></a> Experimental. Although <code class="code" id="-telrni_777">kotlinx.cinterop</code> has been thoroughly tried and tested, there is still room for improvement before we are satisfied enough to make it Stable. We recommend that you use this API for interoperability but that you try to confine its use to specific areas in your projects. This will make your migration easier once we begin evolving this API to make it Stable.</p><p id="-telrni_771">If you want to use C-like foreign APIs such as pointers, you must opt in with <code class="code" id="-telrni_779">@OptIn(ExperimentalForeignApi)</code>, otherwise your code won't compile.</p><p id="-telrni_772">To use the remainder of <code class="code" id="-telrni_780">kotlinx.cinterop</code>, which covers Objective-C/Swift interoperability, you must opt in with <code class="code" id="-telrni_781">@OptIn(BetaInteropApi)</code>. If you try to use this API without the opt-in, your code will compile but the compiler will raise warnings that provide a clear explanation of what behavior you can expect.</p><p id="-telrni_773">For more information about these annotations, see our source code for <a href="https://github.com/JetBrains/kotlin/blob/master/kotlin-native/Interop/Runtime/src/main/kotlin/kotlinx/cinterop/Annotations.kt" id="-telrni_782" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_783">Annotations.kt</code></a>.</p><p id="-telrni_774">For more information on <span class="control" id="-telrni_784">all</span> of the changes as part of this review, see our <a href="https://youtrack.jetbrains.com/issue/KT-55765" id="-telrni_785" data-external="true" rel="noopener noreferrer" target="_blank">YouTrack ticket</a>.</p><p id="-telrni_775">We'd appreciate any feedback you might have! You can provide your feedback directly by commenting on the <a href="https://youtrack.jetbrains.com/issue/KT-57728" id="-telrni_786" data-external="true" rel="noopener noreferrer" target="_blank">ticket</a>.</p></section></section><section class="chapter"><h3 id="stable-volatile-annotation" data-toc="stable-volatile-annotation">Stable @Volatile annotation</h3><p id="-telrni_787">If you annotate a <code class="code" id="-telrni_791">var</code> property with <code class="code" id="-telrni_792">@Volatile</code>, then the backing field is marked so that any reads or writes to this field are atomic, and writes are always made visible to other threads.</p><p id="-telrni_788">Prior to 1.8.20, the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-volatile/" id="-telrni_793" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_794">kotlin.jvm.Volatile</code> annotation</a> was available in the common standard library. However, this annotation was only effective on the JVM. If you used it on other platforms, it was ignored, which led to errors.</p><p id="-telrni_789">In 1.8.20, we introduced an experimental common annotation, <code class="code" id="-telrni_795">kotlin.concurrent.Volatile</code>, which you could preview in both the JVM and Kotlin/Native.</p><p id="-telrni_790">In 1.9.0, <code class="code" id="-telrni_796">kotlin.concurrent.Volatile</code> is Stable. If you use <code class="code" id="-telrni_797">kotlin.jvm.Volatile</code> in your multiplatform projects, we recommend that you migrate to <code class="code" id="-telrni_798">kotlin.concurrent.Volatile</code>.</p></section><section class="chapter"><h3 id="new-common-function-to-get-regex-capture-group-by-name" data-toc="new-common-function-to-get-regex-capture-group-by-name">New common function to get regex capture group by name</h3><p id="-telrni_799">Prior to 1.9.0, every platform had its own extension to get a regular expression capture group by its name from a regular expression match. However there was no common function. It wasn't possible to have a common function prior to Kotlin 1.8.0, because the standard library still supported JVM targets 1.6 and 1.7.</p><p id="-telrni_800">As of Kotlin 1.8.0, the standard library is compiled with JVM target 1.8. So in 1.9.0, there is now a <span class="control" id="-telrni_803">common</span> <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-match-result/groups.html" id="-telrni_804" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_805">groups</code></a> function that you can use to retrieve a group's contents by its name for a regular expression match. This is useful when you want to access the results of regular expression matches belonging to a particular capture group.</p><p id="-telrni_801">Here is an example with a regular expression containing three capture groups: <code class="code" id="-telrni_806">city</code>, <code class="code" id="-telrni_807">state</code>, and <code class="code" id="-telrni_808">areaCode</code>. You can use these group names to access the matched values:</p><div class="code-block" data-lang="kotlin">
fun main() {
    val regex = &quot;&quot;&quot;\b(?&lt;city&gt;[A-Za-z\s]+),\s(?&lt;state&gt;[A-Z]{2}):\s(?&lt;areaCode&gt;[0-9]{3})\b&quot;&quot;&quot;.toRegex()
    val input = &quot;Coordinates: Austin, TX: 123&quot;
    
    val match = regex.find(input)!!
    println(match.groups[&quot;city&quot;]?.value)
    // Austin
    println(match.groups[&quot;state&quot;]?.value)
    // TX
    println(match.groups[&quot;areaCode&quot;]?.value)
    // 123
}
</div></section><section class="chapter"><h3 id="new-path-utility-to-create-parent-directories" data-toc="new-path-utility-to-create-parent-directories">New path utility to create parent directories</h3><p id="-telrni_809">In 1.9.0 there is a new <code class="code" id="-telrni_812">createParentDirectories()</code> extension function that you can use to create a new file with all the necessary parent directories. When you provide a file path to <code class="code" id="-telrni_813">createParentDirectories()</code> it checks whether the parent directories already exist. If they do, it does nothing. However, if they do not, it creates them for you.</p><p id="-telrni_810"><code class="code" id="-telrni_814">createParentDirectories()</code> is particularly useful when you are copying files. For example, you can use it in combination with the <code class="code" id="-telrni_815">copyToRecursively()</code> function:</p><div class="code-block" data-lang="kotlin">
sourcePath.copyToRecursively(
   destinationPath.createParentDirectories(), 
   followLinks = false
)
</div></section><section class="chapter"><h3 id="new-hexformat-class-to-format-and-parse-hexadecimals" data-toc="new-hexformat-class-to-format-and-parse-hexadecimals">New HexFormat class to format and parse hexadecimals</h3><aside class="prompt" data-type="warning" data-title="" id="-telrni_816"><p id="-telrni_829">The new <code class="code" id="-telrni_830">HexFormat</code> class and its related extension functions are <a href="components-stability.html#stability-levels-explained" id="-telrni_831">Experimental</a>, and to use them, you can opt in with <code class="code" id="-telrni_832">@OptIn(ExperimentalStdlibApi::class)</code> or the compiler argument <code class="code" id="-telrni_833">-opt-in=kotlin.ExperimentalStdlibApi</code>.</p></aside><p id="-telrni_817">In 1.9.0, the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-hex-format/" id="-telrni_834" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="-telrni_839">HexFormat</code></a> class and its related extension functions are provided as an Experimental feature that allows you to convert between numerical values and hexadecimal strings. Specifically, you can use the extension functions to convert between hexadecimal strings and <code class="code" id="-telrni_835">ByteArrays</code> or other numeric types (<code class="code" id="-telrni_836">Int</code>, <code class="code" id="-telrni_837">Short</code>, <code class="code" id="-telrni_838">Long</code>).</p><p id="-telrni_818">For example:</p><div class="code-block" data-lang="kotlin">
println(93.toHexString()) // &quot;0000005d&quot;
</div><p id="-telrni_820">The <code class="code" id="-telrni_840">HexFormat</code> class includes formatting options that you can configure with the <code class="code" id="-telrni_841">HexFormat{}</code> builder.</p><p id="-telrni_821">If you are working with <code class="code" id="-telrni_842">ByteArrays</code> you have the following options, which are configurable by properties:</p><div class="table-wrapper"><table class="wide" id="-telrni_822"><thead><tr class="ijRowHead" id="-telrni_843"><th id="-telrni_850"><p>Option</p></th><th id="-telrni_851"><p>Description</p></th></tr></thead><tbody><tr id="-telrni_844"><td id="-telrni_852"><p><code class="code" id="-telrni_854">upperCase</code></p></td><td id="-telrni_853"><p>Whether hexadecimal digits are upper or lower case. By default, lower case is assumed. <code class="code" id="-telrni_855">upperCase = false</code>.</p></td></tr><tr id="-telrni_845"><td id="-telrni_856"><p><code class="code" id="-telrni_858">bytes.bytesPerLine</code></p></td><td id="-telrni_857"><p>The maximum number of bytes per line.</p></td></tr><tr id="-telrni_846"><td id="-telrni_859"><p><code class="code" id="-telrni_861">bytes.bytesPerGroup</code></p></td><td id="-telrni_860"><p>The maximum number of bytes per group.</p></td></tr><tr id="-telrni_847"><td id="-telrni_862"><p><code class="code" id="-telrni_864">bytes.bytesSeparator</code></p></td><td id="-telrni_863"><p>The separator between bytes. Nothing by default.</p></td></tr><tr id="-telrni_848"><td id="-telrni_865"><p><code class="code" id="-telrni_867">bytes.bytesPrefix</code></p></td><td id="-telrni_866"><p>The string that immediately precedes a two-digit hexadecimal representation of each byte, nothing by default.</p></td></tr><tr id="-telrni_849"><td id="-telrni_868"><p><code class="code" id="-telrni_870">bytes.bytesSuffix</code></p></td><td id="-telrni_869"><p>The string that immediately succeeds a two-digit hexadecimal representation of each byte, nothing by default.</p></td></tr></tbody></table></div><p id="-telrni_823">For example:</p><div class="code-block" data-lang="kotlin">
val macAddress = &quot;001b638445e6&quot;.hexToByteArray()

// Use HexFormat{} builder to separate the hexadecimal string by colons
println(macAddress.toHexString(HexFormat { bytes.byteSeparator = &quot;:&quot; }))
// &quot;00:1b:63:84:45:e6&quot;

// Use HexFormat{} builder to:
// * Make the hexadecimal string uppercase
// * Group the bytes in pairs
// * Separate by periods
val threeGroupFormat = HexFormat { upperCase = true; bytes.bytesPerGroup = 2; bytes.groupSeparator = &quot;.&quot; }

println(macAddress.toHexString(threeGroupFormat))
// &quot;001B.6384.45E6&quot;
</div><p id="-telrni_825">If you are working with numeric types, you have the following options, which are configurable by properties:</p><div class="table-wrapper"><table class="wide" id="-telrni_826"><thead><tr class="ijRowHead" id="-telrni_871"><th id="-telrni_875"><p>Option</p></th><th id="-telrni_876"><p>Description</p></th></tr></thead><tbody><tr id="-telrni_872"><td id="-telrni_877"><p><code class="code" id="-telrni_879">number.prefix</code></p></td><td id="-telrni_878"><p>The prefix of a hexadecimal string, nothing by default.</p></td></tr><tr id="-telrni_873"><td id="-telrni_880"><p><code class="code" id="-telrni_882">number.suffix</code></p></td><td id="-telrni_881"><p>The suffix of a hexadecimal string, nothing by default.</p></td></tr><tr id="-telrni_874"><td id="-telrni_883"><p><code class="code" id="-telrni_885">number.removeLeadingZeros</code></p></td><td id="-telrni_884"><p>Whether to remove leading zeros in a hexadecimal string. By default, no leading zeros are removed. <code class="code" id="-telrni_886">number.removeLeadingZeros = false</code></p></td></tr></tbody></table></div><p id="-telrni_827">For example:</p><div class="code-block" data-lang="kotlin">
// Use HexFormat{} builder to parse a hexadecimal that has prefix: &quot;0x&quot;.
println(&quot;0x3a&quot;.hexToInt(HexFormat { number.prefix = &quot;0x&quot; })) // &quot;58&quot;
</div></section></section><section class="chapter"><h2 id="documentation-updates" data-toc="documentation-updates">Documentation updates</h2><p id="-telrni_887">The Kotlin documentation has received some notable changes:</p><ul class="list _bullet" id="-telrni_888"><li class="list__item" id="-telrni_889"><p id="-telrni_893">The <a href="kotlin-tour-welcome.html" id="-telrni_894">tour of Kotlin</a> &ndash; Learn the fundamentals of the Kotlin programming language with chapters including both theory and practice.</p></li><li class="list__item" id="-telrni_890"><p id="-telrni_895"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-android-layout.html" id="-telrni_896" data-external="true" rel="noopener noreferrer" target="_blank">Android source set layout</a> &ndash; Learn about the new Android source set layout.</p></li><li class="list__item" id="-telrni_891"><p id="-telrni_897"><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-compatibility-guide.html" id="-telrni_898" data-external="true" rel="noopener noreferrer" target="_blank">Compatibility guide for Kotlin Multiplatform</a> &ndash; Learn about the incompatible changes you might encounter while developing projects with Kotlin Multiplatform.</p></li><li class="list__item" id="-telrni_892"><p id="-telrni_899"><a href="wasm-overview.html" id="-telrni_900">Kotlin Wasm</a> &ndash; Learn about Kotlin/Wasm and how you can use it in your Kotlin Multiplatform projects.</p></li></ul></section><section class="chapter"><h2 id="install-kotlin-1-9-0" data-toc="install-kotlin-1-9-0">Install Kotlin 1.9.0</h2><section class="chapter"><h3 id="check-the-ide-version" data-toc="check-the-ide-version">Check the IDE version</h3><p id="-telrni_903"><a href="https://www.jetbrains.com/idea/download/" id="-telrni_906" data-external="true" rel="noopener noreferrer" target="_blank">IntelliJ IDEA</a> 2022.3.3 and 2023.1.1 automatically suggest updating the Kotlin plugin to version 1.9.0. IntelliJ IDEA 2023.2 will include the Kotlin 1.9.0 plugin.</p><p id="-telrni_904">Android Studio Giraffe (223) and Hedgehog (231) will support Kotlin 1.9.0 in their upcoming releases.</p><p id="-telrni_905">The new command-line compiler is available for download on the <a href="https://github.com/JetBrains/kotlin/releases/tag/v1.9.0" id="-telrni_907" data-external="true" rel="noopener noreferrer" target="_blank">GitHub release page</a>.</p></section><section class="chapter"><h3 id="configure-gradle-settings" data-toc="configure-gradle-settings">Configure Gradle settings</h3><p id="-telrni_908">To download Kotlin artifacts and dependencies, update your <code class="code" id="-telrni_911">settings.gradle(.kts)</code> file to use the Maven Central repository:</p><div class="code-block" data-lang="kotlin">
pluginManagement {
    repositories {
        mavenCentral()
        gradlePluginPortal()
    }
}
</div><p id="-telrni_910">If the repository is not specified, Gradle uses the sunset JCenter repository, which could lead to issues with Kotlin artifacts.</p></section></section><section class="chapter"><h2 id="compatibility-guide-for-kotlin-1-9-0" data-toc="compatibility-guide-for-kotlin-1-9-0">Compatibility guide for Kotlin 1.9.0</h2><p id="-telrni_912">Kotlin 1.9.0 is a <a href="kotlin-evolution-principles.html#language-and-tooling-releases" id="-telrni_913">feature release</a> and can, therefore, bring changes that are incompatible with your code written for earlier versions of the language. Find the detailed list of these changes in the <a href="compatibility-guide-19.html" id="-telrni_914">Compatibility guide for Kotlin 1.9.0</a>.</p></section><div class="last-modified">10 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="whatsnew1920.html" class="navigation-links__prev">What's new in Kotlin 1.9.20</a><a href="whatsnew1820.html" class="navigation-links__next">What's new in Kotlin 1.8.20</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>