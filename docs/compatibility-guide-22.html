<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-15T17:12:01.869143761"><link rel="canonical" href="https://kotlinlang.org/docs/compatibility-guide-22.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Compatibility guide for Kotlin 2.2 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"basic-terms","level":0,"title":"Basic terms","anchor":"#basic-terms"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"enable-invokedynamic-for-annotated-lambdas-by-default","level":1,"title":"Enable invokedynamic for annotated lambdas by default","anchor":"#enable-invokedynamic-for-annotated-lambdas-by-default"},{"id":"prohibit-constructor-call-and-inheritance-on-type-aliases-with-variance-in-expanded-types-in-k2","level":1,"title":"Prohibit constructor call and inheritance on type aliases with variance in expanded types in K2","anchor":"#prohibit-constructor-call-and-inheritance-on-type-aliases-with-variance-in-expanded-types-in-k2"},{"id":"prohibit-synthetic-properties-from-kotlin-getters","level":1,"title":"Prohibit synthetic properties from Kotlin getters","anchor":"#prohibit-synthetic-properties-from-kotlin-getters"},{"id":"change-default-method-generation-for-interface-functions-on-jvm","level":1,"title":"Change default method generation for interface functions on JVM","anchor":"#change-default-method-generation-for-interface-functions-on-jvm"},{"id":"forbid-field-targeted-annotations-on-annotation-properties","level":1,"title":"Forbid field-targeted annotations on annotation properties","anchor":"#forbid-field-targeted-annotations-on-annotation-properties"},{"id":"forbid-reified-type-parameters-in-type-aliases","level":1,"title":"Forbid reified type parameters in type aliases","anchor":"#forbid-reified-type-parameters-in-type-aliases"},{"id":"correct-type-checks-on-inline-value-classes-for-number-and-comparable","level":1,"title":"Correct type checks on inline value classes for Number and Comparable","anchor":"#correct-type-checks-on-inline-value-classes-for-number-and-comparable"},{"id":"prohibit-inaccessible-generic-types-from-indirect-dependencies","level":1,"title":"Prohibit inaccessible generic types from indirect dependencies","anchor":"#prohibit-inaccessible-generic-types-from-indirect-dependencies"},{"id":"enforce-visibility-checks-on-type-parameter-bounds","level":1,"title":"Enforce visibility checks on type parameter bounds","anchor":"#enforce-visibility-checks-on-type-parameter-bounds"},{"id":"report-errors-when-exposing-private-types-in-non-private-inline-functions","level":1,"title":"Report errors when exposing private types in non-private inline functions","anchor":"#report-errors-when-exposing-private-types-in-non-private-inline-functions"},{"id":"forbid-non-local-returns-in-lambdas-used-as-parameter-s-default-value","level":1,"title":"Forbid non-local returns in lambdas used as parameter\u0027s default value","anchor":"#forbid-non-local-returns-in-lambdas-used-as-parameter-s-default-value"},{"id":"standard-library","level":0,"title":"Standard library","anchor":"#standard-library"},{"id":"deprecate-kotlin-native-throws","level":1,"title":"Deprecate kotlin.native.Throws","anchor":"#deprecate-kotlin-native-throws"},{"id":"deprecate-abstractdoubletimesource","level":1,"title":"Deprecate AbstractDoubleTimeSource","anchor":"#deprecate-abstractdoubletimesource"},{"id":"tools","level":0,"title":"Tools","anchor":"#tools"},{"id":"correct-setsource-function-in-kotlincompiletool-to-replace-sources","level":1,"title":"Correct setSource() function in KotlinCompileTool to replace sources","anchor":"#correct-setsource-function-in-kotlincompiletool-to-replace-sources"},{"id":"deprecate-kotlincompilationoutput-resourcesdirprovider-property","level":1,"title":"Deprecate KotlinCompilationOutput#resourcesDirProvider property","anchor":"#deprecate-kotlincompilationoutput-resourcesdirprovider-property"},{"id":"deprecate-basekapt-annotationprocessoroptionproviders-property","level":1,"title":"Deprecate BaseKapt.annotationProcessorOptionProviders property","anchor":"#deprecate-basekapt-annotationprocessoroptionproviders-property"},{"id":"deprecate-kotlin-android-extensions-plugin","level":1,"title":"Deprecate kotlin-android-extensions plugin","anchor":"#deprecate-kotlin-android-extensions-plugin"},{"id":"deprecate-kotlinoptions-dsl","level":1,"title":"Deprecate kotlinOptions DSL","anchor":"#deprecate-kotlinoptions-dsl"},{"id":"remove-kotlin-incremental-useclasspathsnapshot-property","level":1,"title":"Remove kotlin.incremental.useClasspathSnapshot property","anchor":"#remove-kotlin-incremental-useclasspathsnapshot-property"},{"id":"deprecations-to-kotlin-scripting","level":1,"title":"Deprecations to Kotlin scripting","anchor":"#deprecations-to-kotlin-scripting"},{"id":"deprecate-disambiguation-classifier-properties","level":1,"title":"Deprecate disambiguation classifier properties","anchor":"#deprecate-disambiguation-classifier-properties"},{"id":"deprecate-commonization-parameters","level":1,"title":"Deprecate commonization parameters","anchor":"#deprecate-commonization-parameters"},{"id":"deprecate-support-for-legacy-metadata-compilation","level":1,"title":"Deprecate support for legacy metadata compilation","anchor":"#deprecate-support-for-legacy-metadata-compilation"},{"id":"deprecate-kotlincompilation-source-api","level":1,"title":"Deprecate KotlinCompilation.source API","anchor":"#deprecate-kotlincompilation-source-api"},{"id":"deprecate-target-presets-apis","level":1,"title":"Deprecate target presets APIs","anchor":"#deprecate-target-presets-apis"},{"id":"deprecate-apple-target-shortcuts","level":1,"title":"Deprecate Apple target shortcuts","anchor":"#deprecate-apple-target-shortcuts"},{"id":"deprecate-publishalllibraryvariants-function","level":1,"title":"Deprecate publishAllLibraryVariants() function","anchor":"#deprecate-publishalllibraryvariants-function"},{"id":"deprecate-android-target","level":1,"title":"Deprecate android target","anchor":"#deprecate-android-target"},{"id":"deprecate-konanversion-in-cinteropprocess","level":1,"title":"Deprecate konanVersion in CInteropProcess","anchor":"#deprecate-konanversion-in-cinteropprocess"},{"id":"deprecate-destinationdir-in-cinteropprocess","level":1,"title":"Deprecate destinationDir in CInteropProcess","anchor":"#deprecate-destinationdir-in-cinteropprocess"},{"id":"deprecate-kotlinartifacts-api","level":1,"title":"Deprecate kotlinArtifacts API","anchor":"#deprecate-kotlinartifacts-api"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Compatibility guide for Kotlin 2.2 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/compatibility-guide-22.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Compatibility guide for Kotlin 2.2 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/compatibility-guide-22.html#webpage",
    "url": "https://kotlinlang.org/docs/compatibility-guide-22.html",
    "name": "Compatibility guide for Kotlin 2.2 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="compatibility-guide-22" data-main-title="Compatibility guide for Kotlin 2.2" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Other resources///Kotlin compatibility guides" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/compatibility-guides/compatibility-guide-22.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compatibility-guide-22" id="compatibility-guide-22.md">Compatibility guide for Kotlin 2.2</h1><p id="jmkdzj_2"><span class="emphasis" id="jmkdzj_8"><a href="kotlin-evolution-principles.html" id="jmkdzj_10">Keeping the Language Modern</a></span> and <span class="emphasis" id="jmkdzj_9"><a href="kotlin-evolution-principles.html" id="jmkdzj_11">Comfortable Updates</a></span> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p><p id="jmkdzj_3">While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 2.1 to Kotlin 2.2.</p><section class="chapter"><h2 id="basic-terms" data-toc="basic-terms">Basic terms</h2><p id="jmkdzj_12">In this document, we introduce several kinds of compatibility:</p><ul class="list _bullet" id="jmkdzj_13"><li class="list__item" id="jmkdzj_15"><p id="jmkdzj_18"><span class="emphasis" id="jmkdzj_19">source</span>: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</p></li><li class="list__item" id="jmkdzj_16"><p id="jmkdzj_20"><span class="emphasis" id="jmkdzj_21">binary</span>: two binary artifacts are said to be binary-compatible if interchanging them doesn't lead to loading or linkage errors</p></li><li class="list__item" id="jmkdzj_17"><p id="jmkdzj_22"><span class="emphasis" id="jmkdzj_23">behavioral</span>: a change is said to be behavioral-incompatible if the same program demonstrates different behavior before and after applying the change</p></li></ul><p id="jmkdzj_14">Remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (for example, from Java) is out of the scope of this document.</p></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><section class="chapter"><h3 id="enable-invokedynamic-for-annotated-lambdas-by-default" data-toc="enable-invokedynamic-for-annotated-lambdas-by-default">Enable invokedynamic for annotated lambdas by default</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_35"><p id="jmkdzj_36"><span class="control" id="jmkdzj_42">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-278" id="jmkdzj_43" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-278</a></p><p id="jmkdzj_37"><span class="control" id="jmkdzj_44">Component</span>: Core language</p><p id="jmkdzj_38"><span class="control" id="jmkdzj_45">Incompatible change type</span>: behavioral</p><p id="jmkdzj_39"><span class="control" id="jmkdzj_46">Short summary</span>: Lambdas with annotations now use <code class="code" id="jmkdzj_47">invokedynamic</code> through <code class="code" id="jmkdzj_48">LambdaMetafactory</code> by default, aligning their behavior with Java lambdas. This affects reflection-based code that relied on retrieving annotations from generated lambda classes. To revert to the old behavior, use the <code class="code" id="jmkdzj_49">-Xindy-allow-annotated-lambdas=false</code> compiler option.</p><p id="jmkdzj_40"><span class="control" id="jmkdzj_50">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_41"><li class="list__item" id="jmkdzj_51"><p id="jmkdzj_52">2.2.0: enable <code class="code" id="jmkdzj_53">invokedynamic</code> for annotated lambdas by default</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-constructor-call-and-inheritance-on-type-aliases-with-variance-in-expanded-types-in-k2" data-toc="prohibit-constructor-call-and-inheritance-on-type-aliases-with-variance-in-expanded-types-in-k2">Prohibit constructor call and inheritance on type aliases with variance in expanded types in K2</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_54"><p id="jmkdzj_55"><span class="control" id="jmkdzj_61">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-4" id="jmkdzj_62" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-4</a></p><p id="jmkdzj_56"><span class="control" id="jmkdzj_63">Component</span>: Core language</p><p id="jmkdzj_57"><span class="control" id="jmkdzj_64">Incompatible change type</span>: source</p><p id="jmkdzj_58"><span class="control" id="jmkdzj_65">Short summary</span>: Constructor calls and inheritance using type aliases that expand to types that use variance modifiers such as <code class="code" id="jmkdzj_66">out</code> are no longer supported by the K2 compiler. This resolves inconsistencies where using the original type wasn't allowed, but the same usage through a type alias was permitted. To migrate, use the original type explicitly where needed.</p><p id="jmkdzj_59"><span class="control" id="jmkdzj_67">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_60"><li class="list__item" id="jmkdzj_68"><p id="jmkdzj_70">2.0.0: report a warning for constructor calls or supertype usage on type aliases that expand to types with variance modifiers</p></li><li class="list__item" id="jmkdzj_69"><p id="jmkdzj_71">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-synthetic-properties-from-kotlin-getters" data-toc="prohibit-synthetic-properties-from-kotlin-getters">Prohibit synthetic properties from Kotlin getters</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_72"><p id="jmkdzj_73"><span class="control" id="jmkdzj_79">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-272" id="jmkdzj_80" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-272</a></p><p id="jmkdzj_74"><span class="control" id="jmkdzj_81">Component</span>: Core language</p><p id="jmkdzj_75"><span class="control" id="jmkdzj_82">Incompatible change type</span>: source</p><p id="jmkdzj_76"><span class="control" id="jmkdzj_83">Short summary</span>: Synthetic properties are no longer allowed for getters defined in Kotlin. This affects cases where Java classes extend Kotlin ones and when working with mapped types like <code class="code" id="jmkdzj_84">java.util.LinkedHashSet</code>. To migrate, replace property access with direct calls to the corresponding getter functions.</p><p id="jmkdzj_77"><span class="control" id="jmkdzj_85">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_78"><li class="list__item" id="jmkdzj_86"><p id="jmkdzj_88">2.0.0: report a warning for accessing synthetic properties created from Kotlin getters</p></li><li class="list__item" id="jmkdzj_87"><p id="jmkdzj_89">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="change-default-method-generation-for-interface-functions-on-jvm" data-toc="change-default-method-generation-for-interface-functions-on-jvm">Change default method generation for interface functions on JVM</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_90"><p id="jmkdzj_91"><span class="control" id="jmkdzj_97">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-269" id="jmkdzj_98" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-269</a></p><p id="jmkdzj_92"><span class="control" id="jmkdzj_99">Component</span>: Core language</p><p id="jmkdzj_93"><span class="control" id="jmkdzj_100">Incompatible change type</span>: binary</p><p id="jmkdzj_94"><span class="control" id="jmkdzj_101">Short summary</span>: Functions declared in interfaces are now compiled to JVM default methods unless configured otherwise. This may result in compilation errors in Java code when unrelated supertypes define conflicting implementations. The behavior is controlled by the stable <code class="code" id="jmkdzj_102">-jvm-default</code> compiler option, which replaces the now deprecated <code class="code" id="jmkdzj_103">-Xjvm-default</code> option. To restore the previous behavior, where default implementations are generated only in <code class="code" id="jmkdzj_104">DefaultImpls</code> classes and subclasses, use <code class="code" id="jmkdzj_105">-jvm-default=disable</code>.</p><p id="jmkdzj_95"><span class="control" id="jmkdzj_106">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_96"><li class="list__item" id="jmkdzj_107"><p id="jmkdzj_108">2.2.0: <code class="code" id="jmkdzj_109">-jvm-default</code> compiler option is set to <code class="code" id="jmkdzj_110">enable</code> by default</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-field-targeted-annotations-on-annotation-properties" data-toc="forbid-field-targeted-annotations-on-annotation-properties">Forbid field-targeted annotations on annotation properties</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_111"><p id="jmkdzj_112"><span class="control" id="jmkdzj_118">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-7" id="jmkdzj_119" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-7</a></p><p id="jmkdzj_113"><span class="control" id="jmkdzj_120">Component</span>: Core language</p><p id="jmkdzj_114"><span class="control" id="jmkdzj_121">Incompatible change type</span>: source</p><p id="jmkdzj_115"><span class="control" id="jmkdzj_122">Short summary</span>: Field-targeted annotations are no longer allowed on annotation properties. Although these annotations had no observable effect, this change may affect custom IR plugins that relied on them. To migrate, remove the field-targeted annotation from the property.</p><p id="jmkdzj_116"><span class="control" id="jmkdzj_123">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_117"><li class="list__item" id="jmkdzj_124"><p id="jmkdzj_127">2.1.0: <code class="code" id="jmkdzj_128">@JvmField</code> annotation is deprecated with a warning on annotation properties</p></li><li class="list__item" id="jmkdzj_125"><p id="jmkdzj_129">2.1.20: report a warning for all field-targeted annotations on annotation properties</p></li><li class="list__item" id="jmkdzj_126"><p id="jmkdzj_130">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-reified-type-parameters-in-type-aliases" data-toc="forbid-reified-type-parameters-in-type-aliases">Forbid reified type parameters in type aliases</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_131"><p id="jmkdzj_132"><span class="control" id="jmkdzj_138">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-5" id="jmkdzj_139" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-5</a></p><p id="jmkdzj_133"><span class="control" id="jmkdzj_140">Component</span>: Core language</p><p id="jmkdzj_134"><span class="control" id="jmkdzj_141">Incompatible change type</span>: source</p><p id="jmkdzj_135"><span class="control" id="jmkdzj_142">Short summary</span>: The <code class="code" id="jmkdzj_143">reified</code> modifier is no longer allowed on type parameters in type aliases. Reified type parameters are only valid in inline functions, so using them in type aliases had no effect. To migrate, remove the <code class="code" id="jmkdzj_144">reified</code> modifier from <code class="code" id="jmkdzj_145">typealias</code> declarations.</p><p id="jmkdzj_136"><span class="control" id="jmkdzj_146">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_137"><li class="list__item" id="jmkdzj_147"><p id="jmkdzj_149">2.1.0: report a warning for reified type parameters in type aliases</p></li><li class="list__item" id="jmkdzj_148"><p id="jmkdzj_150">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="correct-type-checks-on-inline-value-classes-for-number-and-comparable" data-toc="correct-type-checks-on-inline-value-classes-for-number-and-comparable">Correct type checks on inline value classes for <code class="code" id="jmkdzj_153">Number</code> and <code class="code" id="jmkdzj_154">Comparable</code></h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_152"><p id="jmkdzj_155"><span class="control" id="jmkdzj_161">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-21" id="jmkdzj_162" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-21</a></p><p id="jmkdzj_156"><span class="control" id="jmkdzj_163">Component</span>: Kotlin/JVM</p><p id="jmkdzj_157"><span class="control" id="jmkdzj_164">Incompatible change type</span>: behavioral</p><p id="jmkdzj_158"><span class="control" id="jmkdzj_165">Short summary</span>: Inline value classes are no longer treated as implementors of <code class="code" id="jmkdzj_166">java.lang.Number</code> or <code class="code" id="jmkdzj_167">java.lang.Comparable</code> in <code class="code" id="jmkdzj_168">is</code> and <code class="code" id="jmkdzj_169">as</code> checks. These checks previously returned incorrect results when applied to boxed inline classes. The optimization now applies only to primitive types and their wrappers.</p><p id="jmkdzj_159"><span class="control" id="jmkdzj_170">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_160"><li class="list__item" id="jmkdzj_171"><p id="jmkdzj_172">2.2.0: enable the new behavior</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-inaccessible-generic-types-from-indirect-dependencies" data-toc="prohibit-inaccessible-generic-types-from-indirect-dependencies">Prohibit inaccessible generic types from indirect dependencies</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_173"><p id="jmkdzj_174"><span class="control" id="jmkdzj_180">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-3" id="jmkdzj_181" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-3</a></p><p id="jmkdzj_175"><span class="control" id="jmkdzj_182">Component</span>: Core language</p><p id="jmkdzj_176"><span class="control" id="jmkdzj_183">Incompatible change type</span>: source</p><p id="jmkdzj_177"><span class="control" id="jmkdzj_184">Short summary</span>: The K2 compiler now reports errors when using types from indirect dependencies that are not visible to the compiler. This affects cases such as lambda parameters or generic type arguments, where the referenced type is not available due to a missing dependency.</p><p id="jmkdzj_178"><span class="control" id="jmkdzj_185">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_179"><li class="list__item" id="jmkdzj_186"><p id="jmkdzj_189">2.0.0: report errors for inaccessible generic types in lambdas and selected usages of inaccessible generic type arguments; report warnings for inaccessible non-generic types in lambdas and inaccessible type arguments in expression and super types</p></li><li class="list__item" id="jmkdzj_187"><p id="jmkdzj_190">2.1.0: raise the warning on inaccessible non-generic types in lambdas to an error</p></li><li class="list__item" id="jmkdzj_188"><p id="jmkdzj_191">2.2.0: raise the warning on inaccessible type arguments in expression types to an error</p></li></ul></aside></section><section class="chapter"><h3 id="enforce-visibility-checks-on-type-parameter-bounds" data-toc="enforce-visibility-checks-on-type-parameter-bounds">Enforce visibility checks on type parameter bounds</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_192"><p id="jmkdzj_193"><span class="control" id="jmkdzj_199">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-274" id="jmkdzj_200" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-274</a></p><p id="jmkdzj_194"><span class="control" id="jmkdzj_201">Component</span>: Core language</p><p id="jmkdzj_195"><span class="control" id="jmkdzj_202">Incompatible change type</span>: source</p><p id="jmkdzj_196"><span class="control" id="jmkdzj_203">Short summary</span>: Functions and properties can no longer use a type parameter bound that has more restrictive visibility than the declaration itself. This prevents exposing inaccessible types indirectly, which previously compiled without errors but led to runtime failures or IR validation errors in some cases.</p><p id="jmkdzj_197"><span class="control" id="jmkdzj_204">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_198"><li class="list__item" id="jmkdzj_205"><p id="jmkdzj_207">2.1.0: report a warning when a type parameter has a bound that is not visible from the declaration's visibility scope</p></li><li class="list__item" id="jmkdzj_206"><p id="jmkdzj_208">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="report-errors-when-exposing-private-types-in-non-private-inline-functions" data-toc="report-errors-when-exposing-private-types-in-non-private-inline-functions">Report errors when exposing private types in non-private inline functions</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_209"><p id="jmkdzj_210"><span class="control" id="jmkdzj_216">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-70916" id="jmkdzj_217" data-external="true" rel="noopener noreferrer" target="_blank">KT-70916</a></p><p id="jmkdzj_211"><span class="control" id="jmkdzj_218">Component</span>: Core language</p><p id="jmkdzj_212"><span class="control" id="jmkdzj_219">Incompatible change type</span>: source</p><p id="jmkdzj_213"><span class="control" id="jmkdzj_220">Short summary</span>: Accessing private types, functions, or properties from non-private inline functions is no longer allowed. To migrate, either avoid referencing private entities, make the function private, or remove the <code class="code" id="jmkdzj_221">inline</code> modifier. Note that removing <code class="code" id="jmkdzj_222">inline</code> breaks binary compatibility.</p><p id="jmkdzj_214"><span class="control" id="jmkdzj_223">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_215"><li class="list__item" id="jmkdzj_224"><p id="jmkdzj_225">2.2.0: report an error when accessing private types or members from non-private inline functions</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-non-local-returns-in-lambdas-used-as-parameter-s-default-value" data-toc="forbid-non-local-returns-in-lambdas-used-as-parameter-s-default-value">Forbid non-local returns in lambdas used as parameter's default value</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_226"><p id="jmkdzj_227"><span class="control" id="jmkdzj_233">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-286" id="jmkdzj_234" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-286</a></p><p id="jmkdzj_228"><span class="control" id="jmkdzj_235">Component</span>: Core language</p><p id="jmkdzj_229"><span class="control" id="jmkdzj_236">Incompatible change type</span>: source</p><p id="jmkdzj_230"><span class="control" id="jmkdzj_237">Short summary</span>: Non-local return statements are no longer allowed in lambdas used as parameter's default value. This pattern previously compiled but led to runtime crashes. To migrate, rewrite the lambda to avoid non-local returns or move the logic outside the default value.</p><p id="jmkdzj_231"><span class="control" id="jmkdzj_238">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_232"><li class="list__item" id="jmkdzj_239"><p id="jmkdzj_240">2.2.0: report an error for non-local returns in lambdas used as parameter's default value</p></li></ul></aside></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2><section class="chapter"><h3 id="deprecate-kotlin-native-throws" data-toc="deprecate-kotlin-native-throws">Deprecate <code class="code" id="jmkdzj_245">kotlin.native.Throws</code></h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_244"><p id="jmkdzj_246"><span class="control" id="jmkdzj_252">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-72137" id="jmkdzj_253" data-external="true" rel="noopener noreferrer" target="_blank">KT-72137</a></p><p id="jmkdzj_247"><span class="control" id="jmkdzj_254">Component</span>: Kotlin/Native</p><p id="jmkdzj_248"><span class="control" id="jmkdzj_255">Incompatible change type</span>: source</p><p id="jmkdzj_249"><span class="control" id="jmkdzj_256">Short summary</span>: <code class="code" id="jmkdzj_257">kotlin.native.Throws</code> is deprecated; use the common <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-throws/" id="jmkdzj_258" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_259">kotlin.Throws</code></a> annotation instead.</p><p id="jmkdzj_250"><span class="control" id="jmkdzj_260">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_251"><li class="list__item" id="jmkdzj_261"><p id="jmkdzj_263">1.9.0: report a warning when using <code class="code" id="jmkdzj_264">kotlin.native.Throws</code></p></li><li class="list__item" id="jmkdzj_262"><p id="jmkdzj_265">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-abstractdoubletimesource" data-toc="deprecate-abstractdoubletimesource">Deprecate <code class="code" id="jmkdzj_268">AbstractDoubleTimeSource</code></h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_267"><p id="jmkdzj_269"><span class="control" id="jmkdzj_275">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-72137" id="jmkdzj_276" data-external="true" rel="noopener noreferrer" target="_blank">KT-72137</a></p><p id="jmkdzj_270"><span class="control" id="jmkdzj_277">Component</span>: kotlin-stdlib</p><p id="jmkdzj_271"><span class="control" id="jmkdzj_278">Incompatible change type</span>: source</p><p id="jmkdzj_272"><span class="control" id="jmkdzj_279">Short summary</span>: <code class="code" id="jmkdzj_280">AbstractDoubleTimeSource</code> is deprecated; use <a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.time/-abstract-long-time-source/" id="jmkdzj_281" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_282">AbstractLongTimeSource</code></a> instead.</p><p id="jmkdzj_273"><span class="control" id="jmkdzj_283">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_274"><li class="list__item" id="jmkdzj_284"><p id="jmkdzj_286">1.8.20: report a warning when using <code class="code" id="jmkdzj_287">AbstractDoubleTimeSource</code></p></li><li class="list__item" id="jmkdzj_285"><p id="jmkdzj_288">2.2.0: raise the warning to an error</p></li></ul></aside></section></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2><section class="chapter"><h3 id="correct-setsource-function-in-kotlincompiletool-to-replace-sources" data-toc="correct-setsource-function-in-kotlincompiletool-to-replace-sources">Correct <code class="code" id="jmkdzj_309">setSource()</code> function in <code class="code" id="jmkdzj_310">KotlinCompileTool</code> to replace sources</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_308"><p id="jmkdzj_311"><span class="control" id="jmkdzj_317">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-59632" id="jmkdzj_318" data-external="true" rel="noopener noreferrer" target="_blank">KT-59632</a></p><p id="jmkdzj_312"><span class="control" id="jmkdzj_319">Component</span>: Gradle</p><p id="jmkdzj_313"><span class="control" id="jmkdzj_320">Incompatible change type</span>: behavioral</p><p id="jmkdzj_314"><span class="control" id="jmkdzj_321">Short summary</span>: The <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-kotlin-compile-tool/set-source.html#" id="jmkdzj_322" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_325">setSource()</code></a> function in the <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-kotlin-compile-tool/#" id="jmkdzj_323" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_326">KotlinCompileTool</code></a> interface now replaces configured sources instead of adding to them. If you want to add sources without replacing existing ones, use the <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-kotlin-compile-tool/source.html#" id="jmkdzj_324" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_327">source()</code></a> function.</p><p id="jmkdzj_315"><span class="control" id="jmkdzj_328">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_316"><li class="list__item" id="jmkdzj_329"><p id="jmkdzj_330">2.2.0: enable the new behavior</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlincompilationoutput-resourcesdirprovider-property" data-toc="deprecate-kotlincompilationoutput-resourcesdirprovider-property">Deprecate <code class="code" id="jmkdzj_333">KotlinCompilationOutput#resourcesDirProvider</code> property</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_332"><p id="jmkdzj_334"><span class="control" id="jmkdzj_340">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-70620" id="jmkdzj_341" data-external="true" rel="noopener noreferrer" target="_blank">KT-70620</a></p><p id="jmkdzj_335"><span class="control" id="jmkdzj_342">Component</span>: Gradle</p><p id="jmkdzj_336"><span class="control" id="jmkdzj_343">Incompatible change type</span>: source</p><p id="jmkdzj_337"><span class="control" id="jmkdzj_344">Short summary</span>: The <code class="code" id="jmkdzj_345">KotlinCompilationOutput#resourcesDirProvider</code> property is deprecated. Use <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.plugin/-kotlin-source-set/resources.html" id="jmkdzj_346" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_347">KotlinSourceSet.resources</code></a> in your Gradle build script instead to add additional resource directories.</p><p id="jmkdzj_338"><span class="control" id="jmkdzj_348">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_339"><li class="list__item" id="jmkdzj_349"><p id="jmkdzj_351">2.1.0: <code class="code" id="jmkdzj_352">KotlinCompilationOutput#resourcesDirProvider</code> is deprecated with a warning</p></li><li class="list__item" id="jmkdzj_350"><p id="jmkdzj_353">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-basekapt-annotationprocessoroptionproviders-property" data-toc="deprecate-basekapt-annotationprocessoroptionproviders-property">Deprecate <code class="code" id="jmkdzj_356">BaseKapt.annotationProcessorOptionProviders</code> property</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_355"><p id="jmkdzj_357"><span class="control" id="jmkdzj_363">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-58009" id="jmkdzj_364" data-external="true" rel="noopener noreferrer" target="_blank">KT-58009</a></p><p id="jmkdzj_358"><span class="control" id="jmkdzj_365">Component</span>: Gradle</p><p id="jmkdzj_359"><span class="control" id="jmkdzj_366">Incompatible change type</span>: source</p><p id="jmkdzj_360"><span class="control" id="jmkdzj_367">Short summary</span>: The <a href="https://kotlinlang.org/api/kotlin-gradle-plugin/kotlin-gradle-plugin-api/org.jetbrains.kotlin.gradle.tasks/-base-kapt/annotation-processor-option-providers.html#" id="jmkdzj_368" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_374">BaseKapt.annotationProcessorOptionProviders</code></a> property is deprecated in favor of <code class="code" id="jmkdzj_369">BaseKapt.annotationProcessorOptionsProviders</code>, which accepts a <code class="code" id="jmkdzj_370">ListProperty&lt;CommandLineArgumentProvider&gt;</code> instead of a <code class="code" id="jmkdzj_371">MutableList&lt;Any&gt;</code>. This clearly defines the expected element type and prevents runtime failures caused by adding incorrect elements, such as nested lists. If your current code adds a list as a single element, replace the <code class="code" id="jmkdzj_372">add()</code> function with the <code class="code" id="jmkdzj_373">addAll()</code> function.</p><p id="jmkdzj_361"><span class="control" id="jmkdzj_375">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_362"><li class="list__item" id="jmkdzj_376"><p id="jmkdzj_377">2.2.0: enforce the new type in the API</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlin-android-extensions-plugin" data-toc="deprecate-kotlin-android-extensions-plugin">Deprecate <code class="code" id="jmkdzj_380">kotlin-android-extensions</code> plugin</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_379"><p id="jmkdzj_381"><span class="control" id="jmkdzj_387">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-72341/" id="jmkdzj_388" data-external="true" rel="noopener noreferrer" target="_blank">KT-72341</a></p><p id="jmkdzj_382"><span class="control" id="jmkdzj_389">Component</span>: Gradle</p><p id="jmkdzj_383"><span class="control" id="jmkdzj_390">Incompatible change type</span>: source</p><p id="jmkdzj_384"><span class="control" id="jmkdzj_391">Short summary</span>: The <code class="code" id="jmkdzj_392">kotlin-android-extensions</code> plugin is deprecated. Use a separate plugin, <a href="https://plugins.gradle.org/plugin/org.jetbrains.kotlin.plugin.parcelize" id="jmkdzj_393" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="jmkdzj_396">kotlin-parcelize</code></a>, for the <code class="code" id="jmkdzj_394">Parcelable</code> implementation generator and the Android Jetpack's <a href="https://developer.android.com/topic/libraries/view-binding" id="jmkdzj_395" data-external="true" rel="noopener noreferrer" target="_blank">view bindings</a> for synthetic views instead.</p><p id="jmkdzj_385"><span class="control" id="jmkdzj_397">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_386"><li class="list__item" id="jmkdzj_398"><p id="jmkdzj_401">1.4.20: the plugin is deprecated</p></li><li class="list__item" id="jmkdzj_399"><p id="jmkdzj_402">2.1.20: a configuration error is introduced, and no plugin code is executed</p></li><li class="list__item" id="jmkdzj_400"><p id="jmkdzj_403">2.2.0: the plugin code is removed</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlinoptions-dsl" data-toc="deprecate-kotlinoptions-dsl">Deprecate <code class="code" id="jmkdzj_406">kotlinOptions</code> DSL</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_405"><p id="jmkdzj_407"><span class="control" id="jmkdzj_413">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-54110" id="jmkdzj_414" data-external="true" rel="noopener noreferrer" target="_blank">KT-54110</a></p><p id="jmkdzj_408"><span class="control" id="jmkdzj_415">Component</span>: Gradle</p><p id="jmkdzj_409"><span class="control" id="jmkdzj_416">Incompatible change type</span>: source</p><p id="jmkdzj_410"><span class="control" id="jmkdzj_417">Short summary</span>: The ability to configure compiler options through the <code class="code" id="jmkdzj_418">kotlinOptions</code> DSL and the related <code class="code" id="jmkdzj_419">KotlinCompile&lt;KotlinOptions&gt;</code> task interface is deprecated in favor of the new <code class="code" id="jmkdzj_420">compilerOptions</code> DSL. As part of this deprecation, all properties in the <code class="code" id="jmkdzj_421">kotlinOptions</code> interface are now also individually marked as deprecated. To migrate, use the <code class="code" id="jmkdzj_422">compilerOptions</code> DSL to configure compiler options. For guidance on the migration, see <a href="gradle-compiler-options.html#migrate-from-kotlinoptions-to-compileroptions" id="jmkdzj_423">Migrate from <code class="code" id="jmkdzj_424">kotlinOptions {}</code> to <code class="code" id="jmkdzj_425">compilerOptions {}</code></a>.</p><p id="jmkdzj_411"><span class="control" id="jmkdzj_426">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_412"><li class="list__item" id="jmkdzj_427"><p id="jmkdzj_429">2.0.0: report a warning for <code class="code" id="jmkdzj_430">kotlinOptions</code> DSL</p></li><li class="list__item" id="jmkdzj_428"><p id="jmkdzj_431">2.2.0: raise the warning to an error and deprecate all properties in <code class="code" id="jmkdzj_432">kotlinOptions</code></p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin-incremental-useclasspathsnapshot-property" data-toc="remove-kotlin-incremental-useclasspathsnapshot-property">Remove <code class="code" id="jmkdzj_435">kotlin.incremental.useClasspathSnapshot</code> property</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_434"><p id="jmkdzj_436"><span class="control" id="jmkdzj_442">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-62963" id="jmkdzj_443" data-external="true" rel="noopener noreferrer" target="_blank">KT-62963</a></p><p id="jmkdzj_437"><span class="control" id="jmkdzj_444">Component</span>: Gradle</p><p id="jmkdzj_438"><span class="control" id="jmkdzj_445">Incompatible change type</span>: source</p><p id="jmkdzj_439"><span class="control" id="jmkdzj_446">Short summary</span>: The <code class="code" id="jmkdzj_447">kotlin.incremental.useClasspathSnapshot</code> Gradle property is removed. This property controlled the deprecated JVM history-based incremental compilation mode, which has been replaced by the classpath-based approach enabled by default since Kotlin 1.8.20.</p><p id="jmkdzj_440"><span class="control" id="jmkdzj_448">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_441"><li class="list__item" id="jmkdzj_449"><p id="jmkdzj_451">2.0.20: deprecate the <code class="code" id="jmkdzj_452">kotlin.incremental.useClasspathSnapshot</code> property with a warning</p></li><li class="list__item" id="jmkdzj_450"><p id="jmkdzj_453">2.2.0: remove the property</p></li></ul></aside></section><section class="chapter"><h3 id="deprecations-to-kotlin-scripting" data-toc="deprecations-to-kotlin-scripting">Deprecations to Kotlin scripting</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_454"><p id="jmkdzj_455"><span class="control" id="jmkdzj_463">Issues</span>: <a href="https://youtrack.jetbrains.com/issue/KT-71685" id="jmkdzj_464" data-external="true" rel="noopener noreferrer" target="_blank">KT-71685</a>, <a href="https://youtrack.jetbrains.com/issue/KT-75632/" id="jmkdzj_465" data-external="true" rel="noopener noreferrer" target="_blank">KT-75632</a>, <a href="https://youtrack.jetbrains.com/issue/KT-76196/" id="jmkdzj_466" data-external="true" rel="noopener noreferrer" target="_blank">KT-76196</a>.</p><p id="jmkdzj_456"><span class="control" id="jmkdzj_467">Component</span>: Scripting</p><p id="jmkdzj_457"><span class="control" id="jmkdzj_468">Incompatible change type</span>: source</p><p id="jmkdzj_458"><span class="control" id="jmkdzj_469">Short summary</span>: Kotlin 2.2.0 deprecates support for:</p><ul class="list _bullet" id="jmkdzj_459"><li class="list__item" id="jmkdzj_470"><p id="jmkdzj_473">REPL: To continue to use REPL via <code class="code" id="jmkdzj_474">kotlinc</code>, opt in with the <code class="code" id="jmkdzj_475">-Xrepl</code> compiler option.</p></li><li class="list__item" id="jmkdzj_471"><p id="jmkdzj_476">JSR-223: Since the <a href="https://jcp.org/en/jsr/detail?id=223" id="jmkdzj_477" data-external="true" rel="noopener noreferrer" target="_blank">JSR</a> is in <span class="control" id="jmkdzj_478">Withdrawn</span> state. The JSR-223 implementation continues to work with language version 1.9 but there are no plans to migrate to the K2 compiler in the future.</p></li><li class="list__item" id="jmkdzj_472"><p id="jmkdzj_479">The <code class="code" id="jmkdzj_480">KotlinScriptMojo</code> Maven plugin. You will see compiler warnings if you continue to use it.</p></li></ul><p id="jmkdzj_460">For more information, see our <a href="https://blog.jetbrains.com/kotlin/2024/11/state-of-kotlin-scripting-2024/" id="jmkdzj_481" data-external="true" rel="noopener noreferrer" target="_blank">blog post</a>.</p><p id="jmkdzj_461"><span class="control" id="jmkdzj_482">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_462"><li class="list__item" id="jmkdzj_483"><p id="jmkdzj_485">2.1.0: deprecate the use of REPL in <code class="code" id="jmkdzj_486">kotlinc</code> with a warning</p></li><li class="list__item" id="jmkdzj_484"><p id="jmkdzj_487">2.2.0: to use REPL via <code class="code" id="jmkdzj_488">kotlinc</code>, opt in with the <code class="code" id="jmkdzj_489">-Xrepl</code> compiler option; deprecate JSR-223, support can be restored by switching to language version 1.9; deprecate the <code class="code" id="jmkdzj_490">KotlinScriptMojo</code> Maven plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-disambiguation-classifier-properties" data-toc="deprecate-disambiguation-classifier-properties">Deprecate disambiguation classifier properties</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_491"><p id="jmkdzj_492"><span class="control" id="jmkdzj_499">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-58231" id="jmkdzj_500" data-external="true" rel="noopener noreferrer" target="_blank">KT-58231</a></p><p id="jmkdzj_493"><span class="control" id="jmkdzj_501">Component</span>: Gradle</p><p id="jmkdzj_494"><span class="control" id="jmkdzj_502">Incompatible change type</span>: source</p><p id="jmkdzj_495"><span class="control" id="jmkdzj_503">Short summary</span>: Options that were used to control how the Kotlin Gradle plugin disambiguates source set names and IDE imports became obsolete. Therefore, the following properties are now deprecated in the <code class="code" id="jmkdzj_504">KotlinTarget</code> interface:</p><ul class="list _bullet" id="jmkdzj_496"><li class="list__item" id="jmkdzj_505"><p id="jmkdzj_507"><code class="code" id="jmkdzj_508">useDisambiguationClassifierAsSourceSetNamePrefix</code></p></li><li class="list__item" id="jmkdzj_506"><p id="jmkdzj_509"><code class="code" id="jmkdzj_510">overrideDisambiguationClassifierOnIdeImport</code></p></li></ul><p id="jmkdzj_497"><span class="control" id="jmkdzj_511">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_498"><li class="list__item" id="jmkdzj_512"><p id="jmkdzj_515">2.0.0: report a warning when the Gradle properties are used</p></li><li class="list__item" id="jmkdzj_513"><p id="jmkdzj_516">2.1.0: raise this warning to an error</p></li><li class="list__item" id="jmkdzj_514"><p id="jmkdzj_517">2.2.0: remove Gradle properties</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-commonization-parameters" data-toc="deprecate-commonization-parameters">Deprecate commonization parameters</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_518"><p id="jmkdzj_519"><span class="control" id="jmkdzj_526">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-75161" id="jmkdzj_527" data-external="true" rel="noopener noreferrer" target="_blank">KT-75161</a></p><p id="jmkdzj_520"><span class="control" id="jmkdzj_528">Component</span>: Gradle</p><p id="jmkdzj_521"><span class="control" id="jmkdzj_529">Incompatible change type</span>: source</p><p id="jmkdzj_522"><span class="control" id="jmkdzj_530">Short summary</span>: The parameters for experimental commonization modes are deprecated in the Kotlin Gradle plugin. These parameters may produce invalid compilation artifacts that are then cached. To delete affected artifacts:</p><ol class="list _decimal" id="jmkdzj_523" type="1"><li class="list__item" id="jmkdzj_531"><p id="jmkdzj_533">Remove the following options from your <code class="code" id="jmkdzj_535">gradle.properties</code> file:</p><div class="code-block" data-lang="none">
kotlin.mpp.enableOptimisticNumberCommonization
kotlin.mpp.enablePlatformIntegerCommonization
</div></li><li class="list__item" id="jmkdzj_532"><p id="jmkdzj_536">Clear the commonization cache in the <code class="code" id="jmkdzj_538">~/.konan/*/klib/commonized</code> directory or run the following command:</p><div class="code-block" data-lang="bash">
./gradlew cleanNativeDistributionCommonization
</div></li></ol><p id="jmkdzj_524"><span class="control" id="jmkdzj_539">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_525"><li class="list__item" id="jmkdzj_540"><p id="jmkdzj_542">2.2.0: deprecate commonization parameters with an error</p></li><li class="list__item" id="jmkdzj_541"><p id="jmkdzj_543">2.2.20: remove commonization parameters</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-support-for-legacy-metadata-compilation" data-toc="deprecate-support-for-legacy-metadata-compilation">Deprecate support for legacy metadata compilation</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_544"><p id="jmkdzj_545"><span class="control" id="jmkdzj_552">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-61817" id="jmkdzj_553" data-external="true" rel="noopener noreferrer" target="_blank">KT-61817</a></p><p id="jmkdzj_546"><span class="control" id="jmkdzj_554">Component</span>: Gradle</p><p id="jmkdzj_547"><span class="control" id="jmkdzj_555">Incompatible change type</span>: source</p><p id="jmkdzj_548"><span class="control" id="jmkdzj_556">Short summary</span>: Options that were used to set up hierarchical structure and create intermediate source sets between the common and intermediate source sets became obsolete. The following compiler options are removed:</p><ul class="list _bullet" id="jmkdzj_549"><li class="list__item" id="jmkdzj_557"><p id="jmkdzj_560"><code class="code" id="jmkdzj_561">isCompatibilityMetadataVariantEnabled</code></p></li><li class="list__item" id="jmkdzj_558"><p id="jmkdzj_562"><code class="code" id="jmkdzj_563">withGranularMetadata</code></p></li><li class="list__item" id="jmkdzj_559"><p id="jmkdzj_564"><code class="code" id="jmkdzj_565">isKotlinGranularMetadataEnabled</code></p></li></ul><p id="jmkdzj_550"><span class="control" id="jmkdzj_566">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_551"><li class="list__item" id="jmkdzj_567"><p id="jmkdzj_568">2.2.0: remove compiler options from the Kotlin Gradle plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlincompilation-source-api" data-toc="deprecate-kotlincompilation-source-api">Deprecate <code class="code" id="jmkdzj_571">KotlinCompilation.source</code> API</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_570"><p id="jmkdzj_572"><span class="control" id="jmkdzj_578">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-64991" id="jmkdzj_579" data-external="true" rel="noopener noreferrer" target="_blank">KT-64991</a></p><p id="jmkdzj_573"><span class="control" id="jmkdzj_580">Component</span>: Gradle</p><p id="jmkdzj_574"><span class="control" id="jmkdzj_581">Incompatible change type</span>: source</p><p id="jmkdzj_575"><span class="control" id="jmkdzj_582">Short summary</span>: The access to <code class="code" id="jmkdzj_583">KotlinCompilation.source</code> API that allowed adding Kotlin source sets directly to the Kotlin compilation has been deprecated.</p><p id="jmkdzj_576"><span class="control" id="jmkdzj_584">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_577"><li class="list__item" id="jmkdzj_585"><p id="jmkdzj_588">1.9.0: report a warning when <code class="code" id="jmkdzj_589">KotlinCompilation.source</code> is used</p></li><li class="list__item" id="jmkdzj_586"><p id="jmkdzj_590">1.9.20: raise this warning to an error</p></li><li class="list__item" id="jmkdzj_587"><p id="jmkdzj_591">2.2.0: remove <code class="code" id="jmkdzj_592">KotlinCompilation.source</code> from the Kotlin Gradle plugin; attempts to use it lead to &quot;unresolved reference&quot; errors during the buildscript compilation</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-target-presets-apis" data-toc="deprecate-target-presets-apis">Deprecate target presets APIs</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_593"><p id="jmkdzj_594"><span class="control" id="jmkdzj_601">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-71698" id="jmkdzj_602" data-external="true" rel="noopener noreferrer" target="_blank">KT-71698</a></p><p id="jmkdzj_595"><span class="control" id="jmkdzj_603">Component</span>: Gradle</p><p id="jmkdzj_596"><span class="control" id="jmkdzj_604">Incompatible change type</span>: source</p><p id="jmkdzj_597"><span class="control" id="jmkdzj_605">Short summary</span>: Target presets for Kotlin Multiplatform targets became obsolete; target DSL functions like <code class="code" id="jmkdzj_606">jvm()</code> or <code class="code" id="jmkdzj_607">iosSimulatorArm64()</code> now cover the same use cases. All presets-related APIs are deprecated:</p><ul class="list _bullet" id="jmkdzj_598"><li class="list__item" id="jmkdzj_608"><p id="jmkdzj_611">The <code class="code" id="jmkdzj_612">presets</code> property in <code class="code" id="jmkdzj_613">org.jetbrains.kotlin.gradle.dsl.KotlinMultiplatformExtension</code></p></li><li class="list__item" id="jmkdzj_609"><p id="jmkdzj_614">The <code class="code" id="jmkdzj_615">org.jetbrains.kotlin.gradle.plugin.KotlinTargetPreset</code> interface and all its inheritors</p></li><li class="list__item" id="jmkdzj_610"><p id="jmkdzj_616">The <code class="code" id="jmkdzj_617">fromPreset</code> overloads</p></li></ul><p id="jmkdzj_599"><span class="control" id="jmkdzj_618">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_600"><li class="list__item" id="jmkdzj_619"><p id="jmkdzj_622">1.9.20: report a warning on any usages of the presets-related API</p></li><li class="list__item" id="jmkdzj_620"><p id="jmkdzj_623">2.0.0: raise this warning to an error</p></li><li class="list__item" id="jmkdzj_621"><p id="jmkdzj_624">2.2.0: remove the presets-related API from the public API of the Kotlin Gradle plugin; sources that still use it fail with &quot;unresolved reference&quot; errors, and binaries (for example, Gradle plugins) might fail with linkage errors unless recompiled against the latest versions of the Kotlin Gradle plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-apple-target-shortcuts" data-toc="deprecate-apple-target-shortcuts">Deprecate Apple target shortcuts</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_625"><p id="jmkdzj_626"><span class="control" id="jmkdzj_632">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-70615" id="jmkdzj_633" data-external="true" rel="noopener noreferrer" target="_blank">KT-70615</a></p><p id="jmkdzj_627"><span class="control" id="jmkdzj_634">Component</span>: Gradle</p><p id="jmkdzj_628"><span class="control" id="jmkdzj_635">Incompatible change type</span>: source</p><p id="jmkdzj_629"><span class="control" id="jmkdzj_636">Short summary</span>: The <code class="code" id="jmkdzj_637">ios()</code>, <code class="code" id="jmkdzj_638">watchos()</code>, and <code class="code" id="jmkdzj_639">tvos()</code> target shortcuts are deprecated in Kotlin Multiplatform DSL. The shortcuts were designed to partially create a source set hierarchy for Apple targets. The Kotlin Multiplatform Gradle plugin now provides a built-in hierarchy template. Instead of shortcuts, specify the list of targets, and then the plugin automatically sets up intermediate source sets for them.</p><p id="jmkdzj_630"><span class="control" id="jmkdzj_640">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_631"><li class="list__item" id="jmkdzj_641"><p id="jmkdzj_644">1.9.20: report a warning when target shortcuts are used; the default hierarchy template is enabled by default instead</p></li><li class="list__item" id="jmkdzj_642"><p id="jmkdzj_645">2.1.0: report an error when target shortcuts are used</p></li><li class="list__item" id="jmkdzj_643"><p id="jmkdzj_646">2.2.0: remove target shortcut DSL from the Kotlin Multiplatform Gradle plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-publishalllibraryvariants-function" data-toc="deprecate-publishalllibraryvariants-function">Deprecate <code class="code" id="jmkdzj_649">publishAllLibraryVariants()</code> function</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_648"><p id="jmkdzj_650"><span class="control" id="jmkdzj_656">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-60623" id="jmkdzj_657" data-external="true" rel="noopener noreferrer" target="_blank">KT-60623</a></p><p id="jmkdzj_651"><span class="control" id="jmkdzj_658">Component</span>: Gradle</p><p id="jmkdzj_652"><span class="control" id="jmkdzj_659">Incompatible change type</span>: source</p><p id="jmkdzj_653"><span class="control" id="jmkdzj_660">Short summary</span>: The <code class="code" id="jmkdzj_661">publishAllLibraryVariants()</code> function is deprecated. It was designed to publish all build variants for Android targets. This approach is not recommended now, as it can cause problems with variant resolution, especially when multiple flavors and build types are used. Use the <code class="code" id="jmkdzj_662">publishLibraryVariants()</code> function, which specifies build variants, instead.</p><p id="jmkdzj_654"><span class="control" id="jmkdzj_663">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_655"><li class="list__item" id="jmkdzj_664"><p id="jmkdzj_665">2.2.0: <code class="code" id="jmkdzj_666">publishAllLibraryVariants()</code> is deprecated</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-android-target" data-toc="deprecate-android-target">Deprecate <code class="code" id="jmkdzj_669">android</code> target</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_668"><p id="jmkdzj_670"><span class="control" id="jmkdzj_676">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-71608" id="jmkdzj_677" data-external="true" rel="noopener noreferrer" target="_blank">KT-71608</a></p><p id="jmkdzj_671"><span class="control" id="jmkdzj_678">Component</span>: Gradle</p><p id="jmkdzj_672"><span class="control" id="jmkdzj_679">Incompatible change type</span>: source</p><p id="jmkdzj_673"><span class="control" id="jmkdzj_680">Short summary</span>: The <code class="code" id="jmkdzj_681">android</code> target name is deprecated in the current Kotlin DSL. Use <code class="code" id="jmkdzj_682">androidTarget</code> instead.</p><p id="jmkdzj_674"><span class="control" id="jmkdzj_683">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_675"><li class="list__item" id="jmkdzj_684"><p id="jmkdzj_687">1.9.0: introduce a deprecation warning when the <code class="code" id="jmkdzj_688">android</code> name is used in Kotlin Multiplatform projects</p></li><li class="list__item" id="jmkdzj_685"><p id="jmkdzj_689">2.1.0: raise this warning to an error</p></li><li class="list__item" id="jmkdzj_686"><p id="jmkdzj_690">2.2.0: remove the <code class="code" id="jmkdzj_691">android</code> target DSL from the Kotlin Multiplatform Gradle plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-konanversion-in-cinteropprocess" data-toc="deprecate-konanversion-in-cinteropprocess">Deprecate <code class="code" id="jmkdzj_694">konanVersion</code> in <code class="code" id="jmkdzj_695">CInteropProcess</code></h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_693"><p id="jmkdzj_696"><span class="control" id="jmkdzj_702">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-71069" id="jmkdzj_703" data-external="true" rel="noopener noreferrer" target="_blank">KT-71069</a></p><p id="jmkdzj_697"><span class="control" id="jmkdzj_704">Component</span>: Gradle</p><p id="jmkdzj_698"><span class="control" id="jmkdzj_705">Incompatible change type</span>: source</p><p id="jmkdzj_699"><span class="control" id="jmkdzj_706">Short summary</span>: The <code class="code" id="jmkdzj_707">konanVersion</code> property in the <code class="code" id="jmkdzj_708">CInteropProcess</code> task is deprecated. Use <code class="code" id="jmkdzj_709">CInteropProcess.kotlinNativeVersion</code> instead.</p><p id="jmkdzj_700"><span class="control" id="jmkdzj_710">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_701"><li class="list__item" id="jmkdzj_711"><p id="jmkdzj_714">2.1.0: report a warning when the <code class="code" id="jmkdzj_715">konanVersion</code> property is used</p></li><li class="list__item" id="jmkdzj_712"><p id="jmkdzj_716">2.2.0: raise this warning to an error</p></li><li class="list__item" id="jmkdzj_713"><p id="jmkdzj_717">2.3.0: remove the <code class="code" id="jmkdzj_718">konanVersion</code> property from the Kotlin Gradle plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-destinationdir-in-cinteropprocess" data-toc="deprecate-destinationdir-in-cinteropprocess">Deprecate <code class="code" id="jmkdzj_721">destinationDir</code> in <code class="code" id="jmkdzj_722">CInteropProcess</code></h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_720"><p id="jmkdzj_723"><span class="control" id="jmkdzj_729">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-71068" id="jmkdzj_730" data-external="true" rel="noopener noreferrer" target="_blank">KT-71068</a></p><p id="jmkdzj_724"><span class="control" id="jmkdzj_731">Component</span>: Gradle</p><p id="jmkdzj_725"><span class="control" id="jmkdzj_732">Incompatible change type</span>: source</p><p id="jmkdzj_726"><span class="control" id="jmkdzj_733">Short summary</span>: The <code class="code" id="jmkdzj_734">destinationDir</code> property in the <code class="code" id="jmkdzj_735">CInteropProcess</code> task is deprecated. Use the <code class="code" id="jmkdzj_736">CInteropProcess.destinationDirectory.set()</code> function instead.</p><p id="jmkdzj_727"><span class="control" id="jmkdzj_737">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_728"><li class="list__item" id="jmkdzj_738"><p id="jmkdzj_741">2.1.0: report a warning when the <code class="code" id="jmkdzj_742">destinationDir</code> property is used</p></li><li class="list__item" id="jmkdzj_739"><p id="jmkdzj_743">2.2.0: raise this warning to an error</p></li><li class="list__item" id="jmkdzj_740"><p id="jmkdzj_744">2.3.0: remove the <code class="code" id="jmkdzj_745">destinationDir</code> property from the Kotlin Gradle plugin</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlinartifacts-api" data-toc="deprecate-kotlinartifacts-api">Deprecate <code class="code" id="jmkdzj_748">kotlinArtifacts</code> API</h3><aside class="prompt" data-type="tip" data-title="" id="jmkdzj_747"><p id="jmkdzj_749"><span class="control" id="jmkdzj_755">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-74953" id="jmkdzj_756" data-external="true" rel="noopener noreferrer" target="_blank">KT-74953</a></p><p id="jmkdzj_750"><span class="control" id="jmkdzj_757">Component</span>: Gradle</p><p id="jmkdzj_751"><span class="control" id="jmkdzj_758">Incompatible change type</span>: source</p><p id="jmkdzj_752"><span class="control" id="jmkdzj_759">Short summary</span>: The experimental <code class="code" id="jmkdzj_760">kotlinArtifacts</code> API is deprecated. Use the current DSL available in the Kotlin Gradle plugin to <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-build-native-binaries.html" id="jmkdzj_761" data-external="true" rel="noopener noreferrer" target="_blank">build final native binaries</a>. If it's not sufficient for migration, leave a comment in <a href="https://youtrack.jetbrains.com/issue/KT-74953" id="jmkdzj_762" data-external="true" rel="noopener noreferrer" target="_blank">this YT issue</a>.</p><p id="jmkdzj_753"><span class="control" id="jmkdzj_763">Deprecation cycle</span>:</p><ul class="list _bullet" id="jmkdzj_754"><li class="list__item" id="jmkdzj_764"><p id="jmkdzj_766">2.2.0: report a warning when the <code class="code" id="jmkdzj_767">kotlinArtifacts</code> API is used</p></li><li class="list__item" id="jmkdzj_765"><p id="jmkdzj_768">2.3.0: raise this warning to an error</p></li></ul></aside></section></section><div class="last-modified">15 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="faq.html" class="navigation-links__prev">FAQ</a><a href="compatibility-guide-21.html" class="navigation-links__next">Compatibility guide for Kotlin 2.1</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>