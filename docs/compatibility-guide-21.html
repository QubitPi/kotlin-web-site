<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-18T18:58:29.043915907"><link rel="canonical" href="https://kotlinlang.org/docs/compatibility-guide-21.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Compatibility guide for Kotlin 2.1 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"basic-terms","level":0,"title":"Basic terms","anchor":"#basic-terms"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"remove-language-versions-1-4-and-1-5","level":1,"title":"Remove language versions 1.4 and 1.5","anchor":"#remove-language-versions-1-4-and-1-5"},{"id":"change-the-typeof-function-behavior-on-kotlin-native","level":1,"title":"Change the typeOf() function behavior on Kotlin/Native","anchor":"#change-the-typeof-function-behavior-on-kotlin-native"},{"id":"prohibit-exposing-types-through-type-parameters-bounds","level":1,"title":"Prohibit exposing types through type parameters\u0027 bounds","anchor":"#prohibit-exposing-types-through-type-parameters-bounds"},{"id":"prohibit-inheriting-an-abstract-var-property-and-a-val-property-with-the-same-name","level":1,"title":"Prohibit inheriting an abstract var property and a val property with the same name","anchor":"#prohibit-inheriting-an-abstract-var-property-and-a-val-property-with-the-same-name"},{"id":"report-error-when-accessing-uninitialized-enum-entries","level":1,"title":"Report error when accessing uninitialized enum entries","anchor":"#report-error-when-accessing-uninitialized-enum-entries"},{"id":"changes-in-k2-smart-cast-propagation","level":1,"title":"Changes in K2 smart cast propagation","anchor":"#changes-in-k2-smart-cast-propagation"},{"id":"correct-the-handling-of-member-extension-property-overrides-in-java-subclasses","level":1,"title":"Correct the handling of member-extension property overrides in Java subclasses","anchor":"#correct-the-handling-of-member-extension-property-overrides-in-java-subclasses"},{"id":"correct-visibility-alignment-for-getters-and-setters-of-var-properties-overriding-a-protected-val","level":1,"title":"Correct visibility alignment for getters and setters of var properties overriding a protected val","anchor":"#correct-visibility-alignment-for-getters-and-setters-of-var-properties-overriding-a-protected-val"},{"id":"raise-severity-of-jspecify-nullability-mismatch-diagnostics-to-errors","level":1,"title":"Raise severity of JSpecify nullability mismatch diagnostics to errors","anchor":"#raise-severity-of-jspecify-nullability-mismatch-diagnostics-to-errors"},{"id":"change-overload-resolution-to-prioritize-extension-functions-over-invoke-calls-in-ambiguous-cases","level":1,"title":"Change overload resolution to prioritize extension functions over invoke calls in ambiguous cases","anchor":"#change-overload-resolution-to-prioritize-extension-functions-over-invoke-calls-in-ambiguous-cases"},{"id":"prohibit-returning-nullable-values-from-lambdas-in-sam-constructors-of-jdk-function-interfaces","level":1,"title":"Prohibit returning nullable values from lambdas in SAM constructors of JDK function interfaces","anchor":"#prohibit-returning-nullable-values-from-lambdas-in-sam-constructors-of-jdk-function-interfaces"},{"id":"correct-handling-of-private-members-conflicting-with-public-members-in-kotlin-native","level":1,"title":"Correct handling of private members conflicting with public members in Kotlin/Native","anchor":"#correct-handling-of-private-members-conflicting-with-public-members-in-kotlin-native"},{"id":"forbid-access-to-private-operator-functions-in-public-inline-functions","level":1,"title":"Forbid access to private operator functions in public inline functions","anchor":"#forbid-access-to-private-operator-functions-in-public-inline-functions"},{"id":"prohibit-passing-invalid-arguments-to-invariant-parameters-annotated-with-unsafevariance","level":1,"title":"Prohibit passing invalid arguments to invariant parameters annotated with @UnsafeVariance","anchor":"#prohibit-passing-invalid-arguments-to-invariant-parameters-annotated-with-unsafevariance"},{"id":"report-nullability-errors-for-error-level-nullable-arguments-of-warning-level-java-types","level":1,"title":"Report nullability errors for error-level nullable arguments of warning-level Java types","anchor":"#report-nullability-errors-for-error-level-nullable-arguments-of-warning-level-java-types"},{"id":"report-implicit-usages-of-inaccessible-types","level":1,"title":"Report implicit usages of inaccessible types","anchor":"#report-implicit-usages-of-inaccessible-types"},{"id":"standard-library","level":0,"title":"Standard library","anchor":"#standard-library"},{"id":"deprecate-locale-sensitive-case-conversion-functions-for-char-and-string","level":1,"title":"Deprecate locale-sensitive case conversion functions for Char and String","anchor":"#deprecate-locale-sensitive-case-conversion-functions-for-char-and-string"},{"id":"remove-kotlin-stdlib-common-jar-artifact","level":1,"title":"Remove kotlin-stdlib-common JAR artifact","anchor":"#remove-kotlin-stdlib-common-jar-artifact"},{"id":"deprecate-appendln-in-favor-of-appendline","level":1,"title":"Deprecate appendln() in favor of appendLine()","anchor":"#deprecate-appendln-in-favor-of-appendline"},{"id":"deprecate-freezing-related-apis-in-kotlin-native","level":1,"title":"Deprecate freezing-related APIs in Kotlin/Native","anchor":"#deprecate-freezing-related-apis-in-kotlin-native"},{"id":"change-map-entry-behavior-to-fail-fast-on-structural-modification","level":1,"title":"Change Map.Entry behavior to fail-fast on structural modification","anchor":"#change-map-entry-behavior-to-fail-fast-on-structural-modification"},{"id":"tools","level":0,"title":"Tools","anchor":"#tools"},{"id":"deprecate-kotlincompilationoutput-resourcesdirprovider","level":1,"title":"Deprecate KotlinCompilationOutput#resourcesDirProvider","anchor":"#deprecate-kotlincompilationoutput-resourcesdirprovider"},{"id":"deprecate-registerkotlinjvmcompiletask-taskname-modulename-function","level":1,"title":"Deprecate registerKotlinJvmCompileTask(taskName, moduleName) function","anchor":"#deprecate-registerkotlinjvmcompiletask-taskname-modulename-function"},{"id":"deprecate-registerkaptgeneratestubstask-taskname-function","level":1,"title":"Deprecate registerKaptGenerateStubsTask(taskName) function","anchor":"#deprecate-registerkaptgeneratestubstask-taskname-function"},{"id":"deprecate-kotlintoplevelextension-and-kotlintoplevelextensionconfig-interfaces","level":1,"title":"Deprecate KotlinTopLevelExtension and KotlinTopLevelExtensionConfig interfaces","anchor":"#deprecate-kotlintoplevelextension-and-kotlintoplevelextensionconfig-interfaces"},{"id":"remove-kotlin-compiler-embeddable-from-build-runtime-dependencies","level":1,"title":"Remove kotlin-compiler-embeddable from build runtime dependencies","anchor":"#remove-kotlin-compiler-embeddable-from-build-runtime-dependencies"},{"id":"hide-compiler-symbols-from-the-kotlin-gradle-plugin-api","level":1,"title":"Hide compiler symbols from the Kotlin Gradle Plugin API","anchor":"#hide-compiler-symbols-from-the-kotlin-gradle-plugin-api"},{"id":"add-support-for-multiple-stability-configuration-files","level":1,"title":"Add support for multiple stability configuration files","anchor":"#add-support-for-multiple-stability-configuration-files"},{"id":"remove-deprecated-platform-plugin-ids","level":1,"title":"Remove deprecated platform plugin IDs","anchor":"#remove-deprecated-platform-plugin-ids"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Compatibility guide for Kotlin 2.1 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/compatibility-guide-21.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Compatibility guide for Kotlin 2.1 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/compatibility-guide-21.html#webpage",
    "url": "https://kotlinlang.org/docs/compatibility-guide-21.html",
    "name": "Compatibility guide for Kotlin 2.1 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="compatibility-guide-21" data-main-title="Compatibility guide for Kotlin 2.1" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Other resources///Kotlin compatibility guides" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/compatibility-guides/compatibility-guide-21.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compatibility-guide-21" id="compatibility-guide-21.md">Compatibility guide for Kotlin 2.1</h1><p id="z2rvw6m_2"><span class="emphasis" id="z2rvw6m_8"><a href="kotlin-evolution-principles.html" id="z2rvw6m_10">Keeping the Language Modern</a></span> and <span class="emphasis" id="z2rvw6m_9"><a href="kotlin-evolution-principles.html" id="z2rvw6m_11">Comfortable Updates</a></span> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p><p id="z2rvw6m_3">While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 2.0 to Kotlin 2.1.</p><section class="chapter"><h2 id="basic-terms" data-toc="basic-terms">Basic terms</h2><p id="z2rvw6m_12">In this document we introduce several kinds of compatibility:</p><ul class="list _bullet" id="z2rvw6m_13"><li class="list__item" id="z2rvw6m_15"><p id="z2rvw6m_18"><span class="emphasis" id="z2rvw6m_19">source</span>: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</p></li><li class="list__item" id="z2rvw6m_16"><p id="z2rvw6m_20"><span class="emphasis" id="z2rvw6m_21">binary</span>: two binary artifacts are said to be binary-compatible if interchanging them doesn't lead to loading or linkage errors</p></li><li class="list__item" id="z2rvw6m_17"><p id="z2rvw6m_22"><span class="emphasis" id="z2rvw6m_23">behavioral</span>: a change is said to be behavioral-incompatible if the same program demonstrates different behavior before and after applying the change</p></li></ul><p id="z2rvw6m_14">Remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (for example, from Java) is out of the scope of this document.</p></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><section class="chapter"><h3 id="remove-language-versions-1-4-and-1-5" data-toc="remove-language-versions-1-4-and-1-5">Remove language versions 1.4 and 1.5</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_40"><p id="z2rvw6m_41"><span class="control" id="z2rvw6m_47">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-60521" id="z2rvw6m_48" data-external="true" rel="noopener noreferrer" target="_blank">KT-60521</a></p><p id="z2rvw6m_42"><span class="control" id="z2rvw6m_49">Component</span>: Core language</p><p id="z2rvw6m_43"><span class="control" id="z2rvw6m_50">Incompatible change type</span>: source</p><p id="z2rvw6m_44"><span class="control" id="z2rvw6m_51">Short summary</span>: Kotlin 2.1 introduces language version 2.1 and removes support for language versions 1.4 and 1.5. Language versions 1.6 and 1.7 are deprecated.</p><p id="z2rvw6m_45"><span class="control" id="z2rvw6m_52">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_46"><li class="list__item" id="z2rvw6m_53"><p id="z2rvw6m_56">1.6.0: report a warning for language version 1.4</p></li><li class="list__item" id="z2rvw6m_54"><p id="z2rvw6m_57">1.9.0: report a warning for language version 1.5</p></li><li class="list__item" id="z2rvw6m_55"><p id="z2rvw6m_58">2.1.0: report a warning for language versions 1.6 and 1.7; raise the warning to an error for language versions 1.4 and 1.5</p></li></ul></aside></section><section class="chapter"><h3 id="change-the-typeof-function-behavior-on-kotlin-native" data-toc="change-the-typeof-function-behavior-on-kotlin-native">Change the typeOf() function behavior on Kotlin/Native</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_59"><p id="z2rvw6m_60"><span class="control" id="z2rvw6m_66">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-70754" id="z2rvw6m_67" data-external="true" rel="noopener noreferrer" target="_blank">KT-70754</a></p><p id="z2rvw6m_61"><span class="control" id="z2rvw6m_68">Component</span>: Core language</p><p id="z2rvw6m_62"><span class="control" id="z2rvw6m_69">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_63"><span class="control" id="z2rvw6m_70">Short summary</span>: The behavior of the <code class="code" id="z2rvw6m_71">typeOf()</code> function on Kotlin/Native is aligned with Kotlin/JVM to ensure consistency across platforms.</p><p id="z2rvw6m_64"><span class="control" id="z2rvw6m_72">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_65"><li class="list__item" id="z2rvw6m_73"><p id="z2rvw6m_74">2.1.0: align the <code class="code" id="z2rvw6m_75">typeOf()</code> function behavior on Kotlin/Native</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-exposing-types-through-type-parameters-bounds" data-toc="prohibit-exposing-types-through-type-parameters-bounds">Prohibit exposing types through type parameters' bounds</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_76"><p id="z2rvw6m_77"><span class="control" id="z2rvw6m_83">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-69653" id="z2rvw6m_84" data-external="true" rel="noopener noreferrer" target="_blank">KT-69653</a></p><p id="z2rvw6m_78"><span class="control" id="z2rvw6m_85">Component</span>: Core language</p><p id="z2rvw6m_79"><span class="control" id="z2rvw6m_86">Incompatible change type</span>: source</p><p id="z2rvw6m_80"><span class="control" id="z2rvw6m_87">Short summary</span>: Exposing types with lower visibility through type parameter bounds is now prohibited, addressing inconsistencies in type visibility rules. This change ensures that bounds on type parameters follow the same visibility rules as classes, preventing issues like IR validation errors in the JVM.</p><p id="z2rvw6m_81"><span class="control" id="z2rvw6m_88">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_82"><li class="list__item" id="z2rvw6m_89"><p id="z2rvw6m_91">2.1.0: report a warning for exposing types via type parameter bounds with lower visibility</p></li><li class="list__item" id="z2rvw6m_90"><p id="z2rvw6m_92">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-inheriting-an-abstract-var-property-and-a-val-property-with-the-same-name" data-toc="prohibit-inheriting-an-abstract-var-property-and-a-val-property-with-the-same-name">Prohibit inheriting an abstract var property and a val property with the same name</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_93"><p id="z2rvw6m_94"><span class="control" id="z2rvw6m_100">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-58659" id="z2rvw6m_101" data-external="true" rel="noopener noreferrer" target="_blank">KT-58659</a></p><p id="z2rvw6m_95"><span class="control" id="z2rvw6m_102">Component</span>: Core language</p><p id="z2rvw6m_96"><span class="control" id="z2rvw6m_103">Incompatible change type</span>: source</p><p id="z2rvw6m_97"><span class="control" id="z2rvw6m_104">Short summary</span>: If a class inherits an abstract <code class="code" id="z2rvw6m_105">var</code> property from an interface and a <code class="code" id="z2rvw6m_106">val</code> property with the same name from a superclass, it now triggers a compilation error. This resolves runtime crashes caused by missing setters in such cases.</p><p id="z2rvw6m_98"><span class="control" id="z2rvw6m_107">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_99"><li class="list__item" id="z2rvw6m_108"><p id="z2rvw6m_110">2.1.0: report a warning (or an error in progressive mode) when a class inherits an abstract <code class="code" id="z2rvw6m_111">var</code> property from an interface and a <code class="code" id="z2rvw6m_112">val</code> property with the same name from a superclass</p></li><li class="list__item" id="z2rvw6m_109"><p id="z2rvw6m_113">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="report-error-when-accessing-uninitialized-enum-entries" data-toc="report-error-when-accessing-uninitialized-enum-entries">Report error when accessing uninitialized enum entries</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_114"><p id="z2rvw6m_115"><span class="control" id="z2rvw6m_121">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-68451" id="z2rvw6m_122" data-external="true" rel="noopener noreferrer" target="_blank">KT-68451</a></p><p id="z2rvw6m_116"><span class="control" id="z2rvw6m_123">Component</span>: Core language</p><p id="z2rvw6m_117"><span class="control" id="z2rvw6m_124">Incompatible change type</span>: source</p><p id="z2rvw6m_118"><span class="control" id="z2rvw6m_125">Short summary</span>: The compiler now reports an error when uninitialized enum entries are accessed during enum class or entry initialization. This aligns the behavior with member property initialization rules, preventing runtime exceptions and ensuring consistent logic.</p><p id="z2rvw6m_119"><span class="control" id="z2rvw6m_126">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_120"><li class="list__item" id="z2rvw6m_127"><p id="z2rvw6m_128">2.1.0: report an error when accessing uninitialized enum entries</p></li></ul></aside></section><section class="chapter"><h3 id="changes-in-k2-smart-cast-propagation" data-toc="changes-in-k2-smart-cast-propagation">Changes in K2 smart cast propagation</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_129"><p id="z2rvw6m_130"><span class="control" id="z2rvw6m_136">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-34" id="z2rvw6m_137" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-34</a></p><p id="z2rvw6m_131"><span class="control" id="z2rvw6m_138">Component</span>: Core language</p><p id="z2rvw6m_132"><span class="control" id="z2rvw6m_139">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_133"><span class="control" id="z2rvw6m_140">Short summary</span>: The K2 compiler changes its behavior for smart cast propagation by introducing bidirectional propagation of type information for inferred variables, like <code class="code" id="z2rvw6m_141">val x = y</code>. Explicitly typed variables, such as <code class="code" id="z2rvw6m_142">val x: T = y</code>, no longer propagate type information, ensuring stricter adherence to declared types.</p><p id="z2rvw6m_134"><span class="control" id="z2rvw6m_143">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_135"><li class="list__item" id="z2rvw6m_144"><p id="z2rvw6m_145">2.1.0: enable the new behavior</p></li></ul></aside></section><section class="chapter"><h3 id="correct-the-handling-of-member-extension-property-overrides-in-java-subclasses" data-toc="correct-the-handling-of-member-extension-property-overrides-in-java-subclasses">Correct the handling of member-extension property overrides in Java subclasses</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_146"><p id="z2rvw6m_147"><span class="control" id="z2rvw6m_153">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-35" id="z2rvw6m_154" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-35</a></p><p id="z2rvw6m_148"><span class="control" id="z2rvw6m_155">Component</span>: Core language</p><p id="z2rvw6m_149"><span class="control" id="z2rvw6m_156">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_150"><span class="control" id="z2rvw6m_157">Short summary</span>: The getter for member-extension properties overridden by Java subclasses is now hidden in the subclass's scope, aligning its behavior with that of regular Kotlin properties.</p><p id="z2rvw6m_151"><span class="control" id="z2rvw6m_158">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_152"><li class="list__item" id="z2rvw6m_159"><p id="z2rvw6m_160">2.1.0: enable the new behavior</p></li></ul></aside></section><section class="chapter"><h3 id="correct-visibility-alignment-for-getters-and-setters-of-var-properties-overriding-a-protected-val" data-toc="correct-visibility-alignment-for-getters-and-setters-of-var-properties-overriding-a-protected-val">Correct visibility alignment for getters and setters of var properties overriding a protected val</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_161"><p id="z2rvw6m_162"><span class="control" id="z2rvw6m_168">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-36" id="z2rvw6m_169" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-36</a></p><p id="z2rvw6m_163"><span class="control" id="z2rvw6m_170">Component</span>: Core language</p><p id="z2rvw6m_164"><span class="control" id="z2rvw6m_171">Incompatible change type</span>: binary</p><p id="z2rvw6m_165"><span class="control" id="z2rvw6m_172">Short summary</span>: The visibility of getters and setters for <code class="code" id="z2rvw6m_173">var</code> properties overriding a <code class="code" id="z2rvw6m_174">protected val</code> property is now consistent, with both inheriting the visibility of the overridden <code class="code" id="z2rvw6m_175">val</code> property.</p><p id="z2rvw6m_166"><span class="control" id="z2rvw6m_176">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_167"><li class="list__item" id="z2rvw6m_177"><p id="z2rvw6m_178">2.1.0: enforce consistent visibility for both getters and setters in K2; K1 remains unaffected</p></li></ul></aside></section><section class="chapter"><h3 id="raise-severity-of-jspecify-nullability-mismatch-diagnostics-to-errors" data-toc="raise-severity-of-jspecify-nullability-mismatch-diagnostics-to-errors">Raise severity of JSpecify nullability mismatch diagnostics to errors</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_179"><p id="z2rvw6m_180"><span class="control" id="z2rvw6m_186">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-11" id="z2rvw6m_187" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-11</a></p><p id="z2rvw6m_181"><span class="control" id="z2rvw6m_188">Component</span>: Core language</p><p id="z2rvw6m_182"><span class="control" id="z2rvw6m_189">Incompatible change type</span>: source</p><p id="z2rvw6m_183"><span class="control" id="z2rvw6m_190">Short summary</span>: Nullability mismatches from <code class="code" id="z2rvw6m_191">org.jspecify.annotations</code>, such as <code class="code" id="z2rvw6m_192">@NonNull</code>, <code class="code" id="z2rvw6m_193">@Nullable</code>, and <code class="code" id="z2rvw6m_194">@NullMarked</code> are now treated as errors instead of warnings, enforcing stricter type safety for Java interoperability. To adjust the severity of these diagnostics, use the <code class="code" id="z2rvw6m_195">-Xnullability-annotations</code> compiler option.</p><p id="z2rvw6m_184"><span class="control" id="z2rvw6m_196">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_185"><li class="list__item" id="z2rvw6m_197"><p id="z2rvw6m_201">1.6.0: report warnings for potential nullability mismatches</p></li><li class="list__item" id="z2rvw6m_198"><p id="z2rvw6m_202">1.8.20: expand warnings to specific JSpecify annotations, including: <code class="code" id="z2rvw6m_203">@Nullable</code>, <code class="code" id="z2rvw6m_204">@NullnessUnspecified</code>, <code class="code" id="z2rvw6m_205">@NullMarked</code>, and legacy annotations in <code class="code" id="z2rvw6m_206">org.jspecify.nullness</code> (JSpecify 0.2 and earlier)</p></li><li class="list__item" id="z2rvw6m_199"><p id="z2rvw6m_207">2.0.0: add support for the <code class="code" id="z2rvw6m_208">@NonNull</code> annotation</p></li><li class="list__item" id="z2rvw6m_200"><p id="z2rvw6m_209">2.1.0: change default mode to <code class="code" id="z2rvw6m_210">strict</code> for JSpecify annotations, converting warnings into errors; use <code class="code" id="z2rvw6m_211">-Xnullability-annotations=@org.jspecify.annotations:warning</code> or <code class="code" id="z2rvw6m_212">-Xnullability-annotations=@org.jspecify.annotations:ignore</code> to override the default behavior</p></li></ul></aside></section><section class="chapter"><h3 id="change-overload-resolution-to-prioritize-extension-functions-over-invoke-calls-in-ambiguous-cases" data-toc="change-overload-resolution-to-prioritize-extension-functions-over-invoke-calls-in-ambiguous-cases">Change overload resolution to prioritize extension functions over invoke calls in ambiguous cases</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_213"><p id="z2rvw6m_214"><span class="control" id="z2rvw6m_220">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-37" id="z2rvw6m_221" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-37</a></p><p id="z2rvw6m_215"><span class="control" id="z2rvw6m_222">Component</span>: Core language</p><p id="z2rvw6m_216"><span class="control" id="z2rvw6m_223">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_217"><span class="control" id="z2rvw6m_224">Short summary</span>: Overload resolution now consistently prioritizes extension functions over invoke calls in ambiguous cases. This resolves inconsistencies in the resolution logic for local functions and properties. The change applies only after recompilation, without affecting precompiled binaries.</p><p id="z2rvw6m_218"><span class="control" id="z2rvw6m_225">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_219"><li class="list__item" id="z2rvw6m_226"><p id="z2rvw6m_227">2.1.0: change overload resolution to consistently prioritize extension functions over <code class="code" id="z2rvw6m_228">invoke</code> calls for extension functions with matching signatures; this change applies only after recompilation and does not affect precompiled binaries</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-returning-nullable-values-from-lambdas-in-sam-constructors-of-jdk-function-interfaces" data-toc="prohibit-returning-nullable-values-from-lambdas-in-sam-constructors-of-jdk-function-interfaces">Prohibit returning nullable values from lambdas in SAM constructors of JDK function interfaces</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_229"><p id="z2rvw6m_230"><span class="control" id="z2rvw6m_236">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-42" id="z2rvw6m_237" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-42</a></p><p id="z2rvw6m_231"><span class="control" id="z2rvw6m_238">Component</span>: Core language</p><p id="z2rvw6m_232"><span class="control" id="z2rvw6m_239">Incompatible change type</span>: source</p><p id="z2rvw6m_233"><span class="control" id="z2rvw6m_240">Short summary</span>: Returning nullable values from lambdas in SAM constructors of JDK function interfaces now triggers a compilation error if the specified type argument is non-nullable. This resolves issues where nullability mismatches could lead to runtime exceptions, ensuring stricter type safety.</p><p id="z2rvw6m_234"><span class="control" id="z2rvw6m_241">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_235"><li class="list__item" id="z2rvw6m_242"><p id="z2rvw6m_244">2.0.0: report a deprecation warning for nullable return values in SAM constructors of JDK function interfaces</p></li><li class="list__item" id="z2rvw6m_243"><p id="z2rvw6m_245">2.1.0: enable the new behavior by default</p></li></ul></aside></section><section class="chapter"><h3 id="correct-handling-of-private-members-conflicting-with-public-members-in-kotlin-native" data-toc="correct-handling-of-private-members-conflicting-with-public-members-in-kotlin-native">Correct handling of private members conflicting with public members in Kotlin/Native</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_246"><p id="z2rvw6m_247"><span class="control" id="z2rvw6m_253">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-43" id="z2rvw6m_254" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-43</a></p><p id="z2rvw6m_248"><span class="control" id="z2rvw6m_255">Component</span>: Core language</p><p id="z2rvw6m_249"><span class="control" id="z2rvw6m_256">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_250"><span class="control" id="z2rvw6m_257">Short summary</span>: In Kotlin/Native, private members no longer override or conflict with public members in a superclass, aligning behavior with Kotlin/JVM. This resolves inconsistencies in override resolution and eliminates unexpected behavior caused by separate compilation.</p><p id="z2rvw6m_251"><span class="control" id="z2rvw6m_258">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_252"><li class="list__item" id="z2rvw6m_259"><p id="z2rvw6m_260">2.1.0: private functions and properties in Kotlin/Native no longer override or affect public members in a superclass, aligning with JVM behavior</p></li></ul></aside></section><section class="chapter"><h3 id="forbid-access-to-private-operator-functions-in-public-inline-functions" data-toc="forbid-access-to-private-operator-functions-in-public-inline-functions">Forbid access to private operator functions in public inline functions</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_261"><p id="z2rvw6m_262"><span class="control" id="z2rvw6m_268">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-71" id="z2rvw6m_269" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-71</a></p><p id="z2rvw6m_263"><span class="control" id="z2rvw6m_270">Component</span>: Core language</p><p id="z2rvw6m_264"><span class="control" id="z2rvw6m_271">Incompatible change type</span>: source</p><p id="z2rvw6m_265"><span class="control" id="z2rvw6m_272">Short summary</span>: Private operator functions such as <code class="code" id="z2rvw6m_273">getValue()</code>, <code class="code" id="z2rvw6m_274">setValue()</code>, <code class="code" id="z2rvw6m_275">provideDelegate()</code>, <code class="code" id="z2rvw6m_276">hasNext()</code>, and <code class="code" id="z2rvw6m_277">next()</code> can no longer be accessed in public inline functions.</p><p id="z2rvw6m_266"><span class="control" id="z2rvw6m_278">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_267"><li class="list__item" id="z2rvw6m_279"><p id="z2rvw6m_281">2.0.0: report a deprecation warning for accessing private operator functions in public inline functions</p></li><li class="list__item" id="z2rvw6m_280"><p id="z2rvw6m_282">2.1.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-passing-invalid-arguments-to-invariant-parameters-annotated-with-unsafevariance" data-toc="prohibit-passing-invalid-arguments-to-invariant-parameters-annotated-with-unsafevariance">Prohibit passing invalid arguments to invariant parameters annotated with @UnsafeVariance</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_283"><p id="z2rvw6m_284"><span class="control" id="z2rvw6m_290">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-72" id="z2rvw6m_291" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-72</a></p><p id="z2rvw6m_285"><span class="control" id="z2rvw6m_292">Component</span>: Core language</p><p id="z2rvw6m_286"><span class="control" id="z2rvw6m_293">Incompatible change type</span>: source</p><p id="z2rvw6m_287"><span class="control" id="z2rvw6m_294">Short summary</span>: The compiler now ignores <code class="code" id="z2rvw6m_295">@UnsafeVariance</code> annotations during type checks, enforcing stricter type safety for invariant type parameters. This prevents invalid calls that rely on <code class="code" id="z2rvw6m_296">@UnsafeVariance</code> to bypass expected type checks.</p><p id="z2rvw6m_288"><span class="control" id="z2rvw6m_297">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_289"><li class="list__item" id="z2rvw6m_298"><p id="z2rvw6m_299">2.1.0: activate the new behavior</p></li></ul></aside></section><section class="chapter"><h3 id="report-nullability-errors-for-error-level-nullable-arguments-of-warning-level-java-types" data-toc="report-nullability-errors-for-error-level-nullable-arguments-of-warning-level-java-types">Report nullability errors for error-level nullable arguments of warning-level Java types</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_300"><p id="z2rvw6m_301"><span class="control" id="z2rvw6m_307">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-100" id="z2rvw6m_308" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-100</a></p><p id="z2rvw6m_302"><span class="control" id="z2rvw6m_309">Component</span>: Core language</p><p id="z2rvw6m_303"><span class="control" id="z2rvw6m_310">Incompatible change type</span>: source</p><p id="z2rvw6m_304"><span class="control" id="z2rvw6m_311">Short summary</span>: The compiler now detects nullability mismatches in Java methods where a warning-level nullable type contains type arguments with stricter, error-level nullability. This ensures that previously ignored errors in type arguments are reported correctly.</p><p id="z2rvw6m_305"><span class="control" id="z2rvw6m_312">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_306"><li class="list__item" id="z2rvw6m_313"><p id="z2rvw6m_315">2.0.0: report a deprecation warning for nullability mismatches in Java methods with stricter type arguments</p></li><li class="list__item" id="z2rvw6m_314"><p id="z2rvw6m_316">2.1.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="report-implicit-usages-of-inaccessible-types" data-toc="report-implicit-usages-of-inaccessible-types">Report implicit usages of inaccessible types</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_317"><p id="z2rvw6m_318"><span class="control" id="z2rvw6m_324">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-3" id="z2rvw6m_325" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-3</a></p><p id="z2rvw6m_319"><span class="control" id="z2rvw6m_326">Component</span>: Core language</p><p id="z2rvw6m_320"><span class="control" id="z2rvw6m_327">Incompatible change type</span>: source</p><p id="z2rvw6m_321"><span class="control" id="z2rvw6m_328">Short summary</span>: The compiler now reports usages of inaccessible types in function literals and type arguments, preventing compilation and runtime failures caused by incomplete type information.</p><p id="z2rvw6m_322"><span class="control" id="z2rvw6m_329">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_323"><li class="list__item" id="z2rvw6m_330"><p id="z2rvw6m_333">2.0.0: report warnings for function literals with parameters or receivers of inaccessible non-generic types and for types with inaccessible type argument; report errors for function literals with parameters or receivers of inaccessible generic types and for types with inaccessible generic type arguments in specific scenarios</p></li><li class="list__item" id="z2rvw6m_331"><p id="z2rvw6m_334">2.1.0: raise warnings to errors for function literals with parameters and receivers of inaccessible non-generic types</p></li><li class="list__item" id="z2rvw6m_332"><p id="z2rvw6m_335">2.2.0: raise warnings to errors for types with inaccessible type arguments</p></li></ul></aside></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2><section class="chapter"><h3 id="deprecate-locale-sensitive-case-conversion-functions-for-char-and-string" data-toc="deprecate-locale-sensitive-case-conversion-functions-for-char-and-string">Deprecate locale-sensitive case conversion functions for Char and String</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_341"><p id="z2rvw6m_342"><span class="control" id="z2rvw6m_349">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-43023" id="z2rvw6m_350" data-external="true" rel="noopener noreferrer" target="_blank">KT-43023</a></p><p id="z2rvw6m_343"><span class="control" id="z2rvw6m_351">Component</span>: kotlin-stdlib</p><p id="z2rvw6m_344"><span class="control" id="z2rvw6m_352">Incompatible change type</span>: source</p><p id="z2rvw6m_345"><span class="control" id="z2rvw6m_353">Short summary</span>: Among other Kotlin standard library APIs, locale-sensitive case conversion functions for <code class="code" id="z2rvw6m_354">Char</code> and <code class="code" id="z2rvw6m_355">String</code>, such as <code class="code" id="z2rvw6m_356">Char.toUpperCase()</code> and <code class="code" id="z2rvw6m_357">String.toLowerCase()</code>, are deprecated. Replace them with locale-agnostic alternatives like <code class="code" id="z2rvw6m_358">String.lowercase()</code> or explicitly specify the locale for locale-sensitive behavior, such as <code class="code" id="z2rvw6m_359">String.lowercase(Locale.getDefault())</code>.</p><p id="z2rvw6m_346">For a comprehensive list of deprecated Kotlin standard library APIs in Kotlin 2.1.0, see <a href="https://youtrack.jetbrains.com/issue/KT-71628" id="z2rvw6m_360" data-external="true" rel="noopener noreferrer" target="_blank">KT-71628</a>.</p><p id="z2rvw6m_347"><span class="control" id="z2rvw6m_361">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_348"><li class="list__item" id="z2rvw6m_362"><p id="z2rvw6m_365">1.4.30: introduce locale-agnostic alternatives as experimental API</p></li><li class="list__item" id="z2rvw6m_363"><p id="z2rvw6m_366">1.5.0: deprecate locale-sensitive case conversion functions with a warning</p></li><li class="list__item" id="z2rvw6m_364"><p id="z2rvw6m_367">2.1.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin-stdlib-common-jar-artifact" data-toc="remove-kotlin-stdlib-common-jar-artifact">Remove kotlin-stdlib-common JAR artifact</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_368"><p id="z2rvw6m_369"><span class="control" id="z2rvw6m_375">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-62159" id="z2rvw6m_376" data-external="true" rel="noopener noreferrer" target="_blank">KT-62159</a></p><p id="z2rvw6m_370"><span class="control" id="z2rvw6m_377">Component</span>: kotlin-stdlib</p><p id="z2rvw6m_371"><span class="control" id="z2rvw6m_378">Incompatible change type</span>: binary</p><p id="z2rvw6m_372"><span class="control" id="z2rvw6m_379">Short summary</span>: The <code class="code" id="z2rvw6m_380">kotlin-stdlib-common.jar</code> artifact, previously used for legacy multiplatform declarations metadata, is deprecated and replaced by <code class="code" id="z2rvw6m_381">.klib</code> files as the standard format for common multiplatform declarations metadata. This change does not affect the main <code class="code" id="z2rvw6m_382">kotlin-stdlib.jar</code> or <code class="code" id="z2rvw6m_383">kotlin-stdlib-all.jar</code> artifacts.</p><p id="z2rvw6m_373"><span class="control" id="z2rvw6m_384">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_374"><li class="list__item" id="z2rvw6m_385"><p id="z2rvw6m_386">2.1.0: deprecate and remove <code class="code" id="z2rvw6m_387">kotlin-stdlib-common.jar</code> artifact</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-appendln-in-favor-of-appendline" data-toc="deprecate-appendln-in-favor-of-appendline">Deprecate appendln() in favor of appendLine()</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_388"><p id="z2rvw6m_389"><span class="control" id="z2rvw6m_395">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-27" id="z2rvw6m_396" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-27</a></p><p id="z2rvw6m_390"><span class="control" id="z2rvw6m_397">Component</span>: kotlin-stdlib</p><p id="z2rvw6m_391"><span class="control" id="z2rvw6m_398">Incompatible change type</span>: source</p><p id="z2rvw6m_392"><span class="control" id="z2rvw6m_399">Short summary</span>: <code class="code" id="z2rvw6m_400">StringBuilder.appendln()</code> is deprecated in favor of <code class="code" id="z2rvw6m_401">StringBuilder.appendLine()</code>.</p><p id="z2rvw6m_393"><span class="control" id="z2rvw6m_402">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_394"><li class="list__item" id="z2rvw6m_403"><p id="z2rvw6m_405">1.4.0: the <code class="code" id="z2rvw6m_406">appendln()</code> function is deprecated; report a warning on use</p></li><li class="list__item" id="z2rvw6m_404"><p id="z2rvw6m_407">2.1.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-freezing-related-apis-in-kotlin-native" data-toc="deprecate-freezing-related-apis-in-kotlin-native">Deprecate freezing-related APIs in Kotlin/Native</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_408"><p id="z2rvw6m_409"><span class="control" id="z2rvw6m_415">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-69545" id="z2rvw6m_416" data-external="true" rel="noopener noreferrer" target="_blank">KT-69545</a></p><p id="z2rvw6m_410"><span class="control" id="z2rvw6m_417">Component</span>: kotlin-stdlib</p><p id="z2rvw6m_411"><span class="control" id="z2rvw6m_418">Incompatible change type</span>: source</p><p id="z2rvw6m_412"><span class="control" id="z2rvw6m_419">Short summary</span>: Freezing-related APIs in Kotlin/Native, previously marked with the <code class="code" id="z2rvw6m_420">@FreezingIsDeprecated</code> annotation, are now deprecated. This aligns with the introduction of the new memory manager that removes the need for freezing objects for thread sharing. For migration details, see the <a href="native-migration-guide.html#update-your-code" id="z2rvw6m_421">Kotlin/Native migration guide</a>.</p><p id="z2rvw6m_413"><span class="control" id="z2rvw6m_422">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_414"><li class="list__item" id="z2rvw6m_423"><p id="z2rvw6m_425">1.7.20: deprecate freezing-related APIs with a warning</p></li><li class="list__item" id="z2rvw6m_424"><p id="z2rvw6m_426">2.1.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="change-map-entry-behavior-to-fail-fast-on-structural-modification" data-toc="change-map-entry-behavior-to-fail-fast-on-structural-modification">Change Map.Entry behavior to fail-fast on structural modification</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_427"><p id="z2rvw6m_428"><span class="control" id="z2rvw6m_434">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KTLC-23" id="z2rvw6m_435" data-external="true" rel="noopener noreferrer" target="_blank">KTLC-23</a></p><p id="z2rvw6m_429"><span class="control" id="z2rvw6m_436">Component</span>: kotlin-stdlib</p><p id="z2rvw6m_430"><span class="control" id="z2rvw6m_437">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_431"><span class="control" id="z2rvw6m_438">Short summary</span>: Accessing a <code class="code" id="z2rvw6m_439">Map.Entry</code> key-value pair after its associated map has been structurally modified now throws a <code class="code" id="z2rvw6m_440">ConcurrentModificationException</code>.</p><p id="z2rvw6m_432"><span class="control" id="z2rvw6m_441">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_433"><li class="list__item" id="z2rvw6m_442"><p id="z2rvw6m_443">2.1.0: throw an exception when a map structural modification is detected</p></li></ul></aside></section></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2><section class="chapter"><h3 id="deprecate-kotlincompilationoutput-resourcesdirprovider" data-toc="deprecate-kotlincompilationoutput-resourcesdirprovider">Deprecate KotlinCompilationOutput#resourcesDirProvider</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_452"><p id="z2rvw6m_453"><span class="control" id="z2rvw6m_459">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-69255" id="z2rvw6m_460" data-external="true" rel="noopener noreferrer" target="_blank">KT-69255</a></p><p id="z2rvw6m_454"><span class="control" id="z2rvw6m_461">Component</span>: Gradle</p><p id="z2rvw6m_455"><span class="control" id="z2rvw6m_462">Incompatible change type</span>: source</p><p id="z2rvw6m_456"><span class="control" id="z2rvw6m_463">Short summary</span>: The <code class="code" id="z2rvw6m_464">KotlinCompilationOutput#resourcesDirProvider</code> field is deprecated. Use <code class="code" id="z2rvw6m_465">KotlinSourceSet.resources</code> in your Gradle build script instead to add additional resource directories.</p><p id="z2rvw6m_457"><span class="control" id="z2rvw6m_466">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_458"><li class="list__item" id="z2rvw6m_467"><p id="z2rvw6m_468">2.1.0: <code class="code" id="z2rvw6m_469">KotlinCompilationOutput#resourcesDirProvider</code> is deprecated</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-registerkotlinjvmcompiletask-taskname-modulename-function" data-toc="deprecate-registerkotlinjvmcompiletask-taskname-modulename-function">Deprecate registerKotlinJvmCompileTask(taskName, moduleName) function</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_470"><p id="z2rvw6m_471"><span class="control" id="z2rvw6m_477">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-69927" id="z2rvw6m_478" data-external="true" rel="noopener noreferrer" target="_blank">KT-69927</a></p><p id="z2rvw6m_472"><span class="control" id="z2rvw6m_479">Component</span>: Gradle</p><p id="z2rvw6m_473"><span class="control" id="z2rvw6m_480">Incompatible change type</span>: source</p><p id="z2rvw6m_474"><span class="control" id="z2rvw6m_481">Short summary</span>: The <code class="code" id="z2rvw6m_482">registerKotlinJvmCompileTask(taskName, moduleName)</code> function is deprecated in favor of the new <code class="code" id="z2rvw6m_483">registerKotlinJvmCompileTask(taskName, compilerOptions, explicitApiMode)</code> function, which now accepts <code class="code" id="z2rvw6m_484">KotlinJvmCompilerOptions</code>. This allows you to pass a <code class="code" id="z2rvw6m_485">compilerOptions</code> instance, typically from an extension or target, with values used as conventions for the task's options.</p><p id="z2rvw6m_475"><span class="control" id="z2rvw6m_486">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_476"><li class="list__item" id="z2rvw6m_487"><p id="z2rvw6m_488">2.1.0: the <code class="code" id="z2rvw6m_489">registerKotlinJvmCompileTask(taskName, moduleName)</code> function is deprecated</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-registerkaptgeneratestubstask-taskname-function" data-toc="deprecate-registerkaptgeneratestubstask-taskname-function">Deprecate registerKaptGenerateStubsTask(taskName) function</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_490"><p id="z2rvw6m_491"><span class="control" id="z2rvw6m_497">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-70383" id="z2rvw6m_498" data-external="true" rel="noopener noreferrer" target="_blank">KT-70383</a></p><p id="z2rvw6m_492"><span class="control" id="z2rvw6m_499">Component</span>: Gradle</p><p id="z2rvw6m_493"><span class="control" id="z2rvw6m_500">Incompatible change type</span>: source</p><p id="z2rvw6m_494"><span class="control" id="z2rvw6m_501">Short summary</span>: The <code class="code" id="z2rvw6m_502">registerKaptGenerateStubsTask(taskName)</code> function is deprecated. Use the new <code class="code" id="z2rvw6m_503">registerKaptGenerateStubsTask(compileTask, kaptExtension, explicitApiMode)</code> function instead. This new version allows you to link values as conventions from the relevant <code class="code" id="z2rvw6m_504">KotlinJvmCompile</code> task, ensuring both tasks are using the same set of options.</p><p id="z2rvw6m_495"><span class="control" id="z2rvw6m_505">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_496"><li class="list__item" id="z2rvw6m_506"><p id="z2rvw6m_507">2.1.0: the <code class="code" id="z2rvw6m_508">registerKaptGenerateStubsTask(taskName)</code> function is deprecated</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlintoplevelextension-and-kotlintoplevelextensionconfig-interfaces" data-toc="deprecate-kotlintoplevelextension-and-kotlintoplevelextensionconfig-interfaces">Deprecate KotlinTopLevelExtension and KotlinTopLevelExtensionConfig interfaces</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_509"><p id="z2rvw6m_510"><span class="control" id="z2rvw6m_516">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-71602" id="z2rvw6m_517" data-external="true" rel="noopener noreferrer" target="_blank">KT-71602</a></p><p id="z2rvw6m_511"><span class="control" id="z2rvw6m_518">Component</span>: Gradle</p><p id="z2rvw6m_512"><span class="control" id="z2rvw6m_519">Incompatible change type</span>: behavioral</p><p id="z2rvw6m_513"><span class="control" id="z2rvw6m_520">Short summary</span>: <code class="code" id="z2rvw6m_521">KotlinTopLevelExtension</code> and <code class="code" id="z2rvw6m_522">KotlinTopLevelExtensionConfig</code> interfaces are deprecated in favor of a new <code class="code" id="z2rvw6m_523">KotlinTopLevelExtension</code> interface. This interface merges <code class="code" id="z2rvw6m_524">KotlinTopLevelExtensionConfig</code>, <code class="code" id="z2rvw6m_525">KotlinTopLevelExtension</code>, and <code class="code" id="z2rvw6m_526">KotlinProjectExtension</code> to streamline API hierarchy, and provide official access to the JVM toolchain and compiler properties.</p><p id="z2rvw6m_514"><span class="control" id="z2rvw6m_527">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_515"><li class="list__item" id="z2rvw6m_528"><p id="z2rvw6m_529">2.1.0: the <code class="code" id="z2rvw6m_530">KotlinTopLevelExtension</code> and <code class="code" id="z2rvw6m_531">KotlinTopLevelExtensionConfig</code> interfaces are deprecated</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin-compiler-embeddable-from-build-runtime-dependencies" data-toc="remove-kotlin-compiler-embeddable-from-build-runtime-dependencies">Remove kotlin-compiler-embeddable from build runtime dependencies</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_532"><p id="z2rvw6m_533"><span class="control" id="z2rvw6m_539">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-61706" id="z2rvw6m_540" data-external="true" rel="noopener noreferrer" target="_blank">KT-61706</a></p><p id="z2rvw6m_534"><span class="control" id="z2rvw6m_541">Component</span>: Gradle</p><p id="z2rvw6m_535"><span class="control" id="z2rvw6m_542">Incompatible change type</span>: source</p><p id="z2rvw6m_536"><span class="control" id="z2rvw6m_543">Short summary</span>: The <code class="code" id="z2rvw6m_544">kotlin-compiler-embeddable</code> dependency is removed from the runtime in Kotlin Gradle Plugin (KGP). Required modules are now included directly in KGP artifacts, with the Kotlin language version limited to 2.0 to support compatibility with Gradle Kotlin runtime in versions below 8.2.</p><p id="z2rvw6m_537"><span class="control" id="z2rvw6m_545">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_538"><li class="list__item" id="z2rvw6m_546"><p id="z2rvw6m_548">2.1.0: report a warning on using <code class="code" id="z2rvw6m_549">kotlin-compiler-embeddable</code></p></li><li class="list__item" id="z2rvw6m_547"><p id="z2rvw6m_550">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="hide-compiler-symbols-from-the-kotlin-gradle-plugin-api" data-toc="hide-compiler-symbols-from-the-kotlin-gradle-plugin-api">Hide compiler symbols from the Kotlin Gradle Plugin API</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_551"><p id="z2rvw6m_552"><span class="control" id="z2rvw6m_558">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-70251" id="z2rvw6m_559" data-external="true" rel="noopener noreferrer" target="_blank">KT-70251</a></p><p id="z2rvw6m_553"><span class="control" id="z2rvw6m_560">Component</span>: Gradle</p><p id="z2rvw6m_554"><span class="control" id="z2rvw6m_561">Incompatible change type</span>: source</p><p id="z2rvw6m_555"><span class="control" id="z2rvw6m_562">Short summary</span>: Compiler module symbols bundled within the Kotlin Gradle Plugin (KGP), such as <code class="code" id="z2rvw6m_563">KotlinCompilerVersion</code>, are hidden from the public API to prevent unintended access in build scripts.</p><p id="z2rvw6m_556"><span class="control" id="z2rvw6m_564">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_557"><li class="list__item" id="z2rvw6m_565"><p id="z2rvw6m_567">2.1.0: report a warning on accessing these symbols</p></li><li class="list__item" id="z2rvw6m_566"><p id="z2rvw6m_568">2.2.0: raise the warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="add-support-for-multiple-stability-configuration-files" data-toc="add-support-for-multiple-stability-configuration-files">Add support for multiple stability configuration files</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_569"><p id="z2rvw6m_570"><span class="control" id="z2rvw6m_576">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-68345" id="z2rvw6m_577" data-external="true" rel="noopener noreferrer" target="_blank">KT-68345</a></p><p id="z2rvw6m_571"><span class="control" id="z2rvw6m_578">Component</span>: Gradle</p><p id="z2rvw6m_572"><span class="control" id="z2rvw6m_579">Incompatible change type</span>: source</p><p id="z2rvw6m_573"><span class="control" id="z2rvw6m_580">Short summary</span>: The <code class="code" id="z2rvw6m_581">stabilityConfigurationFile</code> property in the Compose extension is deprecated in favor of a new <code class="code" id="z2rvw6m_582">stabilityConfigurationFiles</code> property, which allows specifying multiple configuration files.</p><p id="z2rvw6m_574"><span class="control" id="z2rvw6m_583">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_575"><li class="list__item" id="z2rvw6m_584"><p id="z2rvw6m_585">2.1.0: <code class="code" id="z2rvw6m_586">stabilityConfigurationFile</code> property is deprecated</p></li></ul></aside></section><section class="chapter"><h3 id="remove-deprecated-platform-plugin-ids" data-toc="remove-deprecated-platform-plugin-ids">Remove deprecated platform plugin IDs</h3><aside class="prompt" data-type="tip" data-title="" id="z2rvw6m_587"><p id="z2rvw6m_588"><span class="control" id="z2rvw6m_595">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-65565" id="z2rvw6m_596" data-external="true" rel="noopener noreferrer" target="_blank">KT-65565</a></p><p id="z2rvw6m_589"><span class="control" id="z2rvw6m_597">Component</span>: Gradle</p><p id="z2rvw6m_590"><span class="control" id="z2rvw6m_598">Incompatible change type</span>: source</p><p id="z2rvw6m_591"><span class="control" id="z2rvw6m_599">Short summary</span>: Support for these platform plugin IDs have been removed:</p><ul class="list _bullet" id="z2rvw6m_592"><li class="list__item" id="z2rvw6m_600"><p id="z2rvw6m_602"><code class="code" id="z2rvw6m_603">kotlin-platform-common</code></p></li><li class="list__item" id="z2rvw6m_601"><p id="z2rvw6m_604"><code class="code" id="z2rvw6m_605">org.jetbrains.kotlin.platform.common</code></p></li></ul><p id="z2rvw6m_593"><span class="control" id="z2rvw6m_606">Deprecation cycle</span>:</p><ul class="list _bullet" id="z2rvw6m_594"><li class="list__item" id="z2rvw6m_607"><p id="z2rvw6m_609">1.3: the platform plugin IDs are deprecated</p></li><li class="list__item" id="z2rvw6m_608"><p id="z2rvw6m_610">2.1.0: the platform plugin IDs are no longer supported</p></li></ul></aside></section></section><div class="last-modified">18 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compatibility-guide-22.html" class="navigation-links__prev">Compatibility guide for Kotlin 2.2</a><a href="compatibility-guide-20.html" class="navigation-links__next">Compatibility guide for Kotlin 2.0</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>