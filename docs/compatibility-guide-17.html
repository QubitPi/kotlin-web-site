<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-16T16:36:00.903658767"><link rel="canonical" href="https://kotlinlang.org/docs/compatibility-guide-17.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Compatibility guide for Kotlin 1.7 | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"basic-terms","level":0,"title":"Basic terms","anchor":"#basic-terms"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"make-safe-call-result-always-nullable","level":1,"title":"Make safe call result always nullable","anchor":"#make-safe-call-result-always-nullable"},{"id":"prohibit-the-delegation-of-super-calls-to-an-abstract-superclass-member","level":1,"title":"Prohibit the delegation of super calls to an abstract superclass member","anchor":"#prohibit-the-delegation-of-super-calls-to-an-abstract-superclass-member"},{"id":"prohibit-exposing-non-public-types-through-public-properties-declared-in-a-non-public-primary-constructor","level":1,"title":"Prohibit exposing non-public types through public properties declared in a non-public primary constructor","anchor":"#prohibit-exposing-non-public-types-through-public-properties-declared-in-a-non-public-primary-constructor"},{"id":"prohibit-access-to-uninitialized-enum-entries-qualified-with-the-enum-name","level":1,"title":"Prohibit access to uninitialized enum entries qualified with the enum name","anchor":"#prohibit-access-to-uninitialized-enum-entries-qualified-with-the-enum-name"},{"id":"prohibit-computing-constant-values-of-complex-boolean-expressions-in-when-condition-branches-and-conditions-of-loops","level":1,"title":"Prohibit computing constant values of complex boolean expressions in when condition branches and conditions of loops","anchor":"#prohibit-computing-constant-values-of-complex-boolean-expressions-in-when-condition-branches-and-conditions-of-loops"},{"id":"make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default","level":1,"title":"Make when statements with enum, sealed, and Boolean subjects exhaustive by default","anchor":"#make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default"},{"id":"deprecate-confusing-grammar-in-when-with-subject","level":1,"title":"Deprecate confusing grammar in when-with-subject","anchor":"#deprecate-confusing-grammar-in-when-with-subject"},{"id":"type-nullability-enhancement-improvements","level":1,"title":"Type nullability enhancement improvements","anchor":"#type-nullability-enhancement-improvements"},{"id":"prevent-implicit-coercions-between-different-numeric-types","level":1,"title":"Prevent implicit coercions between different numeric types","anchor":"#prevent-implicit-coercions-between-different-numeric-types"},{"id":"deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default","level":1,"title":"Deprecate the enable and the compatibility modes of the compiler option -Xjvm-default","anchor":"#deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default"},{"id":"prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda","level":1,"title":"Prohibit calls to functions named suspend with a trailing lambda","anchor":"#prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda"},{"id":"prohibit-smart-cast-on-a-base-class-property-if-the-base-class-is-from-another-module","level":1,"title":"Prohibit smart cast on a base class property if the base class is from another module","anchor":"#prohibit-smart-cast-on-a-base-class-property-if-the-base-class-is-from-another-module"},{"id":"do-not-neglect-meaningful-constraints-during-type-inference","level":1,"title":"Do not neglect meaningful constraints during type inference","anchor":"#do-not-neglect-meaningful-constraints-during-type-inference"},{"id":"standard-library","level":0,"title":"Standard library","anchor":"#standard-library"},{"id":"gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable","level":1,"title":"Gradually change the return type of collection min and max functions to non-nullable","anchor":"#gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable"},{"id":"deprecate-floating-point-array-functions-contains-indexof-lastindexof","level":1,"title":"Deprecate floating-point array functions: contains, indexOf, lastIndexOf","anchor":"#deprecate-floating-point-array-functions-contains-indexof-lastindexof"},{"id":"migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx","level":1,"title":"Migrate declarations from kotlin.dom and kotlin.browser packages to kotlinx.*","anchor":"#migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx"},{"id":"deprecate-some-js-only-api","level":1,"title":"Deprecate some JS-only API","anchor":"#deprecate-some-js-only-api"},{"id":"tools","level":0,"title":"Tools","anchor":"#tools"},{"id":"remove-kotlingradlesubplugin-class","level":1,"title":"Remove KotlinGradleSubplugin class","anchor":"#remove-kotlingradlesubplugin-class"},{"id":"remove-useir-compiler-option","level":1,"title":"Remove useIR compiler option","anchor":"#remove-useir-compiler-option"},{"id":"deprecate-kapt-use-worker-api-gradle-property","level":1,"title":"Deprecate kapt.use.worker.api Gradle property","anchor":"#deprecate-kapt-use-worker-api-gradle-property"},{"id":"remove-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property","level":1,"title":"Remove kotlin.experimental.coroutines Gradle DSL option and kotlin.coroutines Gradle property","anchor":"#remove-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property"},{"id":"deprecate-useexperimentalannotation-compiler-option","level":1,"title":"Deprecate useExperimentalAnnotation compiler option","anchor":"#deprecate-useexperimentalannotation-compiler-option"},{"id":"deprecate-kotlin-compiler-execution-strategy-system-property","level":1,"title":"Deprecate kotlin.compiler.execution.strategy system property","anchor":"#deprecate-kotlin-compiler-execution-strategy-system-property"},{"id":"remove-kotlinoptions-jdkhome-compiler-option","level":1,"title":"Remove kotlinOptions.jdkHome compiler option","anchor":"#remove-kotlinoptions-jdkhome-compiler-option"},{"id":"remove-nostdlib-compiler-option","level":1,"title":"Remove noStdlib compiler option","anchor":"#remove-nostdlib-compiler-option"},{"id":"remove-kotlin2js-and-kotlin-dce-plugin-plugins","level":1,"title":"Remove kotlin2js and kotlin-dce-plugin plugins","anchor":"#remove-kotlin2js-and-kotlin-dce-plugin-plugins"},{"id":"changes-in-compile-tasks","level":1,"title":"Changes in compile tasks","anchor":"#changes-in-compile-tasks"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Compatibility guide for Kotlin 1.7 | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/compatibility-guide-17.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Compatibility guide for Kotlin 1.7 | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/compatibility-guide-17.html#webpage",
    "url": "https://kotlinlang.org/docs/compatibility-guide-17.html",
    "name": "Compatibility guide for Kotlin 1.7 | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="compatibility-guide-17" data-main-title="Compatibility guide for Kotlin 1.7" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Other resources///Kotlin compatibility guides" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/compatibility-guides/compatibility-guide-17.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compatibility-guide-17" id="compatibility-guide-17.md">Compatibility guide for Kotlin 1.7</h1><p id="-liosbp_2"><span class="emphasis" id="-liosbp_8"><a href="kotlin-evolution-principles.html" id="-liosbp_10">Keeping the Language Modern</a></span> and <span class="emphasis" id="-liosbp_9"><a href="kotlin-evolution-principles.html" id="-liosbp_11">Comfortable Updates</a></span> are among the fundamental principles in Kotlin Language Design. The former says that constructs which obstruct language evolution should be removed, and the latter says that this removal should be well-communicated beforehand to make code migration as smooth as possible.</p><p id="-liosbp_3">While most of the language changes were already announced through other channels, like update changelogs or compiler warnings, this document summarizes them all, providing a complete reference for migration from Kotlin 1.6 to Kotlin 1.7.</p><section class="chapter"><h2 id="basic-terms" data-toc="basic-terms">Basic terms</h2><p id="-liosbp_12">In this document we introduce several kinds of compatibility:</p><ul class="list _bullet" id="-liosbp_13"><li class="list__item" id="-liosbp_15"><p id="-liosbp_18"><span class="emphasis" id="-liosbp_19">source</span>: source-incompatible change stops code that used to compile fine (without errors or warnings) from compiling anymore</p></li><li class="list__item" id="-liosbp_16"><p id="-liosbp_20"><span class="emphasis" id="-liosbp_21">binary</span>: two binary artifacts are said to be binary-compatible if interchanging them doesn't lead to loading or linkage errors</p></li><li class="list__item" id="-liosbp_17"><p id="-liosbp_22"><span class="emphasis" id="-liosbp_23">behavioral</span>: a change is said to be behavioral-incompatible if the same program demonstrates different behavior before and after applying the change</p></li></ul><p id="-liosbp_14">Remember that those definitions are given only for pure Kotlin. Compatibility of Kotlin code from the other languages perspective (for example, from Java) is out of the scope of this document.</p></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><section class="chapter"><h3 id="make-safe-call-result-always-nullable" data-toc="make-safe-call-result-always-nullable">Make safe call result always nullable</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_37"><p id="-liosbp_38"><span class="control" id="-liosbp_44">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46860" id="-liosbp_45" data-external="true" rel="noopener noreferrer" target="_blank">KT-46860</a></p><p id="-liosbp_39"><span class="control" id="-liosbp_46">Component</span>: Core language</p><p id="-liosbp_40"><span class="control" id="-liosbp_47">Incompatible change type</span>: source</p><p id="-liosbp_41"><span class="control" id="-liosbp_48">Short summary</span>: Kotlin 1.7 will consider the type of safe call result always nullable, even when the receiver of the safe call is non-nullable</p><p id="-liosbp_42"><span class="control" id="-liosbp_49">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_43"><li class="list__item" id="-liosbp_50"><p id="-liosbp_53">&lt;1.3: report a warning on an unnecessary safe call on non-nullable receivers</p></li><li class="list__item" id="-liosbp_51"><p id="-liosbp_54">1.6.20: warn additionally that the result of an unnecessary safe call will change its type in the next version</p></li><li class="list__item" id="-liosbp_52"><p id="-liosbp_55">1.7.0: change the type of safe call result to nullable, <br><code class="code" id="-liosbp_57">-XXLanguage:-SafeCallsAreAlwaysNullable</code> can be used to temporarily revert to the pre-1.7 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-the-delegation-of-super-calls-to-an-abstract-superclass-member" data-toc="prohibit-the-delegation-of-super-calls-to-an-abstract-superclass-member">Prohibit the delegation of super calls to an abstract superclass member</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_58"><p id="-liosbp_59"><span class="control" id="-liosbp_65">Issues</span>: <a href="https://youtrack.jetbrains.com/issue/KT-45508" id="-liosbp_66" data-external="true" rel="noopener noreferrer" target="_blank">KT-45508</a>, <a href="https://youtrack.jetbrains.com/issue/KT-49017" id="-liosbp_67" data-external="true" rel="noopener noreferrer" target="_blank">KT-49017</a>, <a href="https://youtrack.jetbrains.com/issue/KT-38078" id="-liosbp_68" data-external="true" rel="noopener noreferrer" target="_blank">KT-38078</a></p><p id="-liosbp_60"><span class="control" id="-liosbp_69">Component</span>: Core language</p><p id="-liosbp_61"><span class="control" id="-liosbp_70">Incompatible change type</span>: source</p><p id="-liosbp_62"><span class="control" id="-liosbp_71">Short summary</span>: Kotlin will report a compile error when an explicit or implicit super call is delegated to an <span class="emphasis" id="-liosbp_72">abstract</span> member of the superclass, even if there's a default implementation in a super interface</p><p id="-liosbp_63"><span class="control" id="-liosbp_73">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_64"><li class="list__item" id="-liosbp_74"><p id="-liosbp_78">1.5.20: introduce a warning when non-abstract classes that do not override all abstract members are used</p></li><li class="list__item" id="-liosbp_75"><p id="-liosbp_79">1.7.0: report an error if a super call, in fact, accesses an abstract member from a superclass</p></li><li class="list__item" id="-liosbp_76"><p id="-liosbp_80">1.7.0: report an error if the <code class="code" id="-liosbp_81">-Xjvm-default=all</code> or <code class="code" id="-liosbp_82">-Xjvm-default=all-compatibility</code> compatibility modes are enabled; report an error in the progressive mode</p></li><li class="list__item" id="-liosbp_77"><p id="-liosbp_83">&gt;=1.8.0: report an error in all cases</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-exposing-non-public-types-through-public-properties-declared-in-a-non-public-primary-constructor" data-toc="prohibit-exposing-non-public-types-through-public-properties-declared-in-a-non-public-primary-constructor">Prohibit exposing non-public types through public properties declared in a non-public primary constructor</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_84"><p id="-liosbp_85"><span class="control" id="-liosbp_91">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-28078" id="-liosbp_92" data-external="true" rel="noopener noreferrer" target="_blank">KT-28078</a></p><p id="-liosbp_86"><span class="control" id="-liosbp_93">Component</span>: Core language</p><p id="-liosbp_87"><span class="control" id="-liosbp_94">Incompatible change type</span>: source</p><p id="-liosbp_88"><span class="control" id="-liosbp_95">Short summary</span>: Kotlin will prevent declaring public properties having non-public types in a private primary constructor. Accessing such properties from another package could lead to an <code class="code" id="-liosbp_96">IllegalAccessError</code></p><p id="-liosbp_89"><span class="control" id="-liosbp_97">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_90"><li class="list__item" id="-liosbp_98"><p id="-liosbp_101">1.3.20: report a warning on a public property that has a non-public type and is declared in a non-public constructor</p></li><li class="list__item" id="-liosbp_99"><p id="-liosbp_102">1.6.20: raise this warning to an error in the progressive mode</p></li><li class="list__item" id="-liosbp_100"><p id="-liosbp_103">1.7.0: raise this warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-access-to-uninitialized-enum-entries-qualified-with-the-enum-name" data-toc="prohibit-access-to-uninitialized-enum-entries-qualified-with-the-enum-name">Prohibit access to uninitialized enum entries qualified with the enum name</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_104"><p id="-liosbp_105"><span class="control" id="-liosbp_111">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-41124" id="-liosbp_112" data-external="true" rel="noopener noreferrer" target="_blank">KT-41124</a></p><p id="-liosbp_106"><span class="control" id="-liosbp_113">Component</span>: Core language</p><p id="-liosbp_107"><span class="control" id="-liosbp_114">Incompatible change type</span>: source</p><p id="-liosbp_108"><span class="control" id="-liosbp_115">Short summary</span>: Kotlin 1.7 will prohibit access to uninitialized enum entries from the enum static initializer block when these entries are qualified with the enum name</p><p id="-liosbp_109"><span class="control" id="-liosbp_116">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_110"><li class="list__item" id="-liosbp_117"><p id="-liosbp_118">1.7.0: report an error when uninitialized enum entries are accessed from the enum static initializer block</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-computing-constant-values-of-complex-boolean-expressions-in-when-condition-branches-and-conditions-of-loops" data-toc="prohibit-computing-constant-values-of-complex-boolean-expressions-in-when-condition-branches-and-conditions-of-loops">Prohibit computing constant values of complex boolean expressions in when condition branches and conditions of loops</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_119"><p id="-liosbp_120"><span class="control" id="-liosbp_126">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-39883" id="-liosbp_127" data-external="true" rel="noopener noreferrer" target="_blank">KT-39883</a></p><p id="-liosbp_121"><span class="control" id="-liosbp_128">Component</span>: Core language</p><p id="-liosbp_122"><span class="control" id="-liosbp_129">Incompatible change type</span>: source</p><p id="-liosbp_123"><span class="control" id="-liosbp_130">Short summary</span>: Kotlin will no longer make exhaustiveness and control flow assumptions based on constant boolean expressions other than literal <code class="code" id="-liosbp_131">true</code> and <code class="code" id="-liosbp_132">false</code></p><p id="-liosbp_124"><span class="control" id="-liosbp_133">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_125"><li class="list__item" id="-liosbp_134"><p id="-liosbp_136">1.5.30: report a warning when exhaustiveness of <code class="code" id="-liosbp_137">when</code> or control flow reachability is determined based on a complex constant boolean expression in <code class="code" id="-liosbp_138">when</code> branch or loop condition</p></li><li class="list__item" id="-liosbp_135"><p id="-liosbp_139">1.7.0: raise this warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default" data-toc="make-when-statements-with-enum-sealed-and-boolean-subjects-exhaustive-by-default">Make when statements with enum, sealed, and Boolean subjects exhaustive by default</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_140"><p id="-liosbp_141"><span class="control" id="-liosbp_147">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-47709" id="-liosbp_148" data-external="true" rel="noopener noreferrer" target="_blank">KT-47709</a></p><p id="-liosbp_142"><span class="control" id="-liosbp_149">Component</span>: Core language</p><p id="-liosbp_143"><span class="control" id="-liosbp_150">Incompatible change type</span>: source</p><p id="-liosbp_144"><span class="control" id="-liosbp_151">Short summary</span>: Kotlin 1.7 will report an error about the <code class="code" id="-liosbp_152">when</code> statement with an enum, sealed, or Boolean subject being non-exhaustive</p><p id="-liosbp_145"><span class="control" id="-liosbp_153">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_146"><li class="list__item" id="-liosbp_154"><p id="-liosbp_156">1.6.0: introduce a warning when the <code class="code" id="-liosbp_157">when</code> statement with an enum, sealed, or Boolean subject is non-exhaustive (error in the progressive mode)</p></li><li class="list__item" id="-liosbp_155"><p id="-liosbp_158">1.7.0: raise this warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-confusing-grammar-in-when-with-subject" data-toc="deprecate-confusing-grammar-in-when-with-subject">Deprecate confusing grammar in when-with-subject</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_159"><p id="-liosbp_160"><span class="control" id="-liosbp_166">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48385" id="-liosbp_167" data-external="true" rel="noopener noreferrer" target="_blank">KT-48385</a></p><p id="-liosbp_161"><span class="control" id="-liosbp_168">Component</span>: Core language</p><p id="-liosbp_162"><span class="control" id="-liosbp_169">Incompatible change type</span>: source</p><p id="-liosbp_163"><span class="control" id="-liosbp_170">Short summary</span>: Kotlin 1.6 deprecated several confusing grammar constructs in <code class="code" id="-liosbp_171">when</code> condition expressions</p><p id="-liosbp_164"><span class="control" id="-liosbp_172">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_165"><li class="list__item" id="-liosbp_173"><p id="-liosbp_176">1.6.20: introduce a deprecation warning on the affected expressions</p></li><li class="list__item" id="-liosbp_174"><p id="-liosbp_177">1.8.0: raise this warning to an error</p></li><li class="list__item" id="-liosbp_175"><p id="-liosbp_178">&gt;= 1.8: repurpose some deprecated constructs for new language features</p></li></ul></aside></section><section class="chapter"><h3 id="type-nullability-enhancement-improvements" data-toc="type-nullability-enhancement-improvements">Type nullability enhancement improvements</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_179"><p id="-liosbp_180"><span class="control" id="-liosbp_186">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48623" id="-liosbp_187" data-external="true" rel="noopener noreferrer" target="_blank">KT-48623</a></p><p id="-liosbp_181"><span class="control" id="-liosbp_188">Component</span>: Kotlin/JVM</p><p id="-liosbp_182"><span class="control" id="-liosbp_189">Incompatible change type</span>: source</p><p id="-liosbp_183"><span class="control" id="-liosbp_190">Short summary</span>: Kotlin 1.7 will change how it loads and interprets type nullability annotations in Java code</p><p id="-liosbp_184"><span class="control" id="-liosbp_191">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_185"><li class="list__item" id="-liosbp_192"><p id="-liosbp_194">1.4.30: introduce warnings for cases where more precise type nullability could lead to an error</p></li><li class="list__item" id="-liosbp_193"><p id="-liosbp_195">1.7.0: infer more precise nullability of Java types, <code class="code" id="-liosbp_196">-XXLanguage:-TypeEnhancementImprovementsInStrictMode</code> can be used to temporarily revert to the pre-1.7 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="prevent-implicit-coercions-between-different-numeric-types" data-toc="prevent-implicit-coercions-between-different-numeric-types">Prevent implicit coercions between different numeric types</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_197"><p id="-liosbp_198"><span class="control" id="-liosbp_204">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48645" id="-liosbp_205" data-external="true" rel="noopener noreferrer" target="_blank">KT-48645</a></p><p id="-liosbp_199"><span class="control" id="-liosbp_206">Component</span>: Kotlin/JVM</p><p id="-liosbp_200"><span class="control" id="-liosbp_207">Incompatible change type</span>: behavioral</p><p id="-liosbp_201"><span class="control" id="-liosbp_208">Short summary</span>: Kotlin will avoid converting numeric values automatically to a primitive numeric type where only a downcast to that type was needed semantically</p><p id="-liosbp_202"><span class="control" id="-liosbp_209">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_203"><li class="list__item" id="-liosbp_210"><p id="-liosbp_213">&lt; 1.5.30: the old behavior in all affected cases</p></li><li class="list__item" id="-liosbp_211"><p id="-liosbp_214">1.5.30: fix the downcast behavior in generated property delegate accessors, <code class="code" id="-liosbp_215">-Xuse-old-backend</code> can be used to temporarily revert to the pre-1.5.30 fix behavior</p></li><li class="list__item" id="-liosbp_212"><p id="-liosbp_216">&gt;= 1.7.20: fix the downcast behavior in other affected cases</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default" data-toc="deprecate-the-enable-and-the-compatibility-modes-of-the-compiler-option-xjvm-default">Deprecate the enable and the compatibility modes of the compiler option -Xjvm-default</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_217"><p id="-liosbp_218"><span class="control" id="-liosbp_224">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46329" id="-liosbp_225" data-external="true" rel="noopener noreferrer" target="_blank">KT-46329</a></p><p id="-liosbp_219"><span class="control" id="-liosbp_226">Component</span>: Kotlin/JVM</p><p id="-liosbp_220"><span class="control" id="-liosbp_227">Incompatible change type</span>: source</p><p id="-liosbp_221"><span class="control" id="-liosbp_228">Short summary</span>: Kotlin 1.6.20 warns about the usage of <code class="code" id="-liosbp_229">enable</code> and <code class="code" id="-liosbp_230">compatibility</code> modes of the <code class="code" id="-liosbp_231">-Xjvm-default</code> compiler option</p><p id="-liosbp_222"><span class="control" id="-liosbp_232">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_223"><li class="list__item" id="-liosbp_233"><p id="-liosbp_235">1.6.20: introduce a warning on the <code class="code" id="-liosbp_236">enable</code> and <code class="code" id="-liosbp_237">compatibility</code> modes of the <code class="code" id="-liosbp_238">-Xjvm-default</code> compiler option</p></li><li class="list__item" id="-liosbp_234"><p id="-liosbp_239">&gt;= 1.8.0: raise this warning to an error</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda" data-toc="prohibit-calls-to-functions-named-suspend-with-a-trailing-lambda">Prohibit calls to functions named suspend with a trailing lambda</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_240"><p id="-liosbp_241"><span class="control" id="-liosbp_247">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-22562" id="-liosbp_248" data-external="true" rel="noopener noreferrer" target="_blank">KT-22562</a></p><p id="-liosbp_242"><span class="control" id="-liosbp_249">Component</span>: Core language</p><p id="-liosbp_243"><span class="control" id="-liosbp_250">Incompatible change type</span>: source</p><p id="-liosbp_244"><span class="control" id="-liosbp_251">Short summary</span>: Kotlin 1.6 no longer allows calling user functions named <code class="code" id="-liosbp_252">suspend</code> that have the single argument of a functional type passed as a trailing lambda</p><p id="-liosbp_245"><span class="control" id="-liosbp_253">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_246"><li class="list__item" id="-liosbp_254"><p id="-liosbp_257">1.3.0: introduce a warning on such function calls</p></li><li class="list__item" id="-liosbp_255"><p id="-liosbp_258">1.6.0: raise this warning to an error</p></li><li class="list__item" id="-liosbp_256"><p id="-liosbp_259">1.7.0: introduce changes to the language grammar so that <code class="code" id="-liosbp_260">suspend</code> before <code class="code" id="-liosbp_261">{</code> is parsed as a keyword</p></li></ul></aside></section><section class="chapter"><h3 id="prohibit-smart-cast-on-a-base-class-property-if-the-base-class-is-from-another-module" data-toc="prohibit-smart-cast-on-a-base-class-property-if-the-base-class-is-from-another-module">Prohibit smart cast on a base class property if the base class is from another module</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_262"><p id="-liosbp_263"><span class="control" id="-liosbp_269">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-52629" id="-liosbp_270" data-external="true" rel="noopener noreferrer" target="_blank">KT-52629</a></p><p id="-liosbp_264"><span class="control" id="-liosbp_271">Component</span>: Core language</p><p id="-liosbp_265"><span class="control" id="-liosbp_272">Incompatible change type</span>: source</p><p id="-liosbp_266"><span class="control" id="-liosbp_273">Short summary</span>: Kotlin 1.7 will no longer allow smart casts on properties of a superclass if that class is located in another module</p><p id="-liosbp_267"><span class="control" id="-liosbp_274">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_268"><li class="list__item" id="-liosbp_275"><p id="-liosbp_277">1.6.0: report a warning on a smart cast on a property declared in the superclass located in another module</p></li><li class="list__item" id="-liosbp_276"><p id="-liosbp_278">1.7.0: raise this warning to an error, <br><code class="code" id="-liosbp_280">-XXLanguage:-ProhibitSmartcastsOnPropertyFromAlienBaseClass</code> can be used to temporarily revert to the pre-1.7 behavior</p></li></ul></aside></section><section class="chapter"><h3 id="do-not-neglect-meaningful-constraints-during-type-inference" data-toc="do-not-neglect-meaningful-constraints-during-type-inference">Do not neglect meaningful constraints during type inference</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_281"><p id="-liosbp_282"><span class="control" id="-liosbp_288">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-52668" id="-liosbp_289" data-external="true" rel="noopener noreferrer" target="_blank">KT-52668</a></p><p id="-liosbp_283"><span class="control" id="-liosbp_290">Component</span>: Core language</p><p id="-liosbp_284"><span class="control" id="-liosbp_291">Incompatible change type</span>: source</p><p id="-liosbp_285"><span class="control" id="-liosbp_292">Short summary</span>: Kotlin 1.4&minus;1.6 neglected some type constraints during type inference due to an incorrect optimization. It could allow writing unsound code, causing <code class="code" id="-liosbp_293">ClassCastException</code> at runtime. Kotlin 1.7 takes these constraints into account, thus prohibiting the unsound code</p><p id="-liosbp_286"><span class="control" id="-liosbp_294">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_287"><li class="list__item" id="-liosbp_295"><p id="-liosbp_297">1.5.20: report a warning on expressions where a type mismatch would happen if all the type inference constraints were taken into account</p></li><li class="list__item" id="-liosbp_296"><p id="-liosbp_298">1.7.0: take all the constraints into account, thus raising this warning to an error, <br><code class="code" id="-liosbp_300">-XXLanguage:-ProperTypeInferenceConstraintsProcessing</code> can be used to temporarily revert to the pre-1.7 behavior</p></li></ul></aside></section></section><section class="chapter"><h2 id="standard-library" data-toc="standard-library">Standard library</h2><section class="chapter"><h3 id="gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable" data-toc="gradually-change-the-return-type-of-collection-min-and-max-functions-to-non-nullable">Gradually change the return type of collection min and max functions to non-nullable</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_305"><p id="-liosbp_306"><span class="control" id="-liosbp_312">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-38854" id="-liosbp_313" data-external="true" rel="noopener noreferrer" target="_blank">KT-38854</a></p><p id="-liosbp_307"><span class="control" id="-liosbp_314">Component</span>: kotlin-stdlib</p><p id="-liosbp_308"><span class="control" id="-liosbp_315">Incompatible change type</span>: source</p><p id="-liosbp_309"><span class="control" id="-liosbp_316">Short summary</span>: the return type of collection <code class="code" id="-liosbp_317">min</code> and <code class="code" id="-liosbp_318">max</code> functions will be changed to non-nullable in Kotlin 1.7</p><p id="-liosbp_310"><span class="control" id="-liosbp_319">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_311"><li class="list__item" id="-liosbp_320"><p id="-liosbp_324">1.4.0: introduce <code class="code" id="-liosbp_325">...OrNull</code> functions as synonyms and deprecate the affected API (see details in the issue)</p></li><li class="list__item" id="-liosbp_321"><p id="-liosbp_326">1.5.0: raise the deprecation level of the affected API to an error</p></li><li class="list__item" id="-liosbp_322"><p id="-liosbp_327">1.6.0: hide the deprecated functions from the public API</p></li><li class="list__item" id="-liosbp_323"><p id="-liosbp_328">1.7.0: reintroduce the affected API but with non-nullable return type</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-floating-point-array-functions-contains-indexof-lastindexof" data-toc="deprecate-floating-point-array-functions-contains-indexof-lastindexof">Deprecate floating-point array functions: contains, indexOf, lastIndexOf</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_329"><p id="-liosbp_330"><span class="control" id="-liosbp_336">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-28753" id="-liosbp_337" data-external="true" rel="noopener noreferrer" target="_blank">KT-28753</a></p><p id="-liosbp_331"><span class="control" id="-liosbp_338">Component</span>: kotlin-stdlib</p><p id="-liosbp_332"><span class="control" id="-liosbp_339">Incompatible change type</span>: source</p><p id="-liosbp_333"><span class="control" id="-liosbp_340">Short summary</span>: Kotlin deprecates floating-point array functions <code class="code" id="-liosbp_341">contains</code>, <code class="code" id="-liosbp_342">indexOf</code>, <code class="code" id="-liosbp_343">lastIndexOf</code> that compare values using the IEEE-754 order instead of the total order</p><p id="-liosbp_334"><span class="control" id="-liosbp_344">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_335"><li class="list__item" id="-liosbp_345"><p id="-liosbp_348">1.4.0: deprecate the affected functions with a warning</p></li><li class="list__item" id="-liosbp_346"><p id="-liosbp_349">1.6.0: raise the deprecation level to an error</p></li><li class="list__item" id="-liosbp_347"><p id="-liosbp_350">1.7.0: hide the deprecated functions from the public API</p></li></ul></aside></section><section class="chapter"><h3 id="migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx" data-toc="migrate-declarations-from-kotlin-dom-and-kotlin-browser-packages-to-kotlinx">Migrate declarations from kotlin.dom and kotlin.browser packages to kotlinx.*</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_351"><p id="-liosbp_352"><span class="control" id="-liosbp_358">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-39330" id="-liosbp_359" data-external="true" rel="noopener noreferrer" target="_blank">KT-39330</a></p><p id="-liosbp_353"><span class="control" id="-liosbp_360">Component</span>: kotlin-stdlib (JS)</p><p id="-liosbp_354"><span class="control" id="-liosbp_361">Incompatible change type</span>: source</p><p id="-liosbp_355"><span class="control" id="-liosbp_362">Short summary</span>: declarations from the <code class="code" id="-liosbp_363">kotlin.dom</code> and <code class="code" id="-liosbp_364">kotlin.browser</code> packages are moved to the corresponding <code class="code" id="-liosbp_365">kotlinx.*</code> packages to prepare for extracting them from stdlib</p><p id="-liosbp_356"><span class="control" id="-liosbp_366">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_357"><li class="list__item" id="-liosbp_367"><p id="-liosbp_372">1.4.0: introduce the replacement API in <code class="code" id="-liosbp_373">kotlinx.dom</code> and <code class="code" id="-liosbp_374">kotlinx.browser</code> packages</p></li><li class="list__item" id="-liosbp_368"><p id="-liosbp_375">1.4.0: deprecate the API in <code class="code" id="-liosbp_376">kotlin.dom</code> and <code class="code" id="-liosbp_377">kotlin.browser</code> packages and propose the new API above as a replacement</p></li><li class="list__item" id="-liosbp_369"><p id="-liosbp_378">1.6.0: raise the deprecation level to an error</p></li><li class="list__item" id="-liosbp_370"><p id="-liosbp_379">&gt;= 1.8: remove the deprecated functions from stdlib</p></li><li class="list__item" id="-liosbp_371"><p id="-liosbp_380">&gt;= 1.8: move the API in kotlinx.* packages to a separate library</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-some-js-only-api" data-toc="deprecate-some-js-only-api">Deprecate some JS-only API</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_381"><p id="-liosbp_382"><span class="control" id="-liosbp_388">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48587" id="-liosbp_389" data-external="true" rel="noopener noreferrer" target="_blank">KT-48587</a></p><p id="-liosbp_383"><span class="control" id="-liosbp_390">Component</span>: kotlin-stdlib (JS)</p><p id="-liosbp_384"><span class="control" id="-liosbp_391">Incompatible change type</span>: source</p><p id="-liosbp_385"><span class="control" id="-liosbp_392">Short summary</span>: a number of JS-only functions in stdlib are deprecated for removal. They include: <code class="code" id="-liosbp_393">String.concat(String)</code>, <code class="code" id="-liosbp_394">String.match(regex: String)</code>, <code class="code" id="-liosbp_395">String.matches(regex: String)</code>, and the <code class="code" id="-liosbp_396">sort</code> functions on arrays taking a comparison function, for example, <code class="code" id="-liosbp_397">Array&lt;out T&gt;.sort(comparison: (a: T, b: T) -&gt; Int)</code></p><p id="-liosbp_386"><span class="control" id="-liosbp_398">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_387"><li class="list__item" id="-liosbp_399"><p id="-liosbp_402">1.6.0: deprecate the affected functions with a warning</p></li><li class="list__item" id="-liosbp_400"><p id="-liosbp_403">1.8.0: raise the deprecation level to an error</p></li><li class="list__item" id="-liosbp_401"><p id="-liosbp_404">1.9.0: remove the deprecated functions from the public API</p></li></ul></aside></section></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2><section class="chapter"><h3 id="remove-kotlingradlesubplugin-class" data-toc="remove-kotlingradlesubplugin-class">Remove KotlinGradleSubplugin class</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_415"><p id="-liosbp_416"><span class="control" id="-liosbp_422">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48831" id="-liosbp_423" data-external="true" rel="noopener noreferrer" target="_blank">KT-48831</a></p><p id="-liosbp_417"><span class="control" id="-liosbp_424">Component</span>: Gradle</p><p id="-liosbp_418"><span class="control" id="-liosbp_425">Incompatible change type</span>: source</p><p id="-liosbp_419"><span class="control" id="-liosbp_426">Short summary</span>: remove the <code class="code" id="-liosbp_427">KotlinGradleSubplugin</code> class. Use the <code class="code" id="-liosbp_428">KotlinCompilerPluginSupportPlugin</code> class instead</p><p id="-liosbp_420"><span class="control" id="-liosbp_429">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_421"><li class="list__item" id="-liosbp_430"><p id="-liosbp_432">1.6.0: raise the deprecation level to an error</p></li><li class="list__item" id="-liosbp_431"><p id="-liosbp_433">1.7.0: remove the deprecated class</p></li></ul></aside></section><section class="chapter"><h3 id="remove-useir-compiler-option" data-toc="remove-useir-compiler-option">Remove useIR compiler option</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_434"><p id="-liosbp_435"><span class="control" id="-liosbp_441">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48847" id="-liosbp_442" data-external="true" rel="noopener noreferrer" target="_blank">KT-48847</a></p><p id="-liosbp_436"><span class="control" id="-liosbp_443">Component</span>: Gradle</p><p id="-liosbp_437"><span class="control" id="-liosbp_444">Incompatible change type</span>: source</p><p id="-liosbp_438"><span class="control" id="-liosbp_445">Short summary</span>: remove the deprecated and hidden <code class="code" id="-liosbp_446">useIR</code> compiler option</p><p id="-liosbp_439"><span class="control" id="-liosbp_447">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_440"><li class="list__item" id="-liosbp_448"><p id="-liosbp_451">1.5.0: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_449"><p id="-liosbp_452">1.6.0: hide the option</p></li><li class="list__item" id="-liosbp_450"><p id="-liosbp_453">1.7.0: remove the deprecated option</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kapt-use-worker-api-gradle-property" data-toc="deprecate-kapt-use-worker-api-gradle-property">Deprecate kapt.use.worker.api Gradle property</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_454"><p id="-liosbp_455"><span class="control" id="-liosbp_461">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48826" id="-liosbp_462" data-external="true" rel="noopener noreferrer" target="_blank">KT-48826</a></p><p id="-liosbp_456"><span class="control" id="-liosbp_463">Component</span>: Gradle</p><p id="-liosbp_457"><span class="control" id="-liosbp_464">Incompatible change type</span>: source</p><p id="-liosbp_458"><span class="control" id="-liosbp_465">Short summary</span>: deprecate the <code class="code" id="-liosbp_466">kapt.use.worker.api</code> property that allowed to run kapt via Gradle Workers API (default: true)</p><p id="-liosbp_459"><span class="control" id="-liosbp_467">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_460"><li class="list__item" id="-liosbp_468"><p id="-liosbp_470">1.6.20: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_469"><p id="-liosbp_471">&gt;= 1.8.0: remove this property</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property" data-toc="remove-kotlin-experimental-coroutines-gradle-dsl-option-and-kotlin-coroutines-gradle-property">Remove kotlin.experimental.coroutines Gradle DSL option and kotlin.coroutines Gradle property</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_472"><p id="-liosbp_473"><span class="control" id="-liosbp_479">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-50494" id="-liosbp_480" data-external="true" rel="noopener noreferrer" target="_blank">KT-50494</a></p><p id="-liosbp_474"><span class="control" id="-liosbp_481">Component</span>: Gradle</p><p id="-liosbp_475"><span class="control" id="-liosbp_482">Incompatible change type</span>: source</p><p id="-liosbp_476"><span class="control" id="-liosbp_483">Short summary</span>: remove the <code class="code" id="-liosbp_484">kotlin.experimental.coroutines</code> Gradle DSL option and the <code class="code" id="-liosbp_485">kotlin.coroutines</code> property</p><p id="-liosbp_477"><span class="control" id="-liosbp_486">Deprecation cycle</span>:</p><ul class="list _bullet" id="-liosbp_478"><li class="list__item" id="-liosbp_487"><p id="-liosbp_489">1.6.20: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_488"><p id="-liosbp_490">1.7.0: remove the DSL option, its enclosing <code class="code" id="-liosbp_491">experimental</code> block, and the property</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-useexperimentalannotation-compiler-option" data-toc="deprecate-useexperimentalannotation-compiler-option">Deprecate useExperimentalAnnotation compiler option</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_492"><p id="-liosbp_493"><span class="control" id="-liosbp_499">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-47763" id="-liosbp_500" data-external="true" rel="noopener noreferrer" target="_blank">KT-47763</a></p><p id="-liosbp_494"><span class="control" id="-liosbp_501">Component</span>: Gradle</p><p id="-liosbp_495"><span class="control" id="-liosbp_502">Incompatible change type</span>: source</p><p id="-liosbp_496"><span class="control" id="-liosbp_503">Short summary</span>: remove the hidden <code class="code" id="-liosbp_504">useExperimentalAnnotation()</code> Gradle function used to opt in to using an API in a module. <code class="code" id="-liosbp_505">optIn()</code> function can be used instead</p><p id="-liosbp_497"><span class="control" id="-liosbp_506">Deprecation cycle:</span></p><ul class="list _bullet" id="-liosbp_498"><li class="list__item" id="-liosbp_507"><p id="-liosbp_509">1.6.0: hide the deprecation option</p></li><li class="list__item" id="-liosbp_508"><p id="-liosbp_510">1.7.0: remove the deprecated option</p></li></ul></aside></section><section class="chapter"><h3 id="deprecate-kotlin-compiler-execution-strategy-system-property" data-toc="deprecate-kotlin-compiler-execution-strategy-system-property">Deprecate kotlin.compiler.execution.strategy system property</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_511"><p id="-liosbp_512"><span class="control" id="-liosbp_518">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-51830" id="-liosbp_519" data-external="true" rel="noopener noreferrer" target="_blank">KT-51830</a></p><p id="-liosbp_513"><span class="control" id="-liosbp_520">Component</span>: Gradle</p><p id="-liosbp_514"><span class="control" id="-liosbp_521">Incompatible change type</span>: source</p><p id="-liosbp_515"><span class="control" id="-liosbp_522">Short summary</span>: deprecate the <code class="code" id="-liosbp_523">kotlin.compiler.execution.strategy</code> system property used to choose a compiler execution strategy. Use the Gradle property <code class="code" id="-liosbp_524">kotlin.compiler.execution.strategy</code> or the compile task property <code class="code" id="-liosbp_525">compilerExecutionStrategy</code> instead</p><p id="-liosbp_516"><span class="control" id="-liosbp_526">Deprecation cycle:</span></p><ul class="list _bullet" id="-liosbp_517"><li class="list__item" id="-liosbp_527"><p id="-liosbp_529">1.7.0: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_528"><p id="-liosbp_530">&gt; 1.7.0: remove the property</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlinoptions-jdkhome-compiler-option" data-toc="remove-kotlinoptions-jdkhome-compiler-option">Remove kotlinOptions.jdkHome compiler option</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_531"><p id="-liosbp_532"><span class="control" id="-liosbp_538">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-46541" id="-liosbp_539" data-external="true" rel="noopener noreferrer" target="_blank">KT-46541</a></p><p id="-liosbp_533"><span class="control" id="-liosbp_540">Component</span>: Gradle</p><p id="-liosbp_534"><span class="control" id="-liosbp_541">Incompatible change type</span>: source</p><p id="-liosbp_535"><span class="control" id="-liosbp_542">Short summary</span>: remove the <code class="code" id="-liosbp_543">kotlinOptions.jdkHome</code> compiler option used to include a custom JDK from the specified location into the classpath instead of the default <code class="code" id="-liosbp_544">JAVA_HOME</code>. Use <a href="gradle-configure-project.html#gradle-java-toolchains-support" id="-liosbp_545">Java toolchains</a> instead</p><p id="-liosbp_536"><span class="control" id="-liosbp_546">Deprecation cycle:</span></p><ul class="list _bullet" id="-liosbp_537"><li class="list__item" id="-liosbp_547"><p id="-liosbp_549">1.5.30: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_548"><p id="-liosbp_550">&gt; 1.7.0: remove the option</p></li></ul></aside></section><section class="chapter"><h3 id="remove-nostdlib-compiler-option" data-toc="remove-nostdlib-compiler-option">Remove noStdlib compiler option</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_551"><p id="-liosbp_552"><span class="control" id="-liosbp_558">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-49011" id="-liosbp_559" data-external="true" rel="noopener noreferrer" target="_blank">KT-49011</a></p><p id="-liosbp_553"><span class="control" id="-liosbp_560">Component</span>: Gradle</p><p id="-liosbp_554"><span class="control" id="-liosbp_561">Incompatible change type</span>: source</p><p id="-liosbp_555"><span class="control" id="-liosbp_562">Short summary</span>: remove the <code class="code" id="-liosbp_563">noStdlib</code> compiler option. The Gradle plugin uses the <code class="code" id="-liosbp_564">kotlin.stdlib.default.dependency=true</code> property to control whether the Kotlin standard library is present</p><p id="-liosbp_556"><span class="control" id="-liosbp_565">Deprecation cycle:</span></p><ul class="list _bullet" id="-liosbp_557"><li class="list__item" id="-liosbp_566"><p id="-liosbp_568">1.5.0: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_567"><p id="-liosbp_569">1.7.0: remove the option</p></li></ul></aside></section><section class="chapter"><h3 id="remove-kotlin2js-and-kotlin-dce-plugin-plugins" data-toc="remove-kotlin2js-and-kotlin-dce-plugin-plugins">Remove kotlin2js and kotlin-dce-plugin plugins</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_570"><p id="-liosbp_572"><span class="control" id="-liosbp_576">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-48276" id="-liosbp_577" data-external="true" rel="noopener noreferrer" target="_blank">KT-48276</a></p><p id="-liosbp_573"><span class="control" id="-liosbp_578">Component</span>: Gradle</p><p id="-liosbp_574"><span class="control" id="-liosbp_579">Incompatible change type</span>: source</p><p id="-liosbp_575"><span class="control" id="-liosbp_580">Short summary</span>: remove the <code class="code" id="-liosbp_581">kotlin2js</code> and <code class="code" id="-liosbp_582">kotlin-dce-plugin</code> plugins. Instead of <code class="code" id="-liosbp_583">kotlin2js</code>, use the new <code class="code" id="-liosbp_584">org.jetbrains.kotlin.js</code> plugin. Dead code elimination (DCE) works when the Kotlin/JS Gradle plugin is properly configured</p></aside><aside class="prompt" data-type="tip" data-title="" id="-liosbp_571"><p id="-liosbp_585"><span class="control" id="-liosbp_587">Deprecation cycle:</span></p><ul class="list _bullet" id="-liosbp_586"><li class="list__item" id="-liosbp_588"><p id="-liosbp_590">1.4.0: raise the deprecation level to a warning</p></li><li class="list__item" id="-liosbp_589"><p id="-liosbp_591">1.7.0: remove the plugins</p></li></ul></aside></section><section class="chapter"><h3 id="changes-in-compile-tasks" data-toc="changes-in-compile-tasks">Changes in compile tasks</h3><aside class="prompt" data-type="tip" data-title="" id="-liosbp_592"><p id="-liosbp_593"><span class="control" id="-liosbp_599">Issue</span>: <a href="https://youtrack.jetbrains.com/issue/KT-32805" id="-liosbp_600" data-external="true" rel="noopener noreferrer" target="_blank">KT-32805</a></p><p id="-liosbp_594"><span class="control" id="-liosbp_601">Component</span>: Gradle</p><p id="-liosbp_595"><span class="control" id="-liosbp_602">Incompatible change type</span>: source</p><p id="-liosbp_596"><span class="control" id="-liosbp_603">Short summary</span>: Kotlin compile tasks no longer inherit the Gradle <code class="code" id="-liosbp_604">AbstractCompile</code> task and that's why the <code class="code" id="-liosbp_605">sourceCompatibility</code> and <code class="code" id="-liosbp_606">targetCompatibility</code> inputs are no longer available in Kotlin users' scripts. The <code class="code" id="-liosbp_607">SourceTask.stableSources</code> input is no longer available. The <code class="code" id="-liosbp_608">sourceFilesExtensions</code> input was removed. The deprecated <code class="code" id="-liosbp_609">Gradle destinationDir: File</code> output was replaced with the <code class="code" id="-liosbp_610">destinationDirectory: DirectoryProperty</code> output. The <code class="code" id="-liosbp_611">classpath</code> property of the <code class="code" id="-liosbp_612">KotlinCompile</code> task is deprecated</p><p id="-liosbp_597"><span class="control" id="-liosbp_613">Deprecation cycle:</span></p><ul class="list _bullet" id="-liosbp_598"><li class="list__item" id="-liosbp_614"><p id="-liosbp_615">1.7.0: inputs are not available, the output is replaced, the <code class="code" id="-liosbp_616">classpath</code> property is deprecated</p></li></ul></aside></section></section><div class="last-modified">16 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compatibility-guide-1720.html" class="navigation-links__prev">Compatibility guide for Kotlin 1.7.20</a><a href="compatibility-guide-16.html" class="navigation-links__next">Compatibility guide for Kotlin 1.6</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>