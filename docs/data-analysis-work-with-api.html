<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-30T17:33:03.318848465"><link rel="canonical" href="https://kotlinlang.org/docs/data-analysis-work-with-api.html" data-react-helmet="true"><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
<title>Retrieve data from web sources and APIs | Kotlin Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"before-you-start","level":0,"title":"Before you start","anchor":"#before-you-start"},{"id":"fetch-data-from-an-api","level":0,"title":"Fetch data from an API","anchor":"#fetch-data-from-an-api"},{"id":"clean-and-refine-data","level":0,"title":"Clean and refine data","anchor":"#clean-and-refine-data"},{"id":"analyze-data-in-kotlin-notebook","level":0,"title":"Analyze data in Kotlin Notebook","anchor":"#analyze-data-in-kotlin-notebook"},{"id":"what-s-next","level":0,"title":"What\u0027s next","anchor":"#what-s-next"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><link rel="icon" type="image/svg" sizes="16x16" href="https://kotlinlang.org/assets/images/favicon.svg?v2"><link rel="icon" type="image/x-icon" sizes="32x32" href="https://kotlinlang.org/assets/images/favicon.ico?v2"><link rel="icon" type="image/png" sizes="96x96" href="https://kotlinlang.org/assets/images/apple-touch-icon.png?v2"><link rel="icon" type="image/png" sizes="300x300" href="https://kotlinlang.org/assets/images/apple-touch-icon-72x72.png?v2"><link rel="icon" type="image/png" sizes="500x500" href="https://kotlinlang.org/assets/images/apple-touch-icon-114x114.png?v2"><meta name="image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- Open Graph --><meta property="og:title" content="Retrieve data from web sources and APIs | Kotlin"><meta property="og:description" content=""><meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><meta property="og:site_name" content="Kotlin Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://kotlinlang.org/docs/data-analysis-work-with-api.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@kotlin"><meta name="twitter:title" content="Retrieve data from web sources and APIs | Kotlin"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@kotlin"><meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/open-graph/docs.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://kotlinlang.org/docs/data-analysis-work-with-api.html#webpage",
    "url": "https://kotlinlang.org/docs/data-analysis-work-with-api.html",
    "name": "Retrieve data from web sources and APIs | Kotlin",
    "description": "",
    "image": "https://kotlinlang.org/assets/images/open-graph/docs.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://kotlinlang.org/docs/#website",
    "url": "https://kotlinlang.org/docs/",
    "name": "Kotlin Help"
}</script><!-- End Schema.org --><style>a[href="test-page.html"] { visibility: hidden; }</style></head><body data-id="data-analysis-work-with-api" data-main-title="Retrieve data from web sources and APIs" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Data analysis///Working with data sources" data-edit-url="https://github.com/JetBrains/kotlin-web-site/edit/master/docs/topics/data-analysis/data-analysis-work-with-api.md"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Kotlin  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="data-analysis-work-with-api" id="data-analysis-work-with-api.md">Retrieve data from web sources and APIs</h1><p id="g9kwv0_2"><a href="kotlin-notebook-overview.html" id="g9kwv0_10">Kotlin Notebook</a> provides a powerful platform for accessing and manipulating data from various web sources and APIs. It simplifies data extraction and analysis tasks by offering an iterative environment where every step can be visualized for clarity. This makes it particularly useful when exploring APIs you are not familiar with.</p><p id="g9kwv0_3">When used in conjunction with the <a href="https://kotlin.github.io/dataframe/gettingstarted.html" id="g9kwv0_11" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin DataFrame library</a>, Kotlin Notebook not only enables you to connect to and fetch JSON data from APIs but also assists in reshaping this data for comprehensive analysis and visualization.</p><aside class="prompt" data-type="tip" data-title="" id="g9kwv0_4"><p id="g9kwv0_12">For Kotlin Notebook examples, see <a href="https://github.com/Kotlin/dataframe/blob/master/examples/notebooks/youtube/Youtube.ipynb" id="g9kwv0_13" data-external="true" rel="noopener noreferrer" target="_blank">DataFrame examples on GitHub</a>.</p></aside><section class="chapter"><h2 id="before-you-start" data-toc="before-you-start">Before you start</h2><p id="g9kwv0_14">Kotlin Notebook relies on the <a href="https://plugins.jetbrains.com/plugin/16340-kotlin-notebook" id="g9kwv0_18" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin Notebook plugin</a>, which is bundled and enabled in IntelliJ IDEA by default.</p><p id="g9kwv0_15">If the Kotlin Notebook features are not available, ensure the plugin is enabled. For more information, see <a href="kotlin-notebook-set-up-env.html" id="g9kwv0_19">Set up an environment</a>.</p><p id="g9kwv0_16">Create a new Kotlin Notebook:</p><ol class="list _decimal" id="g9kwv0_17" type="1"><li class="list__item" id="g9kwv0_20"><p id="g9kwv0_22">Select <span class="control" id="g9kwv0_23">File</span> | <span class="control" id="g9kwv0_24">New</span> | <span class="control" id="g9kwv0_25">Kotlin Notebook</span>.</p></li><li class="list__item" id="g9kwv0_21"><p id="g9kwv0_26">In the Kotlin Notebook, import the Kotlin DataFrame library by running the following command:</p><div class="code-block" data-lang="kotlin">
%use dataframe
</div></li></ol></section><section class="chapter"><h2 id="fetch-data-from-an-api" data-toc="fetch-data-from-an-api">Fetch data from an API</h2><p id="g9kwv0_28">Fetching data from APIs using the Kotlin Notebook with the Kotlin DataFrame library is achieved through the <a href="https://kotlin.github.io/dataframe/read.html" id="g9kwv0_31" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_33">.read()</code></a> function, which is similar to <a href="data-analysis-work-with-data-sources.html#retrieve-data-from-a-file" id="g9kwv0_32">retrieving data from files</a>, such as CSV or JSON. However, when working with web-based sources, you might require additional formatting to transform the raw API data into a structured format.</p><p id="g9kwv0_29">Let's look at an example of fetching data from the <a href="https://console.cloud.google.com/apis/library/youtube.googleapis.com" id="g9kwv0_34" data-external="true" rel="noopener noreferrer" target="_blank">YouTube Data API</a>:</p><ol class="list _decimal" id="g9kwv0_30" type="1"><li class="list__item" id="g9kwv0_35"><p id="g9kwv0_42">Open your Kotlin Notebook file (<code class="code" id="g9kwv0_43">.ipynb</code>).</p></li><li class="list__item" id="g9kwv0_36"><p id="g9kwv0_44">Import the Kotlin DataFrame library, which is essential for data manipulation tasks. This is done by running the following command in a code cell:</p><div class="code-block" data-lang="kotlin">
%use dataframe
</div></li><li class="list__item" id="g9kwv0_37"><p id="g9kwv0_46">Securely add your API key in a new code cell, which is necessary for authenticating requests to the YouTube Data API. You can obtain your API key from the <a href="https://console.cloud.google.com/apis/credentials" id="g9kwv0_48" data-external="true" rel="noopener noreferrer" target="_blank">credentials tab</a>:</p><div class="code-block" data-lang="kotlin">
val apiKey = &quot;YOUR-API_KEY&quot;
</div></li><li class="list__item" id="g9kwv0_38"><p id="g9kwv0_49">Create a load function that takes a path as a string and uses the DataFrame's <code class="code" id="g9kwv0_51">.read()</code> function to fetch data from the YouTube Data API:</p><div class="code-block" data-lang="kotlin">
fun load(path: String): AnyRow = DataRow.read(&quot;https://www.googleapis.com/youtube/v3/$path&amp;key=$apiKey&quot;)
</div></li><li class="list__item" id="g9kwv0_39"><p id="g9kwv0_52">Organize the fetched data into rows and handle the YouTube API's pagination through the <code class="code" id="g9kwv0_54">nextPageToken</code>. This ensures you gather data across multiple pages:</p><div class="code-block" data-lang="kotlin">
fun load(path: String, maxPages: Int): AnyFrame {

    // Initializes a mutable list to store rows of data.
    val rows = mutableListOf&lt;AnyRow&gt;()

    // Sets the initial page path for data loading.
    var pagePath = path
    do {

        // Loads data from the current page path.
        val row = load(pagePath)
        // Adds the loaded data as a row to the list.
        rows.add(row)

        // Retrieves the token for the next page, if available.
        val next = row.getValueOrNull&lt;String&gt;(&quot;nextPageToken&quot;)
        // Updates the page path for the next iteration, including the new token.
        pagePath = path + &quot;&amp;pageToken=&quot; + next

        // Continues loading pages until there's no next page.
    } while (next != null &amp;&amp; rows.size &lt; maxPages) 

    // Concatenates and returns all loaded rows as a DataFrame.
    return rows.concat() 
}
</div></li><li class="list__item" id="g9kwv0_40"><p id="g9kwv0_55">Use the previously defined <code class="code" id="g9kwv0_57">load()</code> function to fetch data and create a DataFrame in a new code cell. This example fetches data, or in this case, videos related to Kotlin, with a maximum of 50 results per page, up to a maximum of 5 pages. The result is stored in the <code class="code" id="g9kwv0_58">df</code> variable:</p><div class="code-block" data-lang="kotlin">
val df = load(&quot;search?q=kotlin&amp;maxResults=50&amp;part=snippet&quot;, 5)
df
</div></li><li class="list__item" id="g9kwv0_41"><p id="g9kwv0_59">Finally, extract and concatenate items from the DataFrame:</p><div class="code-block" data-lang="kotlin">
val items = df.items.concat()
items
</div></li></ol></section><section class="chapter"><h2 id="clean-and-refine-data" data-toc="clean-and-refine-data">Clean and refine data</h2><p id="g9kwv0_61">Cleaning and refining data are crucial steps in preparing your dataset for analysis. The <a href="https://kotlin.github.io/dataframe/gettingstarted.html" id="g9kwv0_65" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin DataFrame library</a> offers powerful functionalities for these tasks. Methods like <a href="https://kotlin.github.io/dataframe/move.html" id="g9kwv0_66" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_71">move</code></a>, <a href="https://kotlin.github.io/dataframe/concatdf.html" id="g9kwv0_67" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_72">concat</code></a>, <a href="https://kotlin.github.io/dataframe/select.html" id="g9kwv0_68" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_73">select</code></a>, <a href="https://kotlin.github.io/dataframe/parse.html" id="g9kwv0_69" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_74">parse</code></a>, and <a href="https://kotlin.github.io/dataframe/join.html" id="g9kwv0_70" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_75">join</code></a> are instrumental in organizing and transforming your data.</p><p id="g9kwv0_62">Let's explore an example where the data is already <a href="#fetch-data-from-an-api" id="g9kwv0_76">fetched using YouTube's data API</a>. The goal is to clean and restructure the dataset to prepare for in-depth analysis:</p><ol class="list _decimal" id="g9kwv0_63" type="1"><li class="list__item" id="g9kwv0_77"><p id="g9kwv0_81">You can start by reorganizing and cleaning your data. This involves moving certain columns under new headers and removing unnecessary ones for clarity:</p><div class="code-block" data-lang="kotlin">
val videos = items.dropNulls { id.videoId }
    .select { id.videoId named &quot;id&quot; and snippet }
    .distinct()
videos
</div></li><li class="list__item" id="g9kwv0_78"><p id="g9kwv0_83">Chunk IDs from the cleaned data and load corresponding video statistics. This involves breaking the data into smaller batches and fetching additional details:</p><div class="code-block" data-lang="kotlin">
val statPages = clean.id.chunked(50).map {
    val ids = it.joinToString(&quot;%2C&quot;)
    load(&quot;videos?part=statistics&amp;id=$ids&quot;)
}
statPages
</div></li><li class="list__item" id="g9kwv0_79"><p id="g9kwv0_85">Concatenate the fetched statistics and select relevant columns:</p><div class="code-block" data-lang="kotlin">
val stats = statPages.items.concat().select { id and statistics.all() }.parse()
stats
</div></li><li class="list__item" id="g9kwv0_80"><p id="g9kwv0_87">Join the existing cleaned data with the newly fetched statistics. This merges two sets of data into a comprehensive DataFrame:</p><div class="code-block" data-lang="kotlin">
val joined = clean.join(stats)
joined
</div></li></ol><p id="g9kwv0_64">This example demonstrates how to clean, reorganize, and enhance your dataset using Kotlin DataFrame's various functions. Each step is designed to refine the data, making it more suitable for <a href="#analyze-data-in-kotlin-notebook" id="g9kwv0_89">in-depth analysis</a>.</p></section><section class="chapter"><h2 id="analyze-data-in-kotlin-notebook" data-toc="analyze-data-in-kotlin-notebook">Analyze data in Kotlin Notebook</h2><p id="g9kwv0_90">After you've successfully <a href="#fetch-data-from-an-api" id="g9kwv0_102">fetched</a> and <a href="#clean-and-refine-data" id="g9kwv0_103">cleaned and refined your data</a> using functions from the <a href="https://kotlin.github.io/dataframe/gettingstarted.html" id="g9kwv0_104" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin DataFrame library</a>, the next step is to analyze this prepared dataset to extract meaningful insights.</p><p id="g9kwv0_91">Methods such as <a href="https://kotlin.github.io/dataframe/groupby.html" id="g9kwv0_105" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_110">groupBy</code></a> for categorizing data, <a href="https://kotlin.github.io/dataframe/sum.html" id="g9kwv0_106" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_111">sum</code></a> and <a href="https://kotlin.github.io/dataframe/maxby.html" id="g9kwv0_107" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_112">maxBy</code></a> for <a href="https://kotlin.github.io/dataframe/summarystatistics.html" id="g9kwv0_108" data-external="true" rel="noopener noreferrer" target="_blank">summary statistics</a>, and <a href="https://kotlin.github.io/dataframe/sortby.html" id="g9kwv0_109" data-external="true" rel="noopener noreferrer" target="_blank"><code class="code" id="g9kwv0_113">sortBy</code></a> for ordering data are particularly useful. These tools allow you to perform complex data analysis tasks efficiently.</p><p id="g9kwv0_92">Let's look at an example, using <code class="code" id="g9kwv0_114">groupBy</code> to categorize videos by channel, <code class="code" id="g9kwv0_115">sum</code> to calculate total views per category, and <code class="code" id="g9kwv0_116">maxBy</code> to find the latest or most viewed video in each group:</p><ol class="list _decimal" id="g9kwv0_93" type="1"><li class="list__item" id="g9kwv0_117"><p id="g9kwv0_119">Simplify the access to specific columns by setting up references:</p><div class="code-block" data-lang="kotlin">
val view by column&lt;Int&gt;()
</div></li><li class="list__item" id="g9kwv0_118"><p id="g9kwv0_121">Use the <code class="code" id="g9kwv0_123">groupBy</code> method to group the data by the <code class="code" id="g9kwv0_124">channel</code> column and sort it.</p><div class="code-block" data-lang="kotlin">
val channels = joined.groupBy { channel }.sortByCount()
</div></li></ol><p id="g9kwv0_94">In the resulting table, you can interactively explore the data. Clicking on the <code class="code" id="g9kwv0_125">group</code> field of a row corresponding to a channel expands that row to reveal more details about that channel's videos.</p><figure id="g9kwv0_95"><img alt="Expanding a row to reveal more details" src="images/results-of-expanding-group-data-analysis.png" title="Expanding a row to reveal more details" width="700" height="284"></figure><p id="g9kwv0_96">You can click the table icon in the bottom left to return to the grouped dataset.</p><figure id="g9kwv0_97"><img alt="Click on the table icon in the bottom left to return" src="images/return-to-grouped-dataset.png" title="Click on the table icon in the bottom left to return" width="700" height="293"></figure><ol class="list _decimal" id="g9kwv0_98" type="1" start="3"><li class="list__item" id="g9kwv0_126"><p id="g9kwv0_127">Use <code class="code" id="g9kwv0_129">aggregate</code>, <code class="code" id="g9kwv0_130">sum</code>, <code class="code" id="g9kwv0_131">maxBy</code>, and <code class="code" id="g9kwv0_132">flatten</code> to create a DataFrame summarizing each channel's total views and details of its latest or most viewed video:</p><div class="code-block" data-lang="kotlin">
val aggregated = channels.aggregate {
    viewCount.sum() into view

    val last = maxBy { publishedAt }
    last.title into &quot;last title&quot;
    last.publishedAt into &quot;time&quot;
    last.viewCount into &quot;viewCount&quot;
    // Sorts the DataFrame in descending order by view count and transform it into a flat structure.
}.sortByDesc(view).flatten()
aggregated
</div></li></ol><p id="g9kwv0_99">The results of the analysis:</p><figure id="g9kwv0_100"><img alt="Analysis results" src="images/kotlin-analysis.png" title="Analysis results" width="700" height="414"></figure><p id="g9kwv0_101">For more advanced techniques, see the <a href="https://kotlin.github.io/dataframe/gettingstarted.html" id="g9kwv0_133" data-external="true" rel="noopener noreferrer" target="_blank">Kotlin DataFrame documentation</a>.</p></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next</h2><ul class="list _bullet" id="g9kwv0_134"><li class="list__item" id="g9kwv0_135"><p id="g9kwv0_138">Explore data visualization using the <a href="https://kotlin.github.io/kandy/examples.html" id="g9kwv0_139" data-external="true" rel="noopener noreferrer" target="_blank">Kandy library</a></p></li><li class="list__item" id="g9kwv0_136"><p id="g9kwv0_140">Find additional information about data visualization in <a href="data-analysis-visualization.html" id="g9kwv0_141">Data visualization in Kotlin Notebook with Kandy</a></p></li><li class="list__item" id="g9kwv0_137"><p id="g9kwv0_142">For an extensive overview of tools and resources available for data science and analysis in Kotlin, see <a href="data-analysis-libraries.html" id="g9kwv0_143">Kotlin and Java libraries for data analysis</a></p></li></ul></section><div class="last-modified">30 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="data-analysis-work-with-data-sources.html" class="navigation-links__prev">Retrieve data from files</a><a href="data-analysis-connect-to-db.html" class="navigation-links__next">Connect and retrieve data from databases</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>